INFO:     Will watch for changes in these directories: ['/home/ubox133/projects/DocQuery AI/backend']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [107608] using WatchFiles
/home/ubox133/projects/DocQuery AI/backend/.venv/lib/python3.12/site-packages/pydantic/_internal/_fields.py:151: UserWarning: Field "model_used" has conflict with protected namespace "model_".

You may be able to resolve this warning by setting `model_config['protected_namespaces'] = ()`.
  warnings.warn(
/home/ubox133/projects/DocQuery AI/backend/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:272: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.6/migration/
  warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)
INFO:     Started server process [107611]
INFO:     Waiting for application startup.
2025-12-12 15:33:13,233 - app.main - INFO - Starting DocQuery AI...
2025-12-12 15:33:13,980 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-12-12 15:33:13,980 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-12-12 15:33:13,980 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-12-12 15:33:13,980 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-12-12 15:33:14,229 INFO sqlalchemy.engine.Engine select current_schema()
2025-12-12 15:33:14,229 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-12-12 15:33:14,229 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-12-12 15:33:14,229 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-12-12 15:33:14,474 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-12-12 15:33:14,474 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-12-12 15:33:14,475 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-12-12 15:33:14,475 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-12-12 15:33:14,660 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:33:14,660 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:33:14,671 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:14,671 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:14,672 INFO sqlalchemy.engine.Engine [generated in 0.00074s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:14,672 - sqlalchemy.engine.Engine - INFO - [generated in 0.00074s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:14,857 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:14,857 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:14,857 INFO sqlalchemy.engine.Engine [cached since 0.1857s ago] ('documents', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:14,857 - sqlalchemy.engine.Engine - INFO - [cached since 0.1857s ago] ('documents', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:14,920 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:14,920 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:14,923 INFO sqlalchemy.engine.Engine [cached since 0.2522s ago] ('document_chunks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:14,923 - sqlalchemy.engine.Engine - INFO - [cached since 0.2522s ago] ('document_chunks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:14,987 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:14,987 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:14,987 INFO sqlalchemy.engine.Engine [cached since 0.3159s ago] ('queries', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:14,987 - sqlalchemy.engine.Engine - INFO - [cached since 0.3159s ago] ('queries', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:15,052 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:15,052 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:15,052 INFO sqlalchemy.engine.Engine [cached since 0.3807s ago] ('chat_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:15,052 - sqlalchemy.engine.Engine - INFO - [cached since 0.3807s ago] ('chat_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:15,115 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:15,115 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:15,118 INFO sqlalchemy.engine.Engine [cached since 0.4468s ago] ('chat_messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:15,118 - sqlalchemy.engine.Engine - INFO - [cached since 0.4468s ago] ('chat_messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:15,180 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:15,180 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:15,181 INFO sqlalchemy.engine.Engine [cached since 0.5102s ago] ('collection_documents', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:15,181 - sqlalchemy.engine.Engine - INFO - [cached since 0.5102s ago] ('collection_documents', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:15,246 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:15,246 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:15,246 INFO sqlalchemy.engine.Engine [cached since 0.5754s ago] ('collections', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:15,246 - sqlalchemy.engine.Engine - INFO - [cached since 0.5754s ago] ('collections', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:15,309 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:15,309 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:15,309 INFO sqlalchemy.engine.Engine [cached since 0.6382s ago] ('collection_shares', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:15,309 - sqlalchemy.engine.Engine - INFO - [cached since 0.6382s ago] ('collection_shares', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:15,372 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:15,372 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-12 15:33:15,372 INFO sqlalchemy.engine.Engine [cached since 0.7013s ago] ('query_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:15,372 - sqlalchemy.engine.Engine - INFO - [cached since 0.7013s ago] ('query_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-12 15:33:15,436 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-12-12 15:33:15,436 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-12-12 15:33:15,436 INFO sqlalchemy.engine.Engine [generated in 0.00025s] ('documentstatus', 'pg_catalog')
2025-12-12 15:33:15,436 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('documentstatus', 'pg_catalog')
2025-12-12 15:33:15,560 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:33:15,560 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:33:15,621 - app.main - INFO - Database initialized
/home/ubox133/projects/DocQuery AI/backend/.venv/lib/python3.12/site-packages/weaviate/warnings.py:130: DeprecationWarning: Dep005: You are using weaviate-client version 4.4.4. The latest version is 4.18.3.
            Please consider upgrading to the latest version. See https://weaviate.io/developers/weaviate/client-libraries/python for details.
  warnings.warn(
2025-12-12 15:33:15,942 - app.services.weaviate_service - INFO - Connected to Weaviate successfully
2025-12-12 15:33:15,943 - app.services.weaviate_service - INFO - Collection DocQueryChunks already exists
2025-12-12 15:33:15,943 - app.main - INFO - Connected to Weaviate
2025-12-12 15:33:15,944 - app.main - INFO - DocQuery AI started successfully!
INFO:     Application startup complete.
INFO:     127.0.0.1:49890 - "GET /api/v1/health/ HTTP/1.1" 200 OK
/home/ubox133/projects/DocQuery AI/backend/.venv/lib/python3.12/site-packages/jose/jwt.py:311: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  now = timegm(datetime.utcnow().utctimetuple())
2025-12-12 15:34:14,559 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:14,559 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:14,603 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:14,603 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:14,603 INFO sqlalchemy.engine.Engine [generated in 0.00024s] (3,)
2025-12-12 15:34:14,603 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] (3,)
2025-12-12 15:34:14,788 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:14,788 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:52682 - "GET /api/v1/users/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:52692 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:52692 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
2025-12-12 15:34:15,041 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:15,041 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:15,042 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:15,042 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:15,043 INFO sqlalchemy.engine.Engine [cached since 0.4404s ago] (3,)
2025-12-12 15:34:15,043 - sqlalchemy.engine.Engine - INFO - [cached since 0.4404s ago] (3,)
2025-12-12 15:34:15,167 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:15,167 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:52682 - "GET /api/v1/users/me HTTP/1.1" 200 OK
2025-12-12 15:34:15,700 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:15,700 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:15,701 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:15,701 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:15,701 INFO sqlalchemy.engine.Engine [generated in 0.00021s] (3,)
2025-12-12 15:34:15,701 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] (3,)
2025-12-12 15:34:15,952 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:15,952 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:15,952 INFO sqlalchemy.engine.Engine [generated in 0.00059s] (3, 10, 0)
2025-12-12 15:34:15,952 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] (3, 10, 0)
2025-12-12 15:34:16,447 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:16,447 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:52692 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 15:34:16,697 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:16,697 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:16,698 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:16,698 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:16,698 INFO sqlalchemy.engine.Engine [cached since 0.9968s ago] (3,)
2025-12-12 15:34:16,698 - sqlalchemy.engine.Engine - INFO - [cached since 0.9968s ago] (3,)
2025-12-12 15:34:16,883 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:16,883 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:16,884 INFO sqlalchemy.engine.Engine [cached since 0.9317s ago] (3, 10, 0)
2025-12-12 15:34:16,884 - sqlalchemy.engine.Engine - INFO - [cached since 0.9317s ago] (3, 10, 0)
2025-12-12 15:34:17,379 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:17,379 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:52692 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52682 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:52682 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 15:34:17,706 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:17,706 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:17,707 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:17,707 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:17,707 INFO sqlalchemy.engine.Engine [cached since 2.006s ago] (3,)
2025-12-12 15:34:17,707 - sqlalchemy.engine.Engine - INFO - [cached since 2.006s ago] (3,)
2025-12-12 15:34:17,756 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:17,756 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:17,756 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:17,756 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:17,757 INFO sqlalchemy.engine.Engine [cached since 3.154s ago] (3,)
2025-12-12 15:34:17,757 - sqlalchemy.engine.Engine - INFO - [cached since 3.154s ago] (3,)
2025-12-12 15:34:17,832 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:17,832 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:17,832 INFO sqlalchemy.engine.Engine [cached since 1.88s ago] (3, 100, 0)
2025-12-12 15:34:17,832 - sqlalchemy.engine.Engine - INFO - [cached since 1.88s ago] (3, 100, 0)
2025-12-12 15:34:17,895 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:17,895 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:34:17,941 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:34:17,941 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:52682 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:34:18,150 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:18,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:18,151 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:18,151 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:18,151 INFO sqlalchemy.engine.Engine [cached since 2.45s ago] (3,)
2025-12-12 15:34:18,151 - sqlalchemy.engine.Engine - INFO - [cached since 2.45s ago] (3,)
2025-12-12 15:34:18,188 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:18,188 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:18,195 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:34:18,195 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:34:18,195 INFO sqlalchemy.engine.Engine [generated in 0.00058s] (3,)
2025-12-12 15:34:18,195 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] (3,)
2025-12-12 15:34:18,278 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:18,278 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:18,278 INFO sqlalchemy.engine.Engine [cached since 2.326s ago] (3, 100, 0)
2025-12-12 15:34:18,278 - sqlalchemy.engine.Engine - INFO - [cached since 2.326s ago] (3, 100, 0)
2025-12-12 15:34:18,341 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:18,341 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:52682 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:34:18,431 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:18,431 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:18,432 INFO sqlalchemy.engine.Engine [generated in 0.00038s] (3, 50, 0)
2025-12-12 15:34:18,432 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] (3, 50, 0)
2025-12-12 15:34:18,555 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:18,555 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:52692 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:34:18,808 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:18,808 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:18,809 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:18,809 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:18,809 INFO sqlalchemy.engine.Engine [cached since 4.206s ago] (3,)
2025-12-12 15:34:18,809 - sqlalchemy.engine.Engine - INFO - [cached since 4.206s ago] (3,)
2025-12-12 15:34:18,933 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:34:18,933 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:34:19,185 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:19,185 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:19,186 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:34:19,186 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:34:19,187 INFO sqlalchemy.engine.Engine [cached since 0.9925s ago] (3,)
2025-12-12 15:34:19,187 - sqlalchemy.engine.Engine - INFO - [cached since 0.9925s ago] (3,)
2025-12-12 15:34:19,310 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:19,310 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:19,310 INFO sqlalchemy.engine.Engine [generated in 0.00038s] (3, 50, 0)
2025-12-12 15:34:19,310 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] (3, 50, 0)
2025-12-12 15:34:19,372 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:19,372 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:52692 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:34:19,637 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:19,637 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:19,638 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:19,638 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:19,638 INFO sqlalchemy.engine.Engine [cached since 5.036s ago] (3,)
2025-12-12 15:34:19,638 - sqlalchemy.engine.Engine - INFO - [cached since 5.036s ago] (3,)
2025-12-12 15:34:19,762 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:34:19,762 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:34:20,008 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:20,008 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:20,013 INFO sqlalchemy.engine.Engine INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 15:34:20,013 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 15:34:20,014 INFO sqlalchemy.engine.Engine [generated in 0.00077s] (3, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 15:34:20,014 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] (3, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 15:34:20,204 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:34:20,204 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:34:20,204 INFO sqlalchemy.engine.Engine [generated in 0.00053s] (1,)
2025-12-12 15:34:20,204 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] (1,)
2025-12-12 15:34:20,337 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:20,337 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:52692 - "POST /api/v1/chat/sessions HTTP/1.1" 201 Created
INFO:     127.0.0.1:52692 - "OPTIONS /api/v1/chat/sessions/1/messages HTTP/1.1" 200 OK
2025-12-12 15:34:20,602 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:20,602 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:20,603 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:20,603 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:20,603 INFO sqlalchemy.engine.Engine [cached since 6.001s ago] (3,)
2025-12-12 15:34:20,603 - sqlalchemy.engine.Engine - INFO - [cached since 6.001s ago] (3,)
2025-12-12 15:34:20,728 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:34:20,728 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:34:20,971 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:20,971 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:20,972 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:34:20,972 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:34:20,972 INFO sqlalchemy.engine.Engine [generated in 0.00022s] (1, 3)
2025-12-12 15:34:20,972 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] (1, 3)
/home/ubox133/projects/DocQuery AI/backend/app/services/chat_service.py:170: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  last_message_at=datetime.utcnow(),
/home/ubox133/projects/DocQuery AI/backend/app/services/chat_service.py:171: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  updated_at=datetime.utcnow()
2025-12-12 15:34:21,160 INFO sqlalchemy.engine.Engine INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:34:21,160 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:34:21,160 INFO sqlalchemy.engine.Engine [generated in 0.00048s] (1, 'user', 'What are the main topics covered in my documents?', 'null', None, None, None, None, None)
2025-12-12 15:34:21,160 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] (1, 'user', 'What are the main topics covered in my documents?', 'null', None, None, None, None, None)
2025-12-12 15:34:21,290 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:34:21,290 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:34:21,290 INFO sqlalchemy.engine.Engine [generated in 0.00029s] (1, datetime.datetime(2025, 12, 12, 10, 4, 21, 155500), datetime.datetime(2025, 12, 12, 10, 4, 21, 155471), 1)
2025-12-12 15:34:21,290 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] (1, datetime.datetime(2025, 12, 12, 10, 4, 21, 155500), datetime.datetime(2025, 12, 12, 10, 4, 21, 155471), 1)
2025-12-12 15:34:21,416 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:34:21,416 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:34:21,416 INFO sqlalchemy.engine.Engine [generated in 0.00062s] (1,)
2025-12-12 15:34:21,416 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] (1,)
2025-12-12 15:34:21,543 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET title=$1::VARCHAR, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:34:21,543 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET title=$1::VARCHAR, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:34:21,543 INFO sqlalchemy.engine.Engine [generated in 0.00027s] ('What are the main topics covered in my documents?', 1)
2025-12-12 15:34:21,543 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('What are the main topics covered in my documents?', 1)
2025-12-12 15:34:21,665 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:34:21,665 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:34:21,665 INFO sqlalchemy.engine.Engine [cached since 0.6935s ago] (1, 3)
2025-12-12 15:34:21,665 - sqlalchemy.engine.Engine - INFO - [cached since 0.6935s ago] (1, 3)
2025-12-12 15:34:21,729 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.session_id = $1::INTEGER ORDER BY chat_messages.created_at 
 LIMIT $2::INTEGER
2025-12-12 15:34:21,729 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.session_id = $1::INTEGER ORDER BY chat_messages.created_at 
 LIMIT $2::INTEGER
2025-12-12 15:34:21,730 INFO sqlalchemy.engine.Engine [generated in 0.00047s] (1, 10)
2025-12-12 15:34:21,730 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] (1, 10)
2025-12-12 15:34:30,101 - app.services.weaviate_service - INFO - Found 5 results for query: What are the main topics covered in my documents?...
2025-12-12 15:34:30,236 - app.services.llm_service - INFO - Initialized Groq LLM with model: llama-3.3-70b-versatile
2025-12-12 15:34:30,279 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-e91e2a10-0022-4fd0-a731-a582913c3162', 'json_data': {'messages': [{'role': 'user', 'content': "You are DocQuery AI, an intelligent document assistant. Your task is to answer questions based on the provided document context.\n\nGuidelines:\n1. Answer based ONLY on the information provided in the context\n2. If the context doesn't contain relevant information, clearly state that\n3. Cite the source documents when providing information\n4. Be concise but comprehensive\n5. If multiple sources provide relevant information, synthesize them\n6. Use a professional and helpful tone\n\n## Document Context:\n[Source 1: Dipesh_Paul_Resume.pdf] (Page 1)\nIndore (Senior Machine Learning Engineer) Dec 2023 - Present Designed and implemented distributed finetuning workflows using QLoRA, reducing training time by ~30% and cutting training costs by ~20%. Built multi-agent orchestration using OpenAI Agent SDK + PydanticAI for real-time task routing, improving routing accuracy and reducing manual triage effort by 40%. Collaborated with cross-functional teams (product, infra) to productionize LLM features with FastAPI and Docker, ensuring low-latency, high-availability deployments.Tensorflow Keras Pytorch Scikit Learn Transformers Ollama OpenCV Spacy RAGPydanticAI Langchain NLP SFT, RLHF, Peft etc. Docker MCP & Tools Function Calling Embeddings Prompt EngineeringJira Git Agent Frameworks Kafka Team Lead Client Handling Innovation Adoption Research Translation Architecture Designing Feb 2023 - July 2023Zdaly, Indore (Senior Machine Learning Engineer) Built an LLM-powered product catalog analyzer that improved lookup accuracy by 45%.\n\n---\n\n[Source 2: Dipesh_Paul_Resume.pdf] (Page 1)\nWeaviate vector DB, Architecture Design LLM Powered Productivity Bot Built a comprehensive platform allowing users to connect and sync data from applications like Gmail, Calendar, and Outlook. The system delivers actionable insights, recommendations, and cross-app search capabilities using embedding models and similarity searches. OpenAI's GPT-4o, FastAPI, Weaviate vector DB, AWS Bedrock, OpenAI API, RAG Product Chat Agent Created an advanced chatbot that leverages large language models to provide detailed product information and streamline purchase processes based on natural language user prompts. Python, Langchain, OpenAI, FastAPI, Prompt Engineering Price Analysis with Scraping Built a comprehensive price analysis system that scrapes data from global E-commerce and OEM websites to inform pricing strategies for computing devices. Implemented machine learning models for accurate price prediction.\n\n---\n\n[Source 3: Dipesh_Paul_Resume.pdf] (Page 1)\nDeepLearning.AI, Stanford University (100%) Python Data Structures: University of Michigan (98.40%) RGPV University Bachelor of Engineering in Computer Science, 2019 Acropolis Institute of Tech. & Research, Indore CGPA: 7.5EDUCATION OPEN-SOURCE & PUBLICATIONS Chatformers chatformers: Chatformers is a Python package that simplifies chatbot development by automatically managing chat history using local vector databases like Chroma DB. Pypi URL: pypi.org/project/chatformers GITHUB STATS Total Repository: 104 Stars Count: 639 Commits Count: 2.1K Followers: 97 Stats Checker: https://gh-readme-profile.vercel.app/api?username=DipeshpalM.P. Board Higher School, 2015 Score: 75% M.P. Board Secondary School, 2013 Score: 80% JarvisAI JarvisAI: JarvisAI is Python library to build your own AI virtual assistant with natural language processing.\n\n---\n\n[Source 4: Dipesh_Paul_Resume.pdf] (Page 1)\nHigher School, 2015 Score: 75% M.P. Board Secondary School, 2013 Score: 80% JarvisAI JarvisAI: JarvisAI is Python library to build your own AI virtual assistant with natural language processing. Pypi URL: pypi.org/project/JarvisAI Python is All You Need  ebook covering Python from basics to advanced Ebook URL: techport.myinstamojo.com/product/python-is-all-you-need LINKS LinkedIn: https://www.linkedin.com/in/dipesh-paul GitHub: https://github.com/Dipeshpal Portfolio: www.dipeshpal.in\n\n---\n\n[Source 5: Dipesh_Paul_Resume.pdf] (Page 1)\nAutomated ticketing processes using advanced machine learning techniques. Utilized NLP and Wikipedia-trained ULMfit Fastai models to analyze tickets and intelligently determine appropriate assignees. Python, Kafka, Docker, FastAPI, AI/ML, Fastai Avatar Generator Built an avatar generation system for portfolio faces, trained on a dataset of approximately 143,000 human and cartoon images. Implemented various neural network architectures, including Deep Convolutional GANs (Style GAN), CNN, and UNet. Python, AI/ML, Tensorflow, OpenCV, DZoneADDITIONAL PROJECTS CERTIFICATIONS Machine Learning: Stanford University (96.47%) Introduction to TensorFlow for Artificial Intelligence, Machine Learning, and Deep Learning: Coursera (99.28%) Supervised Machine Learning (Regression and Classification): DeepLearning.AI, Stanford University (100%) Python Data Structures: University of Michigan (98.40%) RGPV University Bachelor of Engineering in Computer Science, 2019 Acropolis Institute of Tech.\n\n## User Question:\nWhat are the main topics covered in my documents?\n\n## Your Response:"}], 'model': 'llama-3.3-70b-versatile', 'max_tokens': 1024, 'temperature': 0.7}}
2025-12-12 15:34:30,282 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-12-12 15:34:31,500 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Fri, 12 Dec 2025 10:04:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'server': 'cloudflare', 'vary': 'Origin', 'x-groq-region': 'bom', 'x-ratelimit-limit-requests': '1000', 'x-ratelimit-limit-tokens': '12000', 'x-ratelimit-remaining-requests': '999', 'x-ratelimit-remaining-tokens': '10844', 'x-ratelimit-reset-requests': '1m26.4s', 'x-ratelimit-reset-tokens': '5.78s', 'x-request-id': 'req_01kc909tf4fzws11hcscxtvzye', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=982sUK1kgLedrlGqqIvHWtXuvb9ao_TM_G7OWy9UaRg-1765533870.5342207-1.0.1.1-Lmkoojcwxf2hl1yeVFh8FOYmppJBgl9mf0RFohiIy0gKDW589VwrTVkrkT7sKS_ASPDlwaXcVn73hC9SbpTmW4f_h7o61fkgQ5llcNOEPibuIn09g7jzaXIvUGrgjA1M; HttpOnly; Secure; Path=/; Domain=groq.com; Expires=Fri, 12 Dec 2025 10:34:31 GMT', 'strict-transport-security': 'max-age=2592000', 'content-encoding': 'gzip', 'cf-ray': '9acc65e2dd861eed-BOM', 'alt-svc': 'h3=":443"; ma=86400'})
/home/ubox133/projects/DocQuery AI/backend/app/services/chat_service.py:170: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  last_message_at=datetime.utcnow(),
/home/ubox133/projects/DocQuery AI/backend/app/services/chat_service.py:171: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  updated_at=datetime.utcnow()
2025-12-12 15:34:31,574 INFO sqlalchemy.engine.Engine INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:34:31,574 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:34:31,574 INFO sqlalchemy.engine.Engine [cached since 10.41s ago] (1, 'assistant', "Based on the provided document context, the main topics covered are:\n\n1. **Machine Learning and Artificial Intelligence**: The documents discuss va ... (989 characters truncated) ... ics are synthesized from multiple sources, including the author's resume and project descriptions. [Source 1, Source 2, Source 3, Source 4, Source 5]", '[{"document_id": 10, "document_name": "Dipesh_Paul_Resume.pdf", "chunk_id": 1, "content": "Indore (Senior Machine Learning Engineer) Dec 2023 - Prese ... (1947 characters truncated) ...  Kafka, Docker, FastAPI, AI/ML, Fastai Avatar Generator Built an avatar generation system for...", "relevance_score": 0.1306893229484558, "page": 1}]', None, None, 9719, None, 'llama-3.3-70b-versatile')
2025-12-12 15:34:31,574 - sqlalchemy.engine.Engine - INFO - [cached since 10.41s ago] (1, 'assistant', "Based on the provided document context, the main topics covered are:\n\n1. **Machine Learning and Artificial Intelligence**: The documents discuss va ... (989 characters truncated) ... ics are synthesized from multiple sources, including the author's resume and project descriptions. [Source 1, Source 2, Source 3, Source 4, Source 5]", '[{"document_id": 10, "document_name": "Dipesh_Paul_Resume.pdf", "chunk_id": 1, "content": "Indore (Senior Machine Learning Engineer) Dec 2023 - Prese ... (1947 characters truncated) ...  Kafka, Docker, FastAPI, AI/ML, Fastai Avatar Generator Built an avatar generation system for...", "relevance_score": 0.1306893229484558, "page": 1}]', None, None, 9719, None, 'llama-3.3-70b-versatile')
2025-12-12 15:34:31,638 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:34:31,638 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:34:31,639 INFO sqlalchemy.engine.Engine [cached since 10.35s ago] (1, datetime.datetime(2025, 12, 12, 10, 4, 31, 573343), datetime.datetime(2025, 12, 12, 10, 4, 31, 573323), 1)
2025-12-12 15:34:31,639 - sqlalchemy.engine.Engine - INFO - [cached since 10.35s ago] (1, datetime.datetime(2025, 12, 12, 10, 4, 31, 573343), datetime.datetime(2025, 12, 12, 10, 4, 31, 573323), 1)
2025-12-12 15:34:31,700 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:34:31,700 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:34:31,701 INFO sqlalchemy.engine.Engine [cached since 10.29s ago] (2,)
2025-12-12 15:34:31,701 - sqlalchemy.engine.Engine - INFO - [cached since 10.29s ago] (2,)
2025-12-12 15:34:31,764 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:34:31,764 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:34:31,764 INFO sqlalchemy.engine.Engine [cached since 10.79s ago] (1, 3)
2025-12-12 15:34:31,764 - sqlalchemy.engine.Engine - INFO - [cached since 10.79s ago] (1, 3)
2025-12-12 15:34:31,827 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:31,827 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:52682 - "POST /api/v1/chat/sessions/1/messages HTTP/1.1" 200 OK
INFO:     127.0.0.1:52704 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:52704 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
/home/ubox133/projects/DocQuery AI/backend/.venv/lib/python3.12/site-packages/jose/jwt.py:311: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  now = timegm(datetime.utcnow().utctimetuple())
2025-12-12 15:34:44,632 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:44,632 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:44,633 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:44,633 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:44,633 INFO sqlalchemy.engine.Engine [cached since 28.93s ago] (3,)
2025-12-12 15:34:44,633 - sqlalchemy.engine.Engine - INFO - [cached since 28.93s ago] (3,)
2025-12-12 15:34:44,758 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:44,758 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:44,758 INFO sqlalchemy.engine.Engine [cached since 28.81s ago] (3, 10, 0)
2025-12-12 15:34:44,758 - sqlalchemy.engine.Engine - INFO - [cached since 28.81s ago] (3, 10, 0)
2025-12-12 15:34:44,822 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:44,822 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:52704 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 15:34:45,078 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:45,078 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:45,078 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:45,078 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:45,079 INFO sqlalchemy.engine.Engine [cached since 29.38s ago] (3,)
2025-12-12 15:34:45,079 - sqlalchemy.engine.Engine - INFO - [cached since 29.38s ago] (3,)
2025-12-12 15:34:45,201 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:45,201 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:45,201 INFO sqlalchemy.engine.Engine [cached since 29.25s ago] (3, 10, 0)
2025-12-12 15:34:45,201 - sqlalchemy.engine.Engine - INFO - [cached since 29.25s ago] (3, 10, 0)
2025-12-12 15:34:45,265 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:45,265 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:33932 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:33932 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:52704 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 15:34:45,452 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:45,452 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:45,453 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:45,453 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:45,453 INFO sqlalchemy.engine.Engine [cached since 30.85s ago] (3,)
2025-12-12 15:34:45,453 - sqlalchemy.engine.Engine - INFO - [cached since 30.85s ago] (3,)
2025-12-12 15:34:45,577 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:34:45,577 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:34:45,823 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:45,823 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:45,824 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:34:45,824 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:34:45,824 INFO sqlalchemy.engine.Engine [cached since 27.63s ago] (3,)
2025-12-12 15:34:45,824 - sqlalchemy.engine.Engine - INFO - [cached since 27.63s ago] (3,)
2025-12-12 15:34:45,948 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:45,948 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:45,948 INFO sqlalchemy.engine.Engine [cached since 26.64s ago] (3, 50, 0)
2025-12-12 15:34:45,948 - sqlalchemy.engine.Engine - INFO - [cached since 26.64s ago] (3, 50, 0)
2025-12-12 15:34:46,011 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:46,011 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:34:46,017 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:46,017 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:46,018 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:46,018 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:46,018 INFO sqlalchemy.engine.Engine [cached since 30.32s ago] (3,)
2025-12-12 15:34:46,018 - sqlalchemy.engine.Engine - INFO - [cached since 30.32s ago] (3,)
INFO:     127.0.0.1:33922 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:34:46,269 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:46,269 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:46,269 INFO sqlalchemy.engine.Engine [cached since 30.32s ago] (3, 100, 0)
2025-12-12 15:34:46,269 - sqlalchemy.engine.Engine - INFO - [cached since 30.32s ago] (3, 100, 0)
2025-12-12 15:34:46,270 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:46,270 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:46,271 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:46,271 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:46,271 INFO sqlalchemy.engine.Engine [cached since 31.67s ago] (3,)
2025-12-12 15:34:46,271 - sqlalchemy.engine.Engine - INFO - [cached since 31.67s ago] (3,)
2025-12-12 15:34:46,395 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:34:46,395 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:34:46,639 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:46,639 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:46,640 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:34:46,640 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:34:46,640 INFO sqlalchemy.engine.Engine [cached since 28.45s ago] (3,)
2025-12-12 15:34:46,640 - sqlalchemy.engine.Engine - INFO - [cached since 28.45s ago] (3,)
2025-12-12 15:34:46,764 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:46,764 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:46,764 INFO sqlalchemy.engine.Engine [cached since 27.45s ago] (3, 50, 0)
2025-12-12 15:34:46,764 - sqlalchemy.engine.Engine - INFO - [cached since 27.45s ago] (3, 50, 0)
2025-12-12 15:34:46,767 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:46,767 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:34:46,827 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:46,827 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:33946 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33922 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33922 - "OPTIONS /api/v1/chat/sessions/1 HTTP/1.1" 200 OK
2025-12-12 15:34:47,020 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:47,020 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:47,021 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:47,021 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:34:47,021 INFO sqlalchemy.engine.Engine [cached since 31.32s ago] (3,)
2025-12-12 15:34:47,021 - sqlalchemy.engine.Engine - INFO - [cached since 31.32s ago] (3,)
2025-12-12 15:34:47,145 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:47,145 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:34:47,146 INFO sqlalchemy.engine.Engine [cached since 31.19s ago] (3, 100, 0)
2025-12-12 15:34:47,146 - sqlalchemy.engine.Engine - INFO - [cached since 31.19s ago] (3, 100, 0)
2025-12-12 15:34:47,209 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:47,209 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:34:47,233 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:47,233 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:47,234 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:47,234 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:34:47,234 INFO sqlalchemy.engine.Engine [cached since 32.63s ago] (3,)
2025-12-12 15:34:47,234 - sqlalchemy.engine.Engine - INFO - [cached since 32.63s ago] (3,)
INFO:     127.0.0.1:33946 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:34:47,417 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:34:47,417 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:34:47,661 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:34:47,661 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:34:47,663 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:34:47,663 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:34:47,663 INFO sqlalchemy.engine.Engine [generated in 0.00032s] (1, 3)
2025-12-12 15:34:47,663 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] (1, 3)
2025-12-12 15:34:47,791 INFO sqlalchemy.engine.Engine SELECT chat_messages.session_id AS chat_messages_session_id, chat_messages.id AS chat_messages_id, chat_messages.role AS chat_messages_role, chat_messages.content AS chat_messages_content, chat_messages.sources AS chat_messages_sources, chat_messages.feedback AS chat_messages_feedback, chat_messages.feedback_text AS chat_messages_feedback_text, chat_messages.generation_time_ms AS chat_messages_generation_time_ms, chat_messages.tokens_used AS chat_messages_tokens_used, chat_messages.model_used AS chat_messages_model_used, chat_messages.created_at AS chat_messages_created_at 
FROM chat_messages 
WHERE chat_messages.session_id IN ($1::INTEGER) ORDER BY chat_messages.created_at
2025-12-12 15:34:47,791 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.session_id AS chat_messages_session_id, chat_messages.id AS chat_messages_id, chat_messages.role AS chat_messages_role, chat_messages.content AS chat_messages_content, chat_messages.sources AS chat_messages_sources, chat_messages.feedback AS chat_messages_feedback, chat_messages.feedback_text AS chat_messages_feedback_text, chat_messages.generation_time_ms AS chat_messages_generation_time_ms, chat_messages.tokens_used AS chat_messages_tokens_used, chat_messages.model_used AS chat_messages_model_used, chat_messages.created_at AS chat_messages_created_at 
FROM chat_messages 
WHERE chat_messages.session_id IN ($1::INTEGER) ORDER BY chat_messages.created_at
2025-12-12 15:34:47,791 INFO sqlalchemy.engine.Engine [generated in 0.00087s] (1,)
2025-12-12 15:34:47,791 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] (1,)
2025-12-12 15:34:47,923 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:34:47,923 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:52704 - "GET /api/v1/chat/sessions/1 HTTP/1.1" 200 OK
2025-12-12 15:35:12,316 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:35:12,316 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:35:12,317 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:35:12,317 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:35:12,317 INFO sqlalchemy.engine.Engine [cached since 57.72s ago] (3,)
2025-12-12 15:35:12,317 - sqlalchemy.engine.Engine - INFO - [cached since 57.72s ago] (3,)
2025-12-12 15:35:12,444 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:35:12,444 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:35:12,688 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:35:12,688 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:35:12,690 INFO sqlalchemy.engine.Engine INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 15:35:12,690 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 15:35:12,690 INFO sqlalchemy.engine.Engine [cached since 52.68s ago] (3, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 15:35:12,690 - sqlalchemy.engine.Engine - INFO - [cached since 52.68s ago] (3, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 15:35:12,875 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:35:12,875 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:35:12,875 INFO sqlalchemy.engine.Engine [cached since 52.67s ago] (2,)
2025-12-12 15:35:12,875 - sqlalchemy.engine.Engine - INFO - [cached since 52.67s ago] (2,)
2025-12-12 15:35:12,998 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:35:12,998 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:38758 - "POST /api/v1/chat/sessions HTTP/1.1" 201 Created
INFO:     127.0.0.1:38758 - "OPTIONS /api/v1/chat/sessions/2 HTTP/1.1" 200 OK
2025-12-12 15:35:13,259 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:35:13,259 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:35:13,260 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:35:13,260 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:35:13,260 INFO sqlalchemy.engine.Engine [cached since 58.66s ago] (3,)
2025-12-12 15:35:13,260 - sqlalchemy.engine.Engine - INFO - [cached since 58.66s ago] (3,)
2025-12-12 15:35:13,274 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:35:13,274 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:35:13,275 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:35:13,275 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:35:13,275 INFO sqlalchemy.engine.Engine [cached since 58.67s ago] (3,)
2025-12-12 15:35:13,275 - sqlalchemy.engine.Engine - INFO - [cached since 58.67s ago] (3,)
2025-12-12 15:35:13,382 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:35:13,382 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:35:13,399 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:35:13,399 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:35:13,627 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:35:13,627 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:35:13,628 INFO sqlalchemy.engine.Engine INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 15:35:13,628 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 15:35:13,629 INFO sqlalchemy.engine.Engine [cached since 53.62s ago] (3, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 15:35:13,629 - sqlalchemy.engine.Engine - INFO - [cached since 53.62s ago] (3, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 15:35:13,644 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:35:13,644 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:35:13,645 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:35:13,645 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:35:13,645 INFO sqlalchemy.engine.Engine [cached since 25.98s ago] (2, 3)
2025-12-12 15:35:13,645 - sqlalchemy.engine.Engine - INFO - [cached since 25.98s ago] (2, 3)
2025-12-12 15:35:13,751 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:35:13,751 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:35:13,752 INFO sqlalchemy.engine.Engine [cached since 53.55s ago] (3,)
2025-12-12 15:35:13,752 - sqlalchemy.engine.Engine - INFO - [cached since 53.55s ago] (3,)
2025-12-12 15:35:13,769 INFO sqlalchemy.engine.Engine SELECT chat_messages.session_id AS chat_messages_session_id, chat_messages.id AS chat_messages_id, chat_messages.role AS chat_messages_role, chat_messages.content AS chat_messages_content, chat_messages.sources AS chat_messages_sources, chat_messages.feedback AS chat_messages_feedback, chat_messages.feedback_text AS chat_messages_feedback_text, chat_messages.generation_time_ms AS chat_messages_generation_time_ms, chat_messages.tokens_used AS chat_messages_tokens_used, chat_messages.model_used AS chat_messages_model_used, chat_messages.created_at AS chat_messages_created_at 
FROM chat_messages 
WHERE chat_messages.session_id IN ($1::INTEGER) ORDER BY chat_messages.created_at
2025-12-12 15:35:13,769 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.session_id AS chat_messages_session_id, chat_messages.id AS chat_messages_id, chat_messages.role AS chat_messages_role, chat_messages.content AS chat_messages_content, chat_messages.sources AS chat_messages_sources, chat_messages.feedback AS chat_messages_feedback, chat_messages.feedback_text AS chat_messages_feedback_text, chat_messages.generation_time_ms AS chat_messages_generation_time_ms, chat_messages.tokens_used AS chat_messages_tokens_used, chat_messages.model_used AS chat_messages_model_used, chat_messages.created_at AS chat_messages_created_at 
FROM chat_messages 
WHERE chat_messages.session_id IN ($1::INTEGER) ORDER BY chat_messages.created_at
2025-12-12 15:35:13,770 INFO sqlalchemy.engine.Engine [cached since 25.98s ago] (2,)
2025-12-12 15:35:13,770 - sqlalchemy.engine.Engine - INFO - [cached since 25.98s ago] (2,)
2025-12-12 15:35:13,814 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:35:13,814 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:35:13,832 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:35:13,832 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:45806 - "POST /api/v1/chat/sessions HTTP/1.1" 201 Created
INFO:     127.0.0.1:45820 - "GET /api/v1/chat/sessions/2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33118 - "OPTIONS /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33132 - "OPTIONS /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:37:40,219 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:37:40,219 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:37:40,219 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:37:40,219 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:37:40,220 INFO sqlalchemy.engine.Engine [cached since 205.6s ago] (3,)
2025-12-12 15:37:40,220 - sqlalchemy.engine.Engine - INFO - [cached since 205.6s ago] (3,)
2025-12-12 15:37:40,345 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:37:40,345 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:37:40,590 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:37:40,590 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:37:40,591 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:37:40,591 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:37:40,591 INFO sqlalchemy.engine.Engine [cached since 202.4s ago] (3,)
2025-12-12 15:37:40,591 - sqlalchemy.engine.Engine - INFO - [cached since 202.4s ago] (3,)
2025-12-12 15:37:40,774 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:37:40,774 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:37:40,774 INFO sqlalchemy.engine.Engine [cached since 201.5s ago] (3, 50, 0)
2025-12-12 15:37:40,774 - sqlalchemy.engine.Engine - INFO - [cached since 201.5s ago] (3, 50, 0)
2025-12-12 15:37:40,900 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:37:40,900 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:33142 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:37:41,153 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:37:41,153 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:37:41,153 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:37:41,153 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:37:41,153 INFO sqlalchemy.engine.Engine [cached since 206.6s ago] (3,)
2025-12-12 15:37:41,153 - sqlalchemy.engine.Engine - INFO - [cached since 206.6s ago] (3,)
2025-12-12 15:37:41,276 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:37:41,276 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:37:41,524 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:37:41,524 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:37:41,524 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:37:41,524 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:37:41,524 INFO sqlalchemy.engine.Engine [cached since 203.3s ago] (3,)
2025-12-12 15:37:41,524 - sqlalchemy.engine.Engine - INFO - [cached since 203.3s ago] (3,)
2025-12-12 15:37:41,713 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:37:41,713 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:37:41,715 INFO sqlalchemy.engine.Engine [cached since 202.4s ago] (3, 50, 0)
2025-12-12 15:37:41,715 - sqlalchemy.engine.Engine - INFO - [cached since 202.4s ago] (3, 50, 0)
2025-12-12 15:37:42,016 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:37:42,016 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:33142 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:37:43,247 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:37:43,247 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:37:43,247 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:37:43,247 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:37:43,247 INFO sqlalchemy.engine.Engine [cached since 208.6s ago] (3,)
2025-12-12 15:37:43,247 - sqlalchemy.engine.Engine - INFO - [cached since 208.6s ago] (3,)
2025-12-12 15:37:43,368 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:37:43,368 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:37:43,623 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:37:43,623 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:37:43,623 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:37:43,623 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:37:43,624 INFO sqlalchemy.engine.Engine [cached since 205.4s ago] (3,)
2025-12-12 15:37:43,624 - sqlalchemy.engine.Engine - INFO - [cached since 205.4s ago] (3,)
2025-12-12 15:37:43,750 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:37:43,750 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:37:43,750 INFO sqlalchemy.engine.Engine [cached since 204.4s ago] (3, 50, 0)
2025-12-12 15:37:43,750 - sqlalchemy.engine.Engine - INFO - [cached since 204.4s ago] (3, 50, 0)
2025-12-12 15:37:43,813 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:37:43,813 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:33142 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:37:44,065 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:37:44,065 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:37:44,065 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:37:44,065 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:37:44,065 INFO sqlalchemy.engine.Engine [cached since 209.5s ago] (3,)
2025-12-12 15:37:44,065 - sqlalchemy.engine.Engine - INFO - [cached since 209.5s ago] (3,)
2025-12-12 15:37:44,195 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:37:44,195 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:37:44,445 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:37:44,445 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:37:44,445 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:37:44,445 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:37:44,445 INFO sqlalchemy.engine.Engine [cached since 206.3s ago] (3,)
2025-12-12 15:37:44,445 - sqlalchemy.engine.Engine - INFO - [cached since 206.3s ago] (3,)
2025-12-12 15:37:44,574 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:37:44,574 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:37:44,574 INFO sqlalchemy.engine.Engine [cached since 205.3s ago] (3, 50, 0)
2025-12-12 15:37:44,574 - sqlalchemy.engine.Engine - INFO - [cached since 205.3s ago] (3, 50, 0)
2025-12-12 15:37:44,635 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:37:44,635 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:33142 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:37:46,164 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:37:46,164 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:37:46,165 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:37:46,165 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:37:46,165 INFO sqlalchemy.engine.Engine [cached since 211.6s ago] (3,)
2025-12-12 15:37:46,165 - sqlalchemy.engine.Engine - INFO - [cached since 211.6s ago] (3,)
2025-12-12 15:37:46,288 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:37:46,288 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:37:46,535 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:37:46,535 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:37:46,536 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:37:46,536 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:37:46,536 INFO sqlalchemy.engine.Engine [cached since 208.3s ago] (3,)
2025-12-12 15:37:46,536 - sqlalchemy.engine.Engine - INFO - [cached since 208.3s ago] (3,)
2025-12-12 15:37:46,667 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:37:46,667 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:37:46,667 INFO sqlalchemy.engine.Engine [cached since 207.4s ago] (3, 50, 0)
2025-12-12 15:37:46,667 - sqlalchemy.engine.Engine - INFO - [cached since 207.4s ago] (3, 50, 0)
2025-12-12 15:37:46,747 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:37:46,747 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:33142 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:37:47,045 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:37:47,045 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:37:47,046 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:37:47,046 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:37:47,046 INFO sqlalchemy.engine.Engine [cached since 212.4s ago] (3,)
2025-12-12 15:37:47,046 - sqlalchemy.engine.Engine - INFO - [cached since 212.4s ago] (3,)
2025-12-12 15:37:47,168 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:37:47,168 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:37:47,416 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:37:47,416 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:37:47,417 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:37:47,417 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:37:47,417 INFO sqlalchemy.engine.Engine [cached since 209.2s ago] (3,)
2025-12-12 15:37:47,417 - sqlalchemy.engine.Engine - INFO - [cached since 209.2s ago] (3,)
2025-12-12 15:37:47,540 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:37:47,540 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:37:47,540 INFO sqlalchemy.engine.Engine [cached since 208.2s ago] (3, 50, 0)
2025-12-12 15:37:47,540 - sqlalchemy.engine.Engine - INFO - [cached since 208.2s ago] (3, 50, 0)
2025-12-12 15:37:47,604 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:37:47,604 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:33142 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
INFO:     127.0.0.1:37726 - "OPTIONS /api/v1/users/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:37730 - "OPTIONS /api/v1/users/me HTTP/1.1" 200 OK
2025-12-12 15:39:13,959 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:39:13,959 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:39:13,960 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:39:13,960 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:39:13,960 INFO sqlalchemy.engine.Engine [cached since 299.4s ago] (3,)
2025-12-12 15:39:13,960 - sqlalchemy.engine.Engine - INFO - [cached since 299.4s ago] (3,)
2025-12-12 15:39:14,083 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:39:14,083 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37738 - "GET /api/v1/users/me HTTP/1.1" 200 OK
2025-12-12 15:39:14,329 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:39:14,329 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:39:14,330 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:39:14,330 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:39:14,330 INFO sqlalchemy.engine.Engine [cached since 299.7s ago] (3,)
2025-12-12 15:39:14,330 - sqlalchemy.engine.Engine - INFO - [cached since 299.7s ago] (3,)
2025-12-12 15:39:14,465 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:39:14,465 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37738 - "GET /api/v1/users/me HTTP/1.1" 200 OK
2025-12-12 15:40:20,228 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:40:20,228 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:40:20,228 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:40:20,228 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:40:20,228 INFO sqlalchemy.engine.Engine [cached since 365.6s ago] (3,)
2025-12-12 15:40:20,228 - sqlalchemy.engine.Engine - INFO - [cached since 365.6s ago] (3,)
2025-12-12 15:40:20,349 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:40:20,349 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:42284 - "GET /api/v1/users/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:42312 - "OPTIONS /api/v1/documents?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:42328 - "OPTIONS /api/v1/documents?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:42336 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:42336 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:42312 - "OPTIONS /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:40:20,661 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:40:20,661 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:40:20,661 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:40:20,661 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:40:20,661 INFO sqlalchemy.engine.Engine [cached since 365s ago] (3,)
2025-12-12 15:40:20,661 - sqlalchemy.engine.Engine - INFO - [cached since 365s ago] (3,)
2025-12-12 15:40:20,786 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:40:20,786 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:40:20,787 INFO sqlalchemy.engine.Engine [cached since 364.8s ago] (3, 100, 0)
2025-12-12 15:40:20,787 - sqlalchemy.engine.Engine - INFO - [cached since 364.8s ago] (3, 100, 0)
2025-12-12 15:40:20,848 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:40:20,848 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:42336 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:40:20,917 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:40:20,917 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:40:20,917 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:40:20,917 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:40:20,918 INFO sqlalchemy.engine.Engine [cached since 366.3s ago] (3,)
2025-12-12 15:40:20,918 - sqlalchemy.engine.Engine - INFO - [cached since 366.3s ago] (3,)
2025-12-12 15:40:20,948 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:40:20,948 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:40:20,949 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:40:20,949 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:40:20,949 INFO sqlalchemy.engine.Engine [cached since 366.3s ago] (3,)
2025-12-12 15:40:20,949 - sqlalchemy.engine.Engine - INFO - [cached since 366.3s ago] (3,)
2025-12-12 15:40:21,040 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:40:21,040 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:40:21,070 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:40:21,070 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:40:21,095 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:40:21,095 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:40:21,095 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:40:21,095 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:40:21,095 INFO sqlalchemy.engine.Engine [cached since 365.4s ago] (3,)
2025-12-12 15:40:21,095 - sqlalchemy.engine.Engine - INFO - [cached since 365.4s ago] (3,)
INFO:     127.0.0.1:42284 - "GET /api/v1/users/me HTTP/1.1" 200 OK
2025-12-12 15:40:21,217 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:40:21,217 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:40:21,217 INFO sqlalchemy.engine.Engine [cached since 365.3s ago] (3, 100, 0)
2025-12-12 15:40:21,217 - sqlalchemy.engine.Engine - INFO - [cached since 365.3s ago] (3, 100, 0)
2025-12-12 15:40:21,278 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:40:21,278 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:40:21,314 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:40:21,314 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:40:21,314 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:40:21,314 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:40:21,314 INFO sqlalchemy.engine.Engine [cached since 363.1s ago] (3,)
2025-12-12 15:40:21,314 - sqlalchemy.engine.Engine - INFO - [cached since 363.1s ago] (3,)
INFO:     127.0.0.1:42336 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:40:21,438 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:40:21,438 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:40:21,438 INFO sqlalchemy.engine.Engine [cached since 362.1s ago] (3, 50, 0)
2025-12-12 15:40:21,438 - sqlalchemy.engine.Engine - INFO - [cached since 362.1s ago] (3, 50, 0)
2025-12-12 15:40:21,500 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:40:21,500 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:42296 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:40:21,746 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:40:21,746 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:40:21,746 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:40:21,746 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:40:21,746 INFO sqlalchemy.engine.Engine [cached since 367.1s ago] (3,)
2025-12-12 15:40:21,746 - sqlalchemy.engine.Engine - INFO - [cached since 367.1s ago] (3,)
2025-12-12 15:40:21,870 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:40:21,870 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:40:22,117 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:40:22,117 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:40:22,120 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:40:22,120 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:40:22,123 INFO sqlalchemy.engine.Engine [cached since 363.9s ago] (3,)
2025-12-12 15:40:22,123 - sqlalchemy.engine.Engine - INFO - [cached since 363.9s ago] (3,)
2025-12-12 15:40:22,253 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:40:22,253 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:40:22,254 INFO sqlalchemy.engine.Engine [cached since 362.9s ago] (3, 50, 0)
2025-12-12 15:40:22,254 - sqlalchemy.engine.Engine - INFO - [cached since 362.9s ago] (3, 50, 0)
2025-12-12 15:40:22,316 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:40:22,316 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:42296 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55362 - "OPTIONS /api/v1/chat/sessions HTTP/1.1" 200 OK
2025-12-12 15:40:48,398 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:40:48,398 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:40:48,399 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:40:48,399 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:40:48,399 INFO sqlalchemy.engine.Engine [cached since 393.8s ago] (3,)
2025-12-12 15:40:48,399 - sqlalchemy.engine.Engine - INFO - [cached since 393.8s ago] (3,)
2025-12-12 15:40:48,578 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:40:48,578 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:40:48,823 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:40:48,823 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:40:48,824 INFO sqlalchemy.engine.Engine INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 15:40:48,824 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 15:40:48,824 INFO sqlalchemy.engine.Engine [cached since 388.8s ago] (3, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 15:40:48,824 - sqlalchemy.engine.Engine - INFO - [cached since 388.8s ago] (3, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 15:40:48,951 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:40:48,951 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:40:48,952 INFO sqlalchemy.engine.Engine [cached since 388.7s ago] (4,)
2025-12-12 15:40:48,952 - sqlalchemy.engine.Engine - INFO - [cached since 388.7s ago] (4,)
2025-12-12 15:40:49,014 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:40:49,014 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:55372 - "POST /api/v1/chat/sessions HTTP/1.1" 201 Created
INFO:     127.0.0.1:55372 - "OPTIONS /api/v1/chat/sessions/4/messages HTTP/1.1" 200 OK
2025-12-12 15:40:49,276 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:40:49,276 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:40:49,276 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:40:49,276 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:40:49,277 INFO sqlalchemy.engine.Engine [cached since 394.7s ago] (3,)
2025-12-12 15:40:49,277 - sqlalchemy.engine.Engine - INFO - [cached since 394.7s ago] (3,)
2025-12-12 15:40:49,399 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:40:49,399 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:40:49,646 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:40:49,646 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:40:49,647 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:40:49,647 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:40:49,647 INFO sqlalchemy.engine.Engine [cached since 388.7s ago] (4, 3)
2025-12-12 15:40:49,647 - sqlalchemy.engine.Engine - INFO - [cached since 388.7s ago] (4, 3)
2025-12-12 15:40:49,840 INFO sqlalchemy.engine.Engine INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:40:49,840 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:40:49,840 INFO sqlalchemy.engine.Engine [cached since 388.7s ago] (4, 'user', 'Summarize the key findings in my documents', 'null', None, None, None, None, None)
2025-12-12 15:40:49,840 - sqlalchemy.engine.Engine - INFO - [cached since 388.7s ago] (4, 'user', 'Summarize the key findings in my documents', 'null', None, None, None, None, None)
2025-12-12 15:40:50,017 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:40:50,017 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:40:50,018 INFO sqlalchemy.engine.Engine [cached since 388.7s ago] (1, datetime.datetime(2025, 12, 12, 10, 10, 49, 838927), datetime.datetime(2025, 12, 12, 10, 10, 49, 838918), 4)
2025-12-12 15:40:50,018 - sqlalchemy.engine.Engine - INFO - [cached since 388.7s ago] (1, datetime.datetime(2025, 12, 12, 10, 10, 49, 838927), datetime.datetime(2025, 12, 12, 10, 10, 49, 838918), 4)
2025-12-12 15:40:50,144 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:40:50,144 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:40:50,145 INFO sqlalchemy.engine.Engine [cached since 388.7s ago] (3,)
2025-12-12 15:40:50,145 - sqlalchemy.engine.Engine - INFO - [cached since 388.7s ago] (3,)
2025-12-12 15:40:50,271 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET title=$1::VARCHAR, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:40:50,271 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET title=$1::VARCHAR, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:40:50,271 INFO sqlalchemy.engine.Engine [cached since 388.7s ago] ('Summarize the key findings in my documents', 4)
2025-12-12 15:40:50,271 - sqlalchemy.engine.Engine - INFO - [cached since 388.7s ago] ('Summarize the key findings in my documents', 4)
2025-12-12 15:40:50,410 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:40:50,410 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:40:50,411 INFO sqlalchemy.engine.Engine [cached since 389.4s ago] (4, 3)
2025-12-12 15:40:50,411 - sqlalchemy.engine.Engine - INFO - [cached since 389.4s ago] (4, 3)
2025-12-12 15:40:50,510 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.session_id = $1::INTEGER ORDER BY chat_messages.created_at 
 LIMIT $2::INTEGER
2025-12-12 15:40:50,510 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.session_id = $1::INTEGER ORDER BY chat_messages.created_at 
 LIMIT $2::INTEGER
2025-12-12 15:40:50,511 INFO sqlalchemy.engine.Engine [cached since 388.8s ago] (4, 10)
2025-12-12 15:40:50,511 - sqlalchemy.engine.Engine - INFO - [cached since 388.8s ago] (4, 10)
2025-12-12 15:40:56,777 - app.services.weaviate_service - INFO - Found 5 results for query: Summarize the key findings in my documents...
2025-12-12 15:40:56,778 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-e2796f09-6bc7-41a5-bdea-26e9c9a54e4b', 'json_data': {'messages': [{'role': 'user', 'content': "You are DocQuery AI, an intelligent document assistant. Your task is to answer questions based on the provided document context.\n\nGuidelines:\n1. Answer based ONLY on the information provided in the context\n2. If the context doesn't contain relevant information, clearly state that\n3. Cite the source documents when providing information\n4. Be concise but comprehensive\n5. If multiple sources provide relevant information, synthesize them\n6. Use a professional and helpful tone\n\n## Document Context:\n[Source 1: Dipesh_Paul_Resume.pdf] (Page 1)\nIndore (Senior Machine Learning Engineer) Dec 2023 - Present Designed and implemented distributed finetuning workflows using QLoRA, reducing training time by ~30% and cutting training costs by ~20%. Built multi-agent orchestration using OpenAI Agent SDK + PydanticAI for real-time task routing, improving routing accuracy and reducing manual triage effort by 40%. Collaborated with cross-functional teams (product, infra) to productionize LLM features with FastAPI and Docker, ensuring low-latency, high-availability deployments.Tensorflow Keras Pytorch Scikit Learn Transformers Ollama OpenCV Spacy RAGPydanticAI Langchain NLP SFT, RLHF, Peft etc. Docker MCP & Tools Function Calling Embeddings Prompt EngineeringJira Git Agent Frameworks Kafka Team Lead Client Handling Innovation Adoption Research Translation Architecture Designing Feb 2023 - July 2023Zdaly, Indore (Senior Machine Learning Engineer) Built an LLM-powered product catalog analyzer that improved lookup accuracy by 45%.\n\n---\n\n[Source 2: Dipesh_Paul_Resume.pdf] (Page 1)\nResearch Translation Architecture Designing Feb 2023 - July 2023Zdaly, Indore (Senior Machine Learning Engineer) Built an LLM-powered product catalog analyzer that improved lookup accuracy by 45%. Designed a vector-based similarity search pipeline using Weaviate for real-time customer recommendations. Migrated legacy NLP models to transformer-based architectures, reducing latency by 50%. Jan 2022  Jan 2023GsLab, Pune (Machine Learning Engineer) Developed a ticket classification model using ULMFit + FastAI that improved routing accuracy by 38%. Automated price prediction system using TensorFlow & Scrapy, processing 100k+ product datapoints. Optimized inference pipeline with Dockerized microservices, cutting server cost by 25%. Aug 2019  Jan 2022Calsoft, Pune (Machine Learning Engineer) Built an avatar generator using GANs (DCGAN, StyleGAN) trained on 143k+ images. Implemented virtualization automation PaaS platform using TensorFlow.\n\n---\n\n[Source 3: Dipesh_Paul_Resume.pdf] (Page 1)\nJan 2022Calsoft, Pune (Machine Learning Engineer) Built an avatar generator using GANs (DCGAN, StyleGAN) trained on 143k+ images. Implemented virtualization automation PaaS platform using TensorFlow. Reduced VM provisioning time by 27% Developed ML pipelines for anomaly detection & forecasting using Scikit-Learn + Kafka. Jan 2019  Jul 2019Calsoft, Pune (Machine Learning Engineer Intern) Created internal POCs in image classification, OCR, and NLP. Built early prototypes of ticket analyzer using traditional NLP + Python. Contributed to optimizing CNN models, improving accuracy by 12%. Senior Machine Learning Engineer | GenAI & LLM Specialist KEY PROJECTS AWARDS Rising Star, 2020, Calsoft Pvt. Ltd. Outstanding Innovator, 2022, Calsoft Pvt. Ltd. Praise, 2024, SystangoMulti-Agent Procurement Platform Built a Multi-Agent platform to streamline procurement, featuring LLM-powered chatbot portals for support, order analysis, and data visualization.\n\n---\n\n[Source 4: Dipesh_Paul_Resume.pdf] (Page 1)\nDIPESH PAUL Indore, MP, 452016 | +91 896 277 5625 dipeshpal17@gmail.com | www.dipeshpal.in PROFESSIONAL SUMMARY Senior Machine Learning Engineer (7 years) specializing in GenAI, LLMs, multi-agent systems, RAG, and model finetuning. Experienced with OpenAI, DeepSeek, Llama, Mistral, QLoRA, PEFT, distributed training, and vector databases (Weaviate, Pinecone, Qdrant). Built and deployed production-grade ML, DL, and LLM systems using FastAPI, Docker, and cloud services, delivering scalable, low-latency AI solutions in enterprise environments. GenAI Machine Learning Deep Learning LLM OpenAI, DeepSeek, Llama, Mistral etc. LLM Finetuning OpenAI Agent SDK LlamaIndex Pinecone, Qdrant, WeaviateSKILLS EXPERIENCE Systango, Indore (Senior Machine Learning Engineer) Dec 2023 - Present Designed and implemented distributed finetuning workflows using QLoRA, reducing training time by ~30% and cutting training costs by ~20%.\n\n---\n\n[Source 5: Dipesh_Paul_Resume.pdf] (Page 1)\nAutomated ticketing processes using advanced machine learning techniques. Utilized NLP and Wikipedia-trained ULMfit Fastai models to analyze tickets and intelligently determine appropriate assignees. Python, Kafka, Docker, FastAPI, AI/ML, Fastai Avatar Generator Built an avatar generation system for portfolio faces, trained on a dataset of approximately 143,000 human and cartoon images. Implemented various neural network architectures, including Deep Convolutional GANs (Style GAN), CNN, and UNet. Python, AI/ML, Tensorflow, OpenCV, DZoneADDITIONAL PROJECTS CERTIFICATIONS Machine Learning: Stanford University (96.47%) Introduction to TensorFlow for Artificial Intelligence, Machine Learning, and Deep Learning: Coursera (99.28%) Supervised Machine Learning (Regression and Classification): DeepLearning.AI, Stanford University (100%) Python Data Structures: University of Michigan (98.40%) RGPV University Bachelor of Engineering in Computer Science, 2019 Acropolis Institute of Tech.\n\n## User Question:\nSummarize the key findings in my documents\n\n## Your Response:"}], 'model': 'llama-3.3-70b-versatile', 'max_tokens': 1024, 'temperature': 0.7}}
2025-12-12 15:40:56,779 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-12-12 15:40:57,956 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Fri, 12 Dec 2025 10:10:57 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'server': 'cloudflare', 'vary': 'Origin', 'x-groq-region': 'bom', 'x-ratelimit-limit-requests': '1000', 'x-ratelimit-limit-tokens': '12000', 'x-ratelimit-remaining-requests': '999', 'x-ratelimit-remaining-tokens': '10686', 'x-ratelimit-reset-requests': '1m26.4s', 'x-ratelimit-reset-tokens': '6.57s', 'x-request-id': 'req_01kc90nkpqe9rreydy7105c1r0', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=74XjtxIWaO1VmPj5Jw0nU20U4jCZRoE..RvxnYyCLKo-1765534256.8228512-1.0.1.1-2ViEK3f.aGY7KFyBr8X6jEQvtZ5e7uzv1HC8_Od865g5fyc337sJIp.7tUThVekFcDtA3dISFe73AzUzsOweoj3o7QUINNcJ.D63D4GuU86lMyUr_0dXBSKXcYbDAQXd; HttpOnly; Secure; Path=/; Domain=groq.com; Expires=Fri, 12 Dec 2025 10:40:57 GMT', 'strict-transport-security': 'max-age=2592000', 'content-encoding': 'gzip', 'cf-ray': '9acc6f5128960bc3-BOM', 'alt-svc': 'h3=":443"; ma=86400'})
2025-12-12 15:40:57,960 INFO sqlalchemy.engine.Engine INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:40:57,960 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:40:57,960 INFO sqlalchemy.engine.Engine [cached since 396.8s ago] (4, 'assistant', 'Based on the provided document context, the key findings can be summarized as follows:\n\n1. **Professional Experience**: The individual, Dipesh Paul ... (1411 characters truncated) ... raise (2024) [Source 3].\n\nThese findings are based on the information provided in the document context, specifically from [Source 1] to [Source 5].', '[{"document_id": 10, "document_name": "Dipesh_Paul_Resume.pdf", "chunk_id": 1, "content": "Indore (Senior Machine Learning Engineer) Dec 2023 - Prese ... (1941 characters truncated) ... Kafka, Docker, FastAPI, AI/ML, Fastai Avatar Generator Built an avatar generation system for...", "relevance_score": 0.10932672023773193, "page": 1}]', None, None, 7322, None, 'llama-3.3-70b-versatile')
2025-12-12 15:40:57,960 - sqlalchemy.engine.Engine - INFO - [cached since 396.8s ago] (4, 'assistant', 'Based on the provided document context, the key findings can be summarized as follows:\n\n1. **Professional Experience**: The individual, Dipesh Paul ... (1411 characters truncated) ... raise (2024) [Source 3].\n\nThese findings are based on the information provided in the document context, specifically from [Source 1] to [Source 5].', '[{"document_id": 10, "document_name": "Dipesh_Paul_Resume.pdf", "chunk_id": 1, "content": "Indore (Senior Machine Learning Engineer) Dec 2023 - Prese ... (1941 characters truncated) ... Kafka, Docker, FastAPI, AI/ML, Fastai Avatar Generator Built an avatar generation system for...", "relevance_score": 0.10932672023773193, "page": 1}]', None, None, 7322, None, 'llama-3.3-70b-versatile')
2025-12-12 15:40:58,039 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:40:58,039 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:40:58,040 INFO sqlalchemy.engine.Engine [cached since 396.8s ago] (1, datetime.datetime(2025, 12, 12, 10, 10, 57, 958848), datetime.datetime(2025, 12, 12, 10, 10, 57, 958840), 4)
2025-12-12 15:40:58,040 - sqlalchemy.engine.Engine - INFO - [cached since 396.8s ago] (1, datetime.datetime(2025, 12, 12, 10, 10, 57, 958848), datetime.datetime(2025, 12, 12, 10, 10, 57, 958840), 4)
2025-12-12 15:40:58,112 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:40:58,112 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:40:58,112 INFO sqlalchemy.engine.Engine [cached since 396.7s ago] (4,)
2025-12-12 15:40:58,112 - sqlalchemy.engine.Engine - INFO - [cached since 396.7s ago] (4,)
2025-12-12 15:40:58,193 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:40:58,193 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:40:58,193 INFO sqlalchemy.engine.Engine [cached since 397.2s ago] (4, 3)
2025-12-12 15:40:58,193 - sqlalchemy.engine.Engine - INFO - [cached since 397.2s ago] (4, 3)
2025-12-12 15:40:58,271 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:40:58,271 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:55362 - "POST /api/v1/chat/sessions/4/messages HTTP/1.1" 200 OK
INFO:     127.0.0.1:48954 - "OPTIONS /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48970 - "OPTIONS /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48974 - "OPTIONS /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48984 - "OPTIONS /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 15:41:16,602 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:16,602 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:16,603 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:16,603 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:16,603 INFO sqlalchemy.engine.Engine [cached since 422s ago] (3,)
2025-12-12 15:41:16,603 - sqlalchemy.engine.Engine - INFO - [cached since 422s ago] (3,)
2025-12-12 15:41:16,606 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:16,606 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:16,607 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:16,607 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:16,607 INFO sqlalchemy.engine.Engine [cached since 422s ago] (3,)
2025-12-12 15:41:16,607 - sqlalchemy.engine.Engine - INFO - [cached since 422s ago] (3,)
2025-12-12 15:41:16,727 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:41:16,727 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:41:16,730 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:41:16,730 - sqlalchemy.engine.Engine - INFO - ROLLBACK
/home/ubox133/projects/DocQuery AI/backend/app/services/analytics_service.py:27: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  since_date = datetime.utcnow() - timedelta(days=days)
/home/ubox133/projects/DocQuery AI/backend/app/services/analytics_service.py:100: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  since_date = datetime.utcnow() - timedelta(days=days)
2025-12-12 15:41:16,975 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:16,975 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:16,982 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:16,982 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:16,982 INFO sqlalchemy.engine.Engine [generated in 0.00052s] (3, datetime.datetime(2025, 11, 12, 10, 11, 16, 790346))
2025-12-12 15:41:16,982 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] (3, datetime.datetime(2025, 11, 12, 10, 11, 16, 790346))
2025-12-12 15:41:16,987 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:16,987 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:16,988 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:41:16,988 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:41:16,988 INFO sqlalchemy.engine.Engine [generated in 0.00020s] (3, datetime.datetime(2025, 11, 12, 10, 11, 16, 798649))
2025-12-12 15:41:16,988 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (3, datetime.datetime(2025, 11, 12, 10, 11, 16, 798649))
2025-12-12 15:41:17,178 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:41:17,178 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:41:17,181 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:17,181 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:17,181 INFO sqlalchemy.engine.Engine [generated in 0.00027s] (3, datetime.datetime(2025, 11, 12, 10, 11, 16, 790346))
2025-12-12 15:41:17,181 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] (3, datetime.datetime(2025, 11, 12, 10, 11, 16, 790346))
INFO:     127.0.0.1:48954 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 15:41:17,307 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:17,307 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:17,307 INFO sqlalchemy.engine.Engine [generated in 0.00022s] (3, datetime.datetime(2025, 11, 12, 10, 11, 16, 790346))
2025-12-12 15:41:17,307 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] (3, datetime.datetime(2025, 11, 12, 10, 11, 16, 790346))
2025-12-12 15:41:17,423 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:17,423 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:17,423 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:17,423 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:17,423 INFO sqlalchemy.engine.Engine [cached since 422.8s ago] (3,)
2025-12-12 15:41:17,423 - sqlalchemy.engine.Engine - INFO - [cached since 422.8s ago] (3,)
2025-12-12 15:41:17,433 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:17,433 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:17,433 INFO sqlalchemy.engine.Engine [generated in 0.00021s] (3, datetime.datetime(2025, 11, 12, 10, 11, 16, 790346))
2025-12-12 15:41:17,433 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] (3, datetime.datetime(2025, 11, 12, 10, 11, 16, 790346))
2025-12-12 15:41:17,545 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:41:17,545 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:41:17,558 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:41:17,558 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:48986 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 15:41:17,797 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:17,797 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:17,798 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:41:17,798 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:41:17,798 INFO sqlalchemy.engine.Engine [cached since 0.8099s ago] (3, datetime.datetime(2025, 11, 12, 10, 11, 17, 606906))
2025-12-12 15:41:17,798 - sqlalchemy.engine.Engine - INFO - [cached since 0.8099s ago] (3, datetime.datetime(2025, 11, 12, 10, 11, 17, 606906))
2025-12-12 15:41:17,808 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:17,808 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:17,809 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:17,809 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:17,809 INFO sqlalchemy.engine.Engine [cached since 423.2s ago] (3,)
2025-12-12 15:41:17,809 - sqlalchemy.engine.Engine - INFO - [cached since 423.2s ago] (3,)
2025-12-12 15:41:17,921 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:41:17,921 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:41:17,931 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:41:17,931 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:48954 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 15:41:18,180 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:18,180 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:18,181 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:18,181 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:18,181 INFO sqlalchemy.engine.Engine [cached since 1.199s ago] (3, datetime.datetime(2025, 11, 12, 10, 11, 17, 992280))
2025-12-12 15:41:18,181 - sqlalchemy.engine.Engine - INFO - [cached since 1.199s ago] (3, datetime.datetime(2025, 11, 12, 10, 11, 17, 992280))
2025-12-12 15:41:18,320 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:18,320 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:18,320 INFO sqlalchemy.engine.Engine [cached since 1.139s ago] (3, datetime.datetime(2025, 11, 12, 10, 11, 17, 992280))
2025-12-12 15:41:18,320 - sqlalchemy.engine.Engine - INFO - [cached since 1.139s ago] (3, datetime.datetime(2025, 11, 12, 10, 11, 17, 992280))
2025-12-12 15:41:18,386 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:18,386 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:18,386 INFO sqlalchemy.engine.Engine [cached since 1.08s ago] (3, datetime.datetime(2025, 11, 12, 10, 11, 17, 992280))
2025-12-12 15:41:18,386 - sqlalchemy.engine.Engine - INFO - [cached since 1.08s ago] (3, datetime.datetime(2025, 11, 12, 10, 11, 17, 992280))
2025-12-12 15:41:18,450 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:18,450 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:41:18,451 INFO sqlalchemy.engine.Engine [cached since 1.018s ago] (3, datetime.datetime(2025, 11, 12, 10, 11, 17, 992280))
2025-12-12 15:41:18,451 - sqlalchemy.engine.Engine - INFO - [cached since 1.018s ago] (3, datetime.datetime(2025, 11, 12, 10, 11, 17, 992280))
2025-12-12 15:41:18,514 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:41:18,514 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:48986 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43254 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:43254 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 15:41:31,819 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:31,819 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:31,820 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:31,820 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:31,820 INFO sqlalchemy.engine.Engine [cached since 437.2s ago] (3,)
2025-12-12 15:41:31,820 - sqlalchemy.engine.Engine - INFO - [cached since 437.2s ago] (3,)
2025-12-12 15:41:31,837 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:31,837 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:31,838 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:41:31,838 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:41:31,838 INFO sqlalchemy.engine.Engine [cached since 436.1s ago] (3,)
2025-12-12 15:41:31,838 - sqlalchemy.engine.Engine - INFO - [cached since 436.1s ago] (3,)
2025-12-12 15:41:31,942 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:41:31,942 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:41:31,961 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:41:31,961 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:41:31,961 INFO sqlalchemy.engine.Engine [cached since 436s ago] (3, 100, 0)
2025-12-12 15:41:31,961 - sqlalchemy.engine.Engine - INFO - [cached since 436s ago] (3, 100, 0)
2025-12-12 15:41:32,024 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:41:32,024 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:43254 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:41:32,189 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:32,189 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:32,190 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:41:32,190 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:41:32,190 INFO sqlalchemy.engine.Engine [cached since 434s ago] (3,)
2025-12-12 15:41:32,190 - sqlalchemy.engine.Engine - INFO - [cached since 434s ago] (3,)
2025-12-12 15:41:32,275 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:32,275 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:32,276 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:41:32,276 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:41:32,277 INFO sqlalchemy.engine.Engine [cached since 436.6s ago] (3,)
2025-12-12 15:41:32,277 - sqlalchemy.engine.Engine - INFO - [cached since 436.6s ago] (3,)
2025-12-12 15:41:32,314 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:41:32,314 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:41:32,315 INFO sqlalchemy.engine.Engine [cached since 433s ago] (3, 50, 0)
2025-12-12 15:41:32,315 - sqlalchemy.engine.Engine - INFO - [cached since 433s ago] (3, 50, 0)
2025-12-12 15:41:32,378 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:41:32,378 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:41:32,399 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:41:32,399 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:41:32,400 INFO sqlalchemy.engine.Engine [cached since 436.4s ago] (3, 100, 0)
2025-12-12 15:41:32,400 - sqlalchemy.engine.Engine - INFO - [cached since 436.4s ago] (3, 100, 0)
INFO:     127.0.0.1:43240 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:41:32,461 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:41:32,461 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:43254 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:41:32,624 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:32,624 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:32,625 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:32,625 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:32,625 INFO sqlalchemy.engine.Engine [cached since 438s ago] (3,)
2025-12-12 15:41:32,625 - sqlalchemy.engine.Engine - INFO - [cached since 438s ago] (3,)
2025-12-12 15:41:32,747 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:41:32,747 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:41:32,994 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:32,994 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:32,995 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:41:32,995 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:41:32,995 INFO sqlalchemy.engine.Engine [cached since 434.8s ago] (3,)
2025-12-12 15:41:32,995 - sqlalchemy.engine.Engine - INFO - [cached since 434.8s ago] (3,)
2025-12-12 15:41:33,127 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:41:33,127 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:41:33,128 INFO sqlalchemy.engine.Engine [cached since 433.8s ago] (3, 50, 0)
2025-12-12 15:41:33,128 - sqlalchemy.engine.Engine - INFO - [cached since 433.8s ago] (3, 50, 0)
2025-12-12 15:41:33,196 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:41:33,196 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:43240 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43240 - "OPTIONS /api/v1/chat/sessions/3?permanent=false HTTP/1.1" 200 OK
2025-12-12 15:41:36,674 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:36,674 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:36,675 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:36,675 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:36,675 INFO sqlalchemy.engine.Engine [cached since 442.1s ago] (3,)
2025-12-12 15:41:36,675 - sqlalchemy.engine.Engine - INFO - [cached since 442.1s ago] (3,)
2025-12-12 15:41:36,797 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:41:36,797 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:41:37,040 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:37,040 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:37,041 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:41:37,041 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:41:37,041 INFO sqlalchemy.engine.Engine [cached since 436.1s ago] (3, 3)
2025-12-12 15:41:37,041 - sqlalchemy.engine.Engine - INFO - [cached since 436.1s ago] (3, 3)
2025-12-12 15:41:37,166 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET is_active=$1::BOOLEAN, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:41:37,166 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET is_active=$1::BOOLEAN, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:41:37,167 INFO sqlalchemy.engine.Engine [generated in 0.00056s] (False, 3)
2025-12-12 15:41:37,167 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] (False, 3)
2025-12-12 15:41:37,289 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:41:37,289 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:43254 - "DELETE /api/v1/chat/sessions/3?permanent=false HTTP/1.1" 204 No Content
INFO:     127.0.0.1:43254 - "OPTIONS /api/v1/chat/sessions/2?permanent=false HTTP/1.1" 200 OK
2025-12-12 15:41:39,489 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:39,489 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:39,490 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:39,490 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:39,490 INFO sqlalchemy.engine.Engine [cached since 444.9s ago] (3,)
2025-12-12 15:41:39,490 - sqlalchemy.engine.Engine - INFO - [cached since 444.9s ago] (3,)
2025-12-12 15:41:39,614 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:41:39,614 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:41:39,858 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:39,858 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:39,859 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:41:39,859 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:41:39,859 INFO sqlalchemy.engine.Engine [cached since 438.9s ago] (2, 3)
2025-12-12 15:41:39,859 - sqlalchemy.engine.Engine - INFO - [cached since 438.9s ago] (2, 3)
2025-12-12 15:41:40,043 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET is_active=$1::BOOLEAN, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:41:40,043 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET is_active=$1::BOOLEAN, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:41:40,043 INFO sqlalchemy.engine.Engine [cached since 2.877s ago] (False, 2)
2025-12-12 15:41:40,043 - sqlalchemy.engine.Engine - INFO - [cached since 2.877s ago] (False, 2)
2025-12-12 15:41:40,165 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:41:40,165 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:43240 - "DELETE /api/v1/chat/sessions/2?permanent=false HTTP/1.1" 204 No Content
INFO:     127.0.0.1:43240 - "OPTIONS /api/v1/chat/sessions/4 HTTP/1.1" 200 OK
2025-12-12 15:41:43,780 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:43,780 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:43,781 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:43,781 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:43,781 INFO sqlalchemy.engine.Engine [cached since 449.2s ago] (3,)
2025-12-12 15:41:43,781 - sqlalchemy.engine.Engine - INFO - [cached since 449.2s ago] (3,)
2025-12-12 15:41:43,903 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:41:43,903 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:41:44,150 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:44,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:44,150 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:41:44,150 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:41:44,151 INFO sqlalchemy.engine.Engine [cached since 416.5s ago] (4, 3)
2025-12-12 15:41:44,151 - sqlalchemy.engine.Engine - INFO - [cached since 416.5s ago] (4, 3)
2025-12-12 15:41:44,276 INFO sqlalchemy.engine.Engine SELECT chat_messages.session_id AS chat_messages_session_id, chat_messages.id AS chat_messages_id, chat_messages.role AS chat_messages_role, chat_messages.content AS chat_messages_content, chat_messages.sources AS chat_messages_sources, chat_messages.feedback AS chat_messages_feedback, chat_messages.feedback_text AS chat_messages_feedback_text, chat_messages.generation_time_ms AS chat_messages_generation_time_ms, chat_messages.tokens_used AS chat_messages_tokens_used, chat_messages.model_used AS chat_messages_model_used, chat_messages.created_at AS chat_messages_created_at 
FROM chat_messages 
WHERE chat_messages.session_id IN ($1::INTEGER) ORDER BY chat_messages.created_at
2025-12-12 15:41:44,276 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.session_id AS chat_messages_session_id, chat_messages.id AS chat_messages_id, chat_messages.role AS chat_messages_role, chat_messages.content AS chat_messages_content, chat_messages.sources AS chat_messages_sources, chat_messages.feedback AS chat_messages_feedback, chat_messages.feedback_text AS chat_messages_feedback_text, chat_messages.generation_time_ms AS chat_messages_generation_time_ms, chat_messages.tokens_used AS chat_messages_tokens_used, chat_messages.model_used AS chat_messages_model_used, chat_messages.created_at AS chat_messages_created_at 
FROM chat_messages 
WHERE chat_messages.session_id IN ($1::INTEGER) ORDER BY chat_messages.created_at
2025-12-12 15:41:44,277 INFO sqlalchemy.engine.Engine [cached since 416.5s ago] (4,)
2025-12-12 15:41:44,277 - sqlalchemy.engine.Engine - INFO - [cached since 416.5s ago] (4,)
2025-12-12 15:41:44,403 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:41:44,403 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:43254 - "GET /api/v1/chat/sessions/4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:43254 - "OPTIONS /api/v1/chat/sessions/4 HTTP/1.1" 200 OK
2025-12-12 15:41:46,547 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:46,547 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:46,547 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:46,547 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:46,548 INFO sqlalchemy.engine.Engine [cached since 451.9s ago] (3,)
2025-12-12 15:41:46,548 - sqlalchemy.engine.Engine - INFO - [cached since 451.9s ago] (3,)
2025-12-12 15:41:46,670 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:41:46,670 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:41:46,915 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:46,915 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:46,916 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:41:46,916 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:41:46,916 INFO sqlalchemy.engine.Engine [cached since 445.9s ago] (4, 3)
2025-12-12 15:41:46,916 - sqlalchemy.engine.Engine - INFO - [cached since 445.9s ago] (4, 3)
2025-12-12 15:41:47,040 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET is_pinned=$1::BOOLEAN, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:41:47,040 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET is_pinned=$1::BOOLEAN, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:41:47,040 INFO sqlalchemy.engine.Engine [generated in 0.00055s] (True, 4)
2025-12-12 15:41:47,040 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] (True, 4)
2025-12-12 15:41:47,164 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:41:47,164 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:41:47,164 INFO sqlalchemy.engine.Engine [cached since 447s ago] (4,)
2025-12-12 15:41:47,164 - sqlalchemy.engine.Engine - INFO - [cached since 447s ago] (4,)
2025-12-12 15:41:47,226 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:41:47,226 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:43240 - "PATCH /api/v1/chat/sessions/4 HTTP/1.1" 200 OK
2025-12-12 15:41:49,599 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:49,599 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:49,600 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:49,600 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:41:49,600 INFO sqlalchemy.engine.Engine [cached since 455s ago] (3,)
2025-12-12 15:41:49,600 - sqlalchemy.engine.Engine - INFO - [cached since 455s ago] (3,)
2025-12-12 15:41:49,724 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:41:49,724 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:41:49,969 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:41:49,969 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:41:49,969 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:41:49,969 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:41:49,970 INFO sqlalchemy.engine.Engine [cached since 422.3s ago] (4, 3)
2025-12-12 15:41:49,970 - sqlalchemy.engine.Engine - INFO - [cached since 422.3s ago] (4, 3)
2025-12-12 15:41:50,093 INFO sqlalchemy.engine.Engine SELECT chat_messages.session_id AS chat_messages_session_id, chat_messages.id AS chat_messages_id, chat_messages.role AS chat_messages_role, chat_messages.content AS chat_messages_content, chat_messages.sources AS chat_messages_sources, chat_messages.feedback AS chat_messages_feedback, chat_messages.feedback_text AS chat_messages_feedback_text, chat_messages.generation_time_ms AS chat_messages_generation_time_ms, chat_messages.tokens_used AS chat_messages_tokens_used, chat_messages.model_used AS chat_messages_model_used, chat_messages.created_at AS chat_messages_created_at 
FROM chat_messages 
WHERE chat_messages.session_id IN ($1::INTEGER) ORDER BY chat_messages.created_at
2025-12-12 15:41:50,093 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.session_id AS chat_messages_session_id, chat_messages.id AS chat_messages_id, chat_messages.role AS chat_messages_role, chat_messages.content AS chat_messages_content, chat_messages.sources AS chat_messages_sources, chat_messages.feedback AS chat_messages_feedback, chat_messages.feedback_text AS chat_messages_feedback_text, chat_messages.generation_time_ms AS chat_messages_generation_time_ms, chat_messages.tokens_used AS chat_messages_tokens_used, chat_messages.model_used AS chat_messages_model_used, chat_messages.created_at AS chat_messages_created_at 
FROM chat_messages 
WHERE chat_messages.session_id IN ($1::INTEGER) ORDER BY chat_messages.created_at
2025-12-12 15:41:50,094 INFO sqlalchemy.engine.Engine [cached since 422.3s ago] (4,)
2025-12-12 15:41:50,094 - sqlalchemy.engine.Engine - INFO - [cached since 422.3s ago] (4,)
2025-12-12 15:41:50,218 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:41:50,218 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:43240 - "GET /api/v1/chat/sessions/4 HTTP/1.1" 200 OK
2025-12-12 15:42:07,251 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:07,251 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:07,251 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:07,251 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:07,252 INFO sqlalchemy.engine.Engine [cached since 472.6s ago] (3,)
2025-12-12 15:42:07,252 - sqlalchemy.engine.Engine - INFO - [cached since 472.6s ago] (3,)
2025-12-12 15:42:07,253 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:07,253 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:07,253 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:07,253 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:07,253 INFO sqlalchemy.engine.Engine [cached since 472.7s ago] (3,)
2025-12-12 15:42:07,253 - sqlalchemy.engine.Engine - INFO - [cached since 472.7s ago] (3,)
2025-12-12 15:42:07,374 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:42:07,374 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:42:07,377 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:42:07,377 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:42:07,618 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:07,618 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:07,619 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:07,619 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:07,619 INFO sqlalchemy.engine.Engine [cached since 50.64s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 7, 435784))
2025-12-12 15:42:07,619 - sqlalchemy.engine.Engine - INFO - [cached since 50.64s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 7, 435784))
2025-12-12 15:42:07,621 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:07,621 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:07,622 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:42:07,622 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:42:07,622 INFO sqlalchemy.engine.Engine [cached since 50.63s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 7, 439250))
2025-12-12 15:42:07,622 - sqlalchemy.engine.Engine - INFO - [cached since 50.63s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 7, 439250))
2025-12-12 15:42:07,807 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:07,807 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:07,807 INFO sqlalchemy.engine.Engine [cached since 50.63s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 7, 435784))
2025-12-12 15:42:07,807 - sqlalchemy.engine.Engine - INFO - [cached since 50.63s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 7, 435784))
2025-12-12 15:42:07,808 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:42:07,808 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58032 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 15:42:07,933 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:07,933 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:07,933 INFO sqlalchemy.engine.Engine [cached since 50.63s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 7, 435784))
2025-12-12 15:42:07,933 - sqlalchemy.engine.Engine - INFO - [cached since 50.63s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 7, 435784))
2025-12-12 15:42:08,056 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:08,056 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:08,056 INFO sqlalchemy.engine.Engine [cached since 50.62s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 7, 435784))
2025-12-12 15:42:08,056 - sqlalchemy.engine.Engine - INFO - [cached since 50.62s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 7, 435784))
2025-12-12 15:42:08,063 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:08,063 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:08,064 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:08,064 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:08,064 INFO sqlalchemy.engine.Engine [cached since 473.5s ago] (3,)
2025-12-12 15:42:08,064 - sqlalchemy.engine.Engine - INFO - [cached since 473.5s ago] (3,)
2025-12-12 15:42:08,179 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:42:08,179 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:42:08,189 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:42:08,189 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:58026 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 15:42:08,434 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:08,434 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:08,435 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:08,435 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:08,435 INFO sqlalchemy.engine.Engine [cached since 473.8s ago] (3,)
2025-12-12 15:42:08,435 - sqlalchemy.engine.Engine - INFO - [cached since 473.8s ago] (3,)
2025-12-12 15:42:08,436 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:08,436 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:08,436 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:42:08,436 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:42:08,436 INFO sqlalchemy.engine.Engine [cached since 51.45s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 8, 252671))
2025-12-12 15:42:08,436 - sqlalchemy.engine.Engine - INFO - [cached since 51.45s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 8, 252671))
2025-12-12 15:42:08,558 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:42:08,558 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:42:08,560 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:42:08,560 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58032 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58034 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:58034 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 15:42:08,810 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:08,810 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:08,810 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:08,810 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:08,810 INFO sqlalchemy.engine.Engine [cached since 51.83s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 8, 622723))
2025-12-12 15:42:08,810 - sqlalchemy.engine.Engine - INFO - [cached since 51.83s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 8, 622723))
2025-12-12 15:42:08,923 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:08,923 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:08,924 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:08,924 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:08,924 INFO sqlalchemy.engine.Engine [cached since 474.3s ago] (3,)
2025-12-12 15:42:08,924 - sqlalchemy.engine.Engine - INFO - [cached since 474.3s ago] (3,)
2025-12-12 15:42:08,930 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:08,930 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:08,930 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:42:08,930 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:42:08,931 INFO sqlalchemy.engine.Engine [cached since 473.2s ago] (3,)
2025-12-12 15:42:08,931 - sqlalchemy.engine.Engine - INFO - [cached since 473.2s ago] (3,)
2025-12-12 15:42:08,935 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:08,935 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:08,935 INFO sqlalchemy.engine.Engine [cached since 51.75s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 8, 622723))
2025-12-12 15:42:08,935 - sqlalchemy.engine.Engine - INFO - [cached since 51.75s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 8, 622723))
2025-12-12 15:42:08,999 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:08,999 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:09,000 INFO sqlalchemy.engine.Engine [cached since 51.69s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 8, 622723))
2025-12-12 15:42:09,000 - sqlalchemy.engine.Engine - INFO - [cached since 51.69s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 8, 622723))
2025-12-12 15:42:09,048 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:42:09,048 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:42:09,053 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:42:09,053 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:42:09,054 INFO sqlalchemy.engine.Engine [cached since 473.1s ago] (3, 100, 0)
2025-12-12 15:42:09,054 - sqlalchemy.engine.Engine - INFO - [cached since 473.1s ago] (3, 100, 0)
2025-12-12 15:42:09,064 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:09,064 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:42:09,065 INFO sqlalchemy.engine.Engine [cached since 51.63s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 8, 622723))
2025-12-12 15:42:09,065 - sqlalchemy.engine.Engine - INFO - [cached since 51.63s ago] (3, datetime.datetime(2025, 11, 12, 10, 12, 8, 622723))
2025-12-12 15:42:09,118 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:42:09,118 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:42:09,133 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:42:09,133 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58034 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58026 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 15:42:09,293 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:09,293 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:09,294 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:42:09,294 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:42:09,294 INFO sqlalchemy.engine.Engine [cached since 471.1s ago] (3,)
2025-12-12 15:42:09,294 - sqlalchemy.engine.Engine - INFO - [cached since 471.1s ago] (3,)
2025-12-12 15:42:09,399 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:09,399 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:09,400 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:42:09,400 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:42:09,400 INFO sqlalchemy.engine.Engine [cached since 473.7s ago] (3,)
2025-12-12 15:42:09,400 - sqlalchemy.engine.Engine - INFO - [cached since 473.7s ago] (3,)
2025-12-12 15:42:09,417 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:42:09,417 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:42:09,417 INFO sqlalchemy.engine.Engine [cached since 470.1s ago] (3, 50, 0)
2025-12-12 15:42:09,417 - sqlalchemy.engine.Engine - INFO - [cached since 470.1s ago] (3, 50, 0)
2025-12-12 15:42:09,481 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:42:09,481 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:42:09,523 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:42:09,523 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:42:09,523 INFO sqlalchemy.engine.Engine [cached since 473.6s ago] (3, 100, 0)
2025-12-12 15:42:09,523 - sqlalchemy.engine.Engine - INFO - [cached since 473.6s ago] (3, 100, 0)
INFO:     127.0.0.1:58032 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:42:09,586 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:42:09,586 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58034 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:42:09,742 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:09,742 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:09,742 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:09,742 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:09,743 INFO sqlalchemy.engine.Engine [cached since 475.1s ago] (3,)
2025-12-12 15:42:09,743 - sqlalchemy.engine.Engine - INFO - [cached since 475.1s ago] (3,)
2025-12-12 15:42:10,015 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:42:10,015 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:42:10,266 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:10,266 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:10,267 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:42:10,267 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:42:10,267 INFO sqlalchemy.engine.Engine [cached since 472.1s ago] (3,)
2025-12-12 15:42:10,267 - sqlalchemy.engine.Engine - INFO - [cached since 472.1s ago] (3,)
2025-12-12 15:42:10,392 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:42:10,392 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:42:10,392 INFO sqlalchemy.engine.Engine [cached since 471.1s ago] (3, 50, 0)
2025-12-12 15:42:10,392 - sqlalchemy.engine.Engine - INFO - [cached since 471.1s ago] (3, 50, 0)
2025-12-12 15:42:10,454 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:42:10,454 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58032 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:42:28,351 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:28,351 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:28,352 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:28,352 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:28,352 INFO sqlalchemy.engine.Engine [cached since 493.7s ago] (3,)
2025-12-12 15:42:28,352 - sqlalchemy.engine.Engine - INFO - [cached since 493.7s ago] (3,)
2025-12-12 15:42:28,474 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:42:28,474 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:42:28,725 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:28,725 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:28,726 INFO sqlalchemy.engine.Engine INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 15:42:28,726 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 15:42:28,726 INFO sqlalchemy.engine.Engine [cached since 488.7s ago] (3, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 15:42:28,726 - sqlalchemy.engine.Engine - INFO - [cached since 488.7s ago] (3, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 15:42:28,913 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:42:28,913 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:42:28,914 INFO sqlalchemy.engine.Engine [cached since 488.7s ago] (5,)
2025-12-12 15:42:28,914 - sqlalchemy.engine.Engine - INFO - [cached since 488.7s ago] (5,)
2025-12-12 15:42:29,038 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:42:29,038 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58046 - "POST /api/v1/chat/sessions HTTP/1.1" 201 Created
INFO:     127.0.0.1:58046 - "OPTIONS /api/v1/chat/sessions/5/messages HTTP/1.1" 200 OK
2025-12-12 15:42:29,305 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:29,305 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:29,305 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:29,305 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:42:29,306 INFO sqlalchemy.engine.Engine [cached since 494.7s ago] (3,)
2025-12-12 15:42:29,306 - sqlalchemy.engine.Engine - INFO - [cached since 494.7s ago] (3,)
2025-12-12 15:42:29,427 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:42:29,427 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:42:29,671 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:42:29,671 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:42:29,672 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:42:29,672 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:42:29,672 INFO sqlalchemy.engine.Engine [cached since 488.7s ago] (5, 3)
2025-12-12 15:42:29,672 - sqlalchemy.engine.Engine - INFO - [cached since 488.7s ago] (5, 3)
2025-12-12 15:42:29,796 INFO sqlalchemy.engine.Engine INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:42:29,796 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:42:29,797 INFO sqlalchemy.engine.Engine [cached since 488.6s ago] (5, 'user', 'Summarize the key findings in my documents', 'null', None, None, None, None, None)
2025-12-12 15:42:29,797 - sqlalchemy.engine.Engine - INFO - [cached since 488.6s ago] (5, 'user', 'Summarize the key findings in my documents', 'null', None, None, None, None, None)
2025-12-12 15:42:29,920 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:42:29,920 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:42:29,920 INFO sqlalchemy.engine.Engine [cached since 488.6s ago] (1, datetime.datetime(2025, 12, 12, 10, 12, 29, 795487), datetime.datetime(2025, 12, 12, 10, 12, 29, 795479), 5)
2025-12-12 15:42:29,920 - sqlalchemy.engine.Engine - INFO - [cached since 488.6s ago] (1, datetime.datetime(2025, 12, 12, 10, 12, 29, 795487), datetime.datetime(2025, 12, 12, 10, 12, 29, 795479), 5)
2025-12-12 15:42:30,044 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:42:30,044 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:42:30,044 INFO sqlalchemy.engine.Engine [cached since 488.6s ago] (5,)
2025-12-12 15:42:30,044 - sqlalchemy.engine.Engine - INFO - [cached since 488.6s ago] (5,)
2025-12-12 15:42:30,168 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET title=$1::VARCHAR, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:42:30,168 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET title=$1::VARCHAR, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:42:30,168 INFO sqlalchemy.engine.Engine [cached since 488.6s ago] ('Summarize the key findings in my documents', 5)
2025-12-12 15:42:30,168 - sqlalchemy.engine.Engine - INFO - [cached since 488.6s ago] ('Summarize the key findings in my documents', 5)
2025-12-12 15:42:30,291 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:42:30,291 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:42:30,291 INFO sqlalchemy.engine.Engine [cached since 489.3s ago] (5, 3)
2025-12-12 15:42:30,291 - sqlalchemy.engine.Engine - INFO - [cached since 489.3s ago] (5, 3)
2025-12-12 15:42:30,353 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.session_id = $1::INTEGER ORDER BY chat_messages.created_at 
 LIMIT $2::INTEGER
2025-12-12 15:42:30,353 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.session_id = $1::INTEGER ORDER BY chat_messages.created_at 
 LIMIT $2::INTEGER
2025-12-12 15:42:30,354 INFO sqlalchemy.engine.Engine [cached since 488.6s ago] (5, 10)
2025-12-12 15:42:30,354 - sqlalchemy.engine.Engine - INFO - [cached since 488.6s ago] (5, 10)
2025-12-12 15:42:40,387 - app.services.weaviate_service - INFO - Found 5 results for query: Summarize the key findings in my documents...
2025-12-12 15:42:40,390 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-72ca5ef6-ed3a-4358-9dab-8f305e18311f', 'json_data': {'messages': [{'role': 'user', 'content': "You are DocQuery AI, an intelligent document assistant. Your task is to answer questions based on the provided document context.\n\nGuidelines:\n1. Answer based ONLY on the information provided in the context\n2. If the context doesn't contain relevant information, clearly state that\n3. Cite the source documents when providing information\n4. Be concise but comprehensive\n5. If multiple sources provide relevant information, synthesize them\n6. Use a professional and helpful tone\n\n## Document Context:\n[Source 1: Dipesh_Paul_Resume.pdf] (Page 1)\nIndore (Senior Machine Learning Engineer) Dec 2023 - Present Designed and implemented distributed finetuning workflows using QLoRA, reducing training time by ~30% and cutting training costs by ~20%. Built multi-agent orchestration using OpenAI Agent SDK + PydanticAI for real-time task routing, improving routing accuracy and reducing manual triage effort by 40%. Collaborated with cross-functional teams (product, infra) to productionize LLM features with FastAPI and Docker, ensuring low-latency, high-availability deployments.Tensorflow Keras Pytorch Scikit Learn Transformers Ollama OpenCV Spacy RAGPydanticAI Langchain NLP SFT, RLHF, Peft etc. Docker MCP & Tools Function Calling Embeddings Prompt EngineeringJira Git Agent Frameworks Kafka Team Lead Client Handling Innovation Adoption Research Translation Architecture Designing Feb 2023 - July 2023Zdaly, Indore (Senior Machine Learning Engineer) Built an LLM-powered product catalog analyzer that improved lookup accuracy by 45%.\n\n---\n\n[Source 2: Dipesh_Paul_Resume.pdf] (Page 1)\nResearch Translation Architecture Designing Feb 2023 - July 2023Zdaly, Indore (Senior Machine Learning Engineer) Built an LLM-powered product catalog analyzer that improved lookup accuracy by 45%. Designed a vector-based similarity search pipeline using Weaviate for real-time customer recommendations. Migrated legacy NLP models to transformer-based architectures, reducing latency by 50%. Jan 2022  Jan 2023GsLab, Pune (Machine Learning Engineer) Developed a ticket classification model using ULMFit + FastAI that improved routing accuracy by 38%. Automated price prediction system using TensorFlow & Scrapy, processing 100k+ product datapoints. Optimized inference pipeline with Dockerized microservices, cutting server cost by 25%. Aug 2019  Jan 2022Calsoft, Pune (Machine Learning Engineer) Built an avatar generator using GANs (DCGAN, StyleGAN) trained on 143k+ images. Implemented virtualization automation PaaS platform using TensorFlow.\n\n---\n\n[Source 3: Dipesh_Paul_Resume.pdf] (Page 1)\nJan 2022Calsoft, Pune (Machine Learning Engineer) Built an avatar generator using GANs (DCGAN, StyleGAN) trained on 143k+ images. Implemented virtualization automation PaaS platform using TensorFlow. Reduced VM provisioning time by 27% Developed ML pipelines for anomaly detection & forecasting using Scikit-Learn + Kafka. Jan 2019  Jul 2019Calsoft, Pune (Machine Learning Engineer Intern) Created internal POCs in image classification, OCR, and NLP. Built early prototypes of ticket analyzer using traditional NLP + Python. Contributed to optimizing CNN models, improving accuracy by 12%. Senior Machine Learning Engineer | GenAI & LLM Specialist KEY PROJECTS AWARDS Rising Star, 2020, Calsoft Pvt. Ltd. Outstanding Innovator, 2022, Calsoft Pvt. Ltd. Praise, 2024, SystangoMulti-Agent Procurement Platform Built a Multi-Agent platform to streamline procurement, featuring LLM-powered chatbot portals for support, order analysis, and data visualization.\n\n---\n\n[Source 4: Dipesh_Paul_Resume.pdf] (Page 1)\nDIPESH PAUL Indore, MP, 452016 | +91 896 277 5625 dipeshpal17@gmail.com | www.dipeshpal.in PROFESSIONAL SUMMARY Senior Machine Learning Engineer (7 years) specializing in GenAI, LLMs, multi-agent systems, RAG, and model finetuning. Experienced with OpenAI, DeepSeek, Llama, Mistral, QLoRA, PEFT, distributed training, and vector databases (Weaviate, Pinecone, Qdrant). Built and deployed production-grade ML, DL, and LLM systems using FastAPI, Docker, and cloud services, delivering scalable, low-latency AI solutions in enterprise environments. GenAI Machine Learning Deep Learning LLM OpenAI, DeepSeek, Llama, Mistral etc. LLM Finetuning OpenAI Agent SDK LlamaIndex Pinecone, Qdrant, WeaviateSKILLS EXPERIENCE Systango, Indore (Senior Machine Learning Engineer) Dec 2023 - Present Designed and implemented distributed finetuning workflows using QLoRA, reducing training time by ~30% and cutting training costs by ~20%.\n\n---\n\n[Source 5: Dipesh_Paul_Resume.pdf] (Page 1)\nAutomated ticketing processes using advanced machine learning techniques. Utilized NLP and Wikipedia-trained ULMfit Fastai models to analyze tickets and intelligently determine appropriate assignees. Python, Kafka, Docker, FastAPI, AI/ML, Fastai Avatar Generator Built an avatar generation system for portfolio faces, trained on a dataset of approximately 143,000 human and cartoon images. Implemented various neural network architectures, including Deep Convolutional GANs (Style GAN), CNN, and UNet. Python, AI/ML, Tensorflow, OpenCV, DZoneADDITIONAL PROJECTS CERTIFICATIONS Machine Learning: Stanford University (96.47%) Introduction to TensorFlow for Artificial Intelligence, Machine Learning, and Deep Learning: Coursera (99.28%) Supervised Machine Learning (Regression and Classification): DeepLearning.AI, Stanford University (100%) Python Data Structures: University of Michigan (98.40%) RGPV University Bachelor of Engineering in Computer Science, 2019 Acropolis Institute of Tech.\n\n## User Question:\nSummarize the key findings in my documents\n\n## Your Response:"}], 'model': 'llama-3.3-70b-versatile', 'max_tokens': 1024, 'temperature': 0.7}}
2025-12-12 15:42:40,392 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-12-12 15:42:41,483 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Fri, 12 Dec 2025 10:12:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'server': 'cloudflare', 'vary': 'Origin', 'x-groq-region': 'bom', 'x-ratelimit-limit-requests': '1000', 'x-ratelimit-limit-tokens': '12000', 'x-ratelimit-remaining-requests': '999', 'x-ratelimit-remaining-tokens': '10686', 'x-ratelimit-reset-requests': '1m26.4s', 'x-ratelimit-reset-tokens': '6.57s', 'x-request-id': 'req_01kc90rrx4erf8rfvnyt4jz9k9', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=2sXAPSpHIfVT2kvryIa30WOY95fWZxq9V8BsD8Y4Yyc-1765534360.450592-1.0.1.1-XxSmHZZzt0Tl6OH_Vj9qa9J3dO0keadqxbwiFppqCuyiI6drd04K5jAd_sT9mrAG5oyvOB.tIzLbeBGxvrIO5kJ_Q8Z73qyWE1Z3hu8EIsmKx56YjuwTNZMxdhhCKQ2X; HttpOnly; Secure; Path=/; Domain=groq.com; Expires=Fri, 12 Dec 2025 10:42:41 GMT', 'strict-transport-security': 'max-age=2592000', 'content-encoding': 'gzip', 'cf-ray': '9acc71d8c9b7ffab-BOM', 'alt-svc': 'h3=":443"; ma=86400'})
2025-12-12 15:42:41,487 INFO sqlalchemy.engine.Engine INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:42:41,487 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:42:41,487 INFO sqlalchemy.engine.Engine [cached since 500.3s ago] (5, 'assistant', 'Based on the provided documents, the key findings are:\n\n1. **Improved Training Time and Costs**: The implementation of distributed finetuning workf ... (1351 characters truncated) ... res, to improve efficiency, accuracy, and cost-effectiveness in different projects and industries. [Source 1, Source 2, Source 3, Source 4, Source 5]', '[{"document_id": 10, "document_name": "Dipesh_Paul_Resume.pdf", "chunk_id": 1, "content": "Indore (Senior Machine Learning Engineer) Dec 2023 - Prese ... (1941 characters truncated) ... Kafka, Docker, FastAPI, AI/ML, Fastai Avatar Generator Built an avatar generation system for...", "relevance_score": 0.10870695114135742, "page": 1}]', None, None, 11008, None, 'llama-3.3-70b-versatile')
2025-12-12 15:42:41,487 - sqlalchemy.engine.Engine - INFO - [cached since 500.3s ago] (5, 'assistant', 'Based on the provided documents, the key findings are:\n\n1. **Improved Training Time and Costs**: The implementation of distributed finetuning workf ... (1351 characters truncated) ... res, to improve efficiency, accuracy, and cost-effectiveness in different projects and industries. [Source 1, Source 2, Source 3, Source 4, Source 5]', '[{"document_id": 10, "document_name": "Dipesh_Paul_Resume.pdf", "chunk_id": 1, "content": "Indore (Senior Machine Learning Engineer) Dec 2023 - Prese ... (1941 characters truncated) ... Kafka, Docker, FastAPI, AI/ML, Fastai Avatar Generator Built an avatar generation system for...", "relevance_score": 0.10870695114135742, "page": 1}]', None, None, 11008, None, 'llama-3.3-70b-versatile')
2025-12-12 15:42:41,550 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:42:41,550 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:42:41,551 INFO sqlalchemy.engine.Engine [cached since 500.3s ago] (1, datetime.datetime(2025, 12, 12, 10, 12, 41, 486002), datetime.datetime(2025, 12, 12, 10, 12, 41, 485995), 5)
2025-12-12 15:42:41,551 - sqlalchemy.engine.Engine - INFO - [cached since 500.3s ago] (1, datetime.datetime(2025, 12, 12, 10, 12, 41, 486002), datetime.datetime(2025, 12, 12, 10, 12, 41, 485995), 5)
2025-12-12 15:42:41,614 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:42:41,614 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:42:41,614 INFO sqlalchemy.engine.Engine [cached since 500.2s ago] (6,)
2025-12-12 15:42:41,614 - sqlalchemy.engine.Engine - INFO - [cached since 500.2s ago] (6,)
2025-12-12 15:42:41,677 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:42:41,677 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:42:41,678 INFO sqlalchemy.engine.Engine [cached since 500.7s ago] (5, 3)
2025-12-12 15:42:41,678 - sqlalchemy.engine.Engine - INFO - [cached since 500.7s ago] (5, 3)
2025-12-12 15:42:41,739 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:42:41,739 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60700 - "POST /api/v1/chat/sessions/5/messages HTTP/1.1" 200 OK
INFO:     127.0.0.1:38966 - "OPTIONS /api/v1/documents?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38976 - "OPTIONS /api/v1/documents?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38986 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:38986 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:38986 - "OPTIONS /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38976 - "OPTIONS /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 15:43:06,822 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:06,822 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:06,823 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:06,823 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:06,823 INFO sqlalchemy.engine.Engine [cached since 531.1s ago] (3,)
2025-12-12 15:43:06,823 - sqlalchemy.engine.Engine - INFO - [cached since 531.1s ago] (3,)
2025-12-12 15:43:06,950 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:06,950 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:06,950 INFO sqlalchemy.engine.Engine [cached since 531s ago] (3, 10, 0)
2025-12-12 15:43:06,950 - sqlalchemy.engine.Engine - INFO - [cached since 531s ago] (3, 10, 0)
2025-12-12 15:43:07,014 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:07,014 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:38966 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 15:43:07,266 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:07,266 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:07,266 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:07,266 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:07,266 INFO sqlalchemy.engine.Engine [cached since 531.6s ago] (3,)
2025-12-12 15:43:07,266 - sqlalchemy.engine.Engine - INFO - [cached since 531.6s ago] (3,)
2025-12-12 15:43:07,388 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:07,388 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:07,389 INFO sqlalchemy.engine.Engine [cached since 531.4s ago] (3, 10, 0)
2025-12-12 15:43:07,389 - sqlalchemy.engine.Engine - INFO - [cached since 531.4s ago] (3, 10, 0)
2025-12-12 15:43:07,727 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:07,727 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:38966 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38966 - "OPTIONS /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:38976 - "OPTIONS /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
2025-12-12 15:43:10,082 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:10,082 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:10,083 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:43:10,083 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:43:10,083 INFO sqlalchemy.engine.Engine [cached since 535.5s ago] (3,)
2025-12-12 15:43:10,083 - sqlalchemy.engine.Engine - INFO - [cached since 535.5s ago] (3,)
2025-12-12 15:43:10,204 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:43:10,204 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:43:10,722 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:10,722 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:10,726 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 15:43:10,726 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 15:43:10,726 INFO sqlalchemy.engine.Engine [generated in 0.00050s] (3,)
2025-12-12 15:43:10,726 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] (3,)
2025-12-12 15:43:10,917 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 15:43:10,917 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 15:43:10,918 INFO sqlalchemy.engine.Engine [generated in 0.00057s] (3,)
2025-12-12 15:43:10,918 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] (3,)
2025-12-12 15:43:11,047 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:11,047 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:38986 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
2025-12-12 15:43:11,300 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:11,300 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:11,300 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:43:11,300 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:43:11,301 INFO sqlalchemy.engine.Engine [cached since 536.7s ago] (3,)
2025-12-12 15:43:11,301 - sqlalchemy.engine.Engine - INFO - [cached since 536.7s ago] (3,)
2025-12-12 15:43:11,693 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:43:11,693 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:43:11,936 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:11,936 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:11,937 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 15:43:11,937 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 15:43:11,937 INFO sqlalchemy.engine.Engine [cached since 1.212s ago] (3,)
2025-12-12 15:43:11,937 - sqlalchemy.engine.Engine - INFO - [cached since 1.212s ago] (3,)
2025-12-12 15:43:12,120 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 15:43:12,120 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 15:43:12,121 INFO sqlalchemy.engine.Engine [cached since 1.203s ago] (3,)
2025-12-12 15:43:12,121 - sqlalchemy.engine.Engine - INFO - [cached since 1.203s ago] (3,)
2025-12-12 15:43:12,244 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:12,244 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:38986 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:54722 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:54722 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
2025-12-12 15:43:24,673 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:24,673 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:24,674 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:24,674 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:24,674 INFO sqlalchemy.engine.Engine [cached since 549s ago] (3,)
2025-12-12 15:43:24,674 - sqlalchemy.engine.Engine - INFO - [cached since 549s ago] (3,)
2025-12-12 15:43:24,799 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:24,799 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:24,799 INFO sqlalchemy.engine.Engine [cached since 548.8s ago] (3, 10, 0)
2025-12-12 15:43:24,799 - sqlalchemy.engine.Engine - INFO - [cached since 548.8s ago] (3, 10, 0)
2025-12-12 15:43:24,864 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:24,864 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:54722 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 15:43:25,122 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:25,122 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:25,122 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:25,122 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:25,123 INFO sqlalchemy.engine.Engine [cached since 549.4s ago] (3,)
2025-12-12 15:43:25,123 - sqlalchemy.engine.Engine - INFO - [cached since 549.4s ago] (3,)
2025-12-12 15:43:25,249 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:25,249 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:25,250 INFO sqlalchemy.engine.Engine [cached since 549.3s ago] (3, 10, 0)
2025-12-12 15:43:25,250 - sqlalchemy.engine.Engine - INFO - [cached since 549.3s ago] (3, 10, 0)
2025-12-12 15:43:25,322 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:25,322 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:54722 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54730 - "OPTIONS /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:54732 - "OPTIONS /api/v1/documents?page=1&page_size=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54744 - "OPTIONS /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:54758 - "OPTIONS /api/v1/documents?page=1&page_size=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54730 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:54730 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:54730 - "OPTIONS /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54758 - "OPTIONS /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
2025-12-12 15:43:31,283 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:31,283 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:31,283 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:31,283 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:31,284 INFO sqlalchemy.engine.Engine [cached since 555.6s ago] (3,)
2025-12-12 15:43:31,284 - sqlalchemy.engine.Engine - INFO - [cached since 555.6s ago] (3,)
2025-12-12 15:43:31,302 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:31,302 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:31,302 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:31,302 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:31,303 INFO sqlalchemy.engine.Engine [cached since 555.6s ago] (3,)
2025-12-12 15:43:31,303 - sqlalchemy.engine.Engine - INFO - [cached since 555.6s ago] (3,)
2025-12-12 15:43:31,413 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:43:31,413 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:43:31,413 INFO sqlalchemy.engine.Engine [generated in 0.00025s] (3,)
2025-12-12 15:43:31,413 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] (3,)
2025-12-12 15:43:31,425 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:31,425 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:31,426 INFO sqlalchemy.engine.Engine [cached since 555.5s ago] (3, 5, 0)
2025-12-12 15:43:31,426 - sqlalchemy.engine.Engine - INFO - [cached since 555.5s ago] (3, 5, 0)
2025-12-12 15:43:31,489 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:31,489 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:43:31,534 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:31,534 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:54744 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54772 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
2025-12-12 15:43:31,735 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:31,735 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:31,736 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:31,736 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:31,736 INFO sqlalchemy.engine.Engine [cached since 556s ago] (3,)
2025-12-12 15:43:31,736 - sqlalchemy.engine.Engine - INFO - [cached since 556s ago] (3,)
2025-12-12 15:43:31,781 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:31,781 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:31,782 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:31,782 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:31,782 INFO sqlalchemy.engine.Engine [cached since 556.1s ago] (3,)
2025-12-12 15:43:31,782 - sqlalchemy.engine.Engine - INFO - [cached since 556.1s ago] (3,)
2025-12-12 15:43:31,858 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:31,858 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:31,858 INFO sqlalchemy.engine.Engine [cached since 555.9s ago] (3, 5, 0)
2025-12-12 15:43:31,858 - sqlalchemy.engine.Engine - INFO - [cached since 555.9s ago] (3, 5, 0)
2025-12-12 15:43:31,905 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:43:31,905 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:43:31,905 INFO sqlalchemy.engine.Engine [cached since 0.4922s ago] (3,)
2025-12-12 15:43:31,905 - sqlalchemy.engine.Engine - INFO - [cached since 0.4922s ago] (3,)
2025-12-12 15:43:31,919 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:31,919 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:54744 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
2025-12-12 15:43:32,029 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:32,029 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:54772 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:55046 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:55046 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 15:43:37,927 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:37,927 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:37,928 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:43:37,928 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:43:37,928 INFO sqlalchemy.engine.Engine [cached since 563.3s ago] (3,)
2025-12-12 15:43:37,928 - sqlalchemy.engine.Engine - INFO - [cached since 563.3s ago] (3,)
2025-12-12 15:43:37,941 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:37,941 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:37,941 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:37,941 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:37,942 INFO sqlalchemy.engine.Engine [cached since 562.2s ago] (3,)
2025-12-12 15:43:37,942 - sqlalchemy.engine.Engine - INFO - [cached since 562.2s ago] (3,)
2025-12-12 15:43:38,049 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:43:38,049 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:43:38,072 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:38,072 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:38,072 INFO sqlalchemy.engine.Engine [cached since 562.1s ago] (3, 100, 0)
2025-12-12 15:43:38,072 - sqlalchemy.engine.Engine - INFO - [cached since 562.1s ago] (3, 100, 0)
2025-12-12 15:43:38,133 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:38,133 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:55046 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:43:38,295 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:38,295 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:38,296 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:43:38,296 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:43:38,296 INFO sqlalchemy.engine.Engine [cached since 560.1s ago] (3,)
2025-12-12 15:43:38,296 - sqlalchemy.engine.Engine - INFO - [cached since 560.1s ago] (3,)
2025-12-12 15:43:38,387 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:38,387 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:38,388 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:38,388 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:43:38,388 INFO sqlalchemy.engine.Engine [cached since 562.7s ago] (3,)
2025-12-12 15:43:38,388 - sqlalchemy.engine.Engine - INFO - [cached since 562.7s ago] (3,)
2025-12-12 15:43:38,422 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:38,422 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:38,423 INFO sqlalchemy.engine.Engine [cached since 559.1s ago] (3, 50, 0)
2025-12-12 15:43:38,423 - sqlalchemy.engine.Engine - INFO - [cached since 559.1s ago] (3, 50, 0)
2025-12-12 15:43:38,486 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:38,486 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:43:38,511 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:38,511 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:38,511 INFO sqlalchemy.engine.Engine [cached since 562.6s ago] (3, 100, 0)
2025-12-12 15:43:38,511 - sqlalchemy.engine.Engine - INFO - [cached since 562.6s ago] (3, 100, 0)
INFO:     127.0.0.1:55042 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:43:38,574 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:38,574 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:55046 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:43:38,736 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:38,736 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:38,737 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:43:38,737 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:43:38,737 INFO sqlalchemy.engine.Engine [cached since 564.1s ago] (3,)
2025-12-12 15:43:38,737 - sqlalchemy.engine.Engine - INFO - [cached since 564.1s ago] (3,)
2025-12-12 15:43:38,860 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:43:38,860 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:43:39,108 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:39,108 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:39,109 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:43:39,109 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:43:39,110 INFO sqlalchemy.engine.Engine [cached since 560.9s ago] (3,)
2025-12-12 15:43:39,110 - sqlalchemy.engine.Engine - INFO - [cached since 560.9s ago] (3,)
2025-12-12 15:43:39,234 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:39,234 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:43:39,234 INFO sqlalchemy.engine.Engine [cached since 559.9s ago] (3, 50, 0)
2025-12-12 15:43:39,234 - sqlalchemy.engine.Engine - INFO - [cached since 559.9s ago] (3, 50, 0)
2025-12-12 15:43:39,300 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:39,300 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:55042 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:43:46,818 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:46,818 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:46,818 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:43:46,818 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:43:46,818 INFO sqlalchemy.engine.Engine [cached since 572.2s ago] (3,)
2025-12-12 15:43:46,818 - sqlalchemy.engine.Engine - INFO - [cached since 572.2s ago] (3,)
2025-12-12 15:43:46,941 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:43:46,941 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:43:47,188 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:47,188 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:47,189 INFO sqlalchemy.engine.Engine INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 15:43:47,189 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 15:43:47,189 INFO sqlalchemy.engine.Engine [cached since 567.2s ago] (3, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 15:43:47,189 - sqlalchemy.engine.Engine - INFO - [cached since 567.2s ago] (3, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 15:43:47,315 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:43:47,315 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:43:47,315 INFO sqlalchemy.engine.Engine [cached since 567.1s ago] (6,)
2025-12-12 15:43:47,315 - sqlalchemy.engine.Engine - INFO - [cached since 567.1s ago] (6,)
2025-12-12 15:43:47,378 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:47,378 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:55062 - "POST /api/v1/chat/sessions HTTP/1.1" 201 Created
INFO:     127.0.0.1:55062 - "OPTIONS /api/v1/chat/sessions/6/messages HTTP/1.1" 200 OK
2025-12-12 15:43:47,654 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:47,654 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:47,655 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:43:47,655 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:43:47,655 INFO sqlalchemy.engine.Engine [cached since 573.1s ago] (3,)
2025-12-12 15:43:47,655 - sqlalchemy.engine.Engine - INFO - [cached since 573.1s ago] (3,)
2025-12-12 15:43:47,779 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:43:47,779 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:43:48,023 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:43:48,023 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:43:48,024 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:43:48,024 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:43:48,024 INFO sqlalchemy.engine.Engine [cached since 567.1s ago] (6, 3)
2025-12-12 15:43:48,024 - sqlalchemy.engine.Engine - INFO - [cached since 567.1s ago] (6, 3)
2025-12-12 15:43:48,149 INFO sqlalchemy.engine.Engine INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:43:48,149 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:43:48,149 INFO sqlalchemy.engine.Engine [cached since 567s ago] (6, 'user', 'Summarize the key findings in my documents', 'null', None, None, None, None, None)
2025-12-12 15:43:48,149 - sqlalchemy.engine.Engine - INFO - [cached since 567s ago] (6, 'user', 'Summarize the key findings in my documents', 'null', None, None, None, None, None)
2025-12-12 15:43:48,212 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:43:48,212 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:43:48,212 INFO sqlalchemy.engine.Engine [cached since 566.9s ago] (1, datetime.datetime(2025, 12, 12, 10, 13, 48, 147327), datetime.datetime(2025, 12, 12, 10, 13, 48, 147319), 6)
2025-12-12 15:43:48,212 - sqlalchemy.engine.Engine - INFO - [cached since 566.9s ago] (1, datetime.datetime(2025, 12, 12, 10, 13, 48, 147327), datetime.datetime(2025, 12, 12, 10, 13, 48, 147319), 6)
2025-12-12 15:43:48,275 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:43:48,275 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:43:48,276 INFO sqlalchemy.engine.Engine [cached since 566.9s ago] (7,)
2025-12-12 15:43:48,276 - sqlalchemy.engine.Engine - INFO - [cached since 566.9s ago] (7,)
2025-12-12 15:43:48,339 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET title=$1::VARCHAR, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:43:48,339 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET title=$1::VARCHAR, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:43:48,340 INFO sqlalchemy.engine.Engine [cached since 566.8s ago] ('Summarize the key findings in my documents', 6)
2025-12-12 15:43:48,340 - sqlalchemy.engine.Engine - INFO - [cached since 566.8s ago] ('Summarize the key findings in my documents', 6)
2025-12-12 15:43:48,402 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:43:48,402 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:43:48,402 INFO sqlalchemy.engine.Engine [cached since 567.4s ago] (6, 3)
2025-12-12 15:43:48,402 - sqlalchemy.engine.Engine - INFO - [cached since 567.4s ago] (6, 3)
2025-12-12 15:43:48,479 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.session_id = $1::INTEGER ORDER BY chat_messages.created_at 
 LIMIT $2::INTEGER
2025-12-12 15:43:48,479 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.session_id = $1::INTEGER ORDER BY chat_messages.created_at 
 LIMIT $2::INTEGER
2025-12-12 15:43:48,479 INFO sqlalchemy.engine.Engine [cached since 566.8s ago] (6, 10)
2025-12-12 15:43:48,479 - sqlalchemy.engine.Engine - INFO - [cached since 566.8s ago] (6, 10)
2025-12-12 15:43:49,160 - app.services.weaviate_service - INFO - Found 5 results for query: Summarize the key findings in my documents...
2025-12-12 15:43:49,163 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-5d268836-cae4-43b9-a416-37b63f846573', 'json_data': {'messages': [{'role': 'user', 'content': "You are DocQuery AI, an intelligent document assistant. Your task is to answer questions based on the provided document context.\n\nGuidelines:\n1. Answer based ONLY on the information provided in the context\n2. If the context doesn't contain relevant information, clearly state that\n3. Cite the source documents when providing information\n4. Be concise but comprehensive\n5. If multiple sources provide relevant information, synthesize them\n6. Use a professional and helpful tone\n\n## Document Context:\n[Source 1: Dipesh_Paul_Resume.pdf] (Page 1)\nIndore (Senior Machine Learning Engineer) Dec 2023 - Present Designed and implemented distributed finetuning workflows using QLoRA, reducing training time by ~30% and cutting training costs by ~20%. Built multi-agent orchestration using OpenAI Agent SDK + PydanticAI for real-time task routing, improving routing accuracy and reducing manual triage effort by 40%. Collaborated with cross-functional teams (product, infra) to productionize LLM features with FastAPI and Docker, ensuring low-latency, high-availability deployments.Tensorflow Keras Pytorch Scikit Learn Transformers Ollama OpenCV Spacy RAGPydanticAI Langchain NLP SFT, RLHF, Peft etc. Docker MCP & Tools Function Calling Embeddings Prompt EngineeringJira Git Agent Frameworks Kafka Team Lead Client Handling Innovation Adoption Research Translation Architecture Designing Feb 2023 - July 2023Zdaly, Indore (Senior Machine Learning Engineer) Built an LLM-powered product catalog analyzer that improved lookup accuracy by 45%.\n\n---\n\n[Source 2: Dipesh_Paul_Resume.pdf] (Page 1)\nResearch Translation Architecture Designing Feb 2023 - July 2023Zdaly, Indore (Senior Machine Learning Engineer) Built an LLM-powered product catalog analyzer that improved lookup accuracy by 45%. Designed a vector-based similarity search pipeline using Weaviate for real-time customer recommendations. Migrated legacy NLP models to transformer-based architectures, reducing latency by 50%. Jan 2022  Jan 2023GsLab, Pune (Machine Learning Engineer) Developed a ticket classification model using ULMFit + FastAI that improved routing accuracy by 38%. Automated price prediction system using TensorFlow & Scrapy, processing 100k+ product datapoints. Optimized inference pipeline with Dockerized microservices, cutting server cost by 25%. Aug 2019  Jan 2022Calsoft, Pune (Machine Learning Engineer) Built an avatar generator using GANs (DCGAN, StyleGAN) trained on 143k+ images. Implemented virtualization automation PaaS platform using TensorFlow.\n\n---\n\n[Source 3: Dipesh_Paul_Resume.pdf] (Page 1)\nJan 2022Calsoft, Pune (Machine Learning Engineer) Built an avatar generator using GANs (DCGAN, StyleGAN) trained on 143k+ images. Implemented virtualization automation PaaS platform using TensorFlow. Reduced VM provisioning time by 27% Developed ML pipelines for anomaly detection & forecasting using Scikit-Learn + Kafka. Jan 2019  Jul 2019Calsoft, Pune (Machine Learning Engineer Intern) Created internal POCs in image classification, OCR, and NLP. Built early prototypes of ticket analyzer using traditional NLP + Python. Contributed to optimizing CNN models, improving accuracy by 12%. Senior Machine Learning Engineer | GenAI & LLM Specialist KEY PROJECTS AWARDS Rising Star, 2020, Calsoft Pvt. Ltd. Outstanding Innovator, 2022, Calsoft Pvt. Ltd. Praise, 2024, SystangoMulti-Agent Procurement Platform Built a Multi-Agent platform to streamline procurement, featuring LLM-powered chatbot portals for support, order analysis, and data visualization.\n\n---\n\n[Source 4: Dipesh_Paul_Resume.pdf] (Page 1)\nDIPESH PAUL Indore, MP, 452016 | +91 896 277 5625 dipeshpal17@gmail.com | www.dipeshpal.in PROFESSIONAL SUMMARY Senior Machine Learning Engineer (7 years) specializing in GenAI, LLMs, multi-agent systems, RAG, and model finetuning. Experienced with OpenAI, DeepSeek, Llama, Mistral, QLoRA, PEFT, distributed training, and vector databases (Weaviate, Pinecone, Qdrant). Built and deployed production-grade ML, DL, and LLM systems using FastAPI, Docker, and cloud services, delivering scalable, low-latency AI solutions in enterprise environments. GenAI Machine Learning Deep Learning LLM OpenAI, DeepSeek, Llama, Mistral etc. LLM Finetuning OpenAI Agent SDK LlamaIndex Pinecone, Qdrant, WeaviateSKILLS EXPERIENCE Systango, Indore (Senior Machine Learning Engineer) Dec 2023 - Present Designed and implemented distributed finetuning workflows using QLoRA, reducing training time by ~30% and cutting training costs by ~20%.\n\n---\n\n[Source 5: Dipesh_Paul_Resume.pdf] (Page 1)\nAutomated ticketing processes using advanced machine learning techniques. Utilized NLP and Wikipedia-trained ULMfit Fastai models to analyze tickets and intelligently determine appropriate assignees. Python, Kafka, Docker, FastAPI, AI/ML, Fastai Avatar Generator Built an avatar generation system for portfolio faces, trained on a dataset of approximately 143,000 human and cartoon images. Implemented various neural network architectures, including Deep Convolutional GANs (Style GAN), CNN, and UNet. Python, AI/ML, Tensorflow, OpenCV, DZoneADDITIONAL PROJECTS CERTIFICATIONS Machine Learning: Stanford University (96.47%) Introduction to TensorFlow for Artificial Intelligence, Machine Learning, and Deep Learning: Coursera (99.28%) Supervised Machine Learning (Regression and Classification): DeepLearning.AI, Stanford University (100%) Python Data Structures: University of Michigan (98.40%) RGPV University Bachelor of Engineering in Computer Science, 2019 Acropolis Institute of Tech.\n\n## User Question:\nSummarize the key findings in my documents\n\n## Your Response:"}], 'model': 'llama-3.3-70b-versatile', 'max_tokens': 1024, 'temperature': 0.7}}
2025-12-12 15:43:49,165 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-12-12 15:43:50,389 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Fri, 12 Dec 2025 10:13:50 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'server': 'cloudflare', 'vary': 'Origin', 'x-groq-region': 'bom', 'x-ratelimit-limit-requests': '1000', 'x-ratelimit-limit-tokens': '12000', 'x-ratelimit-remaining-requests': '998', 'x-ratelimit-remaining-tokens': '10686', 'x-ratelimit-reset-requests': '2m52.8s', 'x-ratelimit-reset-tokens': '6.57s', 'x-request-id': 'req_01kc90tw10edyb61enrqk5dejh', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=LewiFcuKBQN5NUaQA7SkJd7JRWuedLJ.axjH8kg6tPE-1765534429.1842365-1.0.1.1-E7mS5ufJygok1cX17mM_3Y97LDQDtzzAgNry0dPqrd050c27JQdbn.97iny0asTny.sk2dV10SXeekzL85Fn3U3dLjQ.9_jWuO2c3W3gKa8t4HHLljPaD5vZ3_7IRtmh; HttpOnly; Secure; Path=/; Domain=groq.com; Expires=Fri, 12 Dec 2025 10:43:50 GMT', 'strict-transport-security': 'max-age=2592000', 'content-encoding': 'gzip', 'cf-ray': '9acc738668913ac9-BOM', 'alt-svc': 'h3=":443"; ma=86400'})
2025-12-12 15:43:50,393 INFO sqlalchemy.engine.Engine INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:43:50,393 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:43:50,393 INFO sqlalchemy.engine.Engine [cached since 569.2s ago] (6, 'assistant', 'Based on the provided document context, the key findings can be summarized as follows:\n\n* The individual, Dipesh Paul, is a Senior Machine Learning ... (1491 characters truncated) ... _Resume.pdf, Source 2: Dipesh_Paul_Resume.pdf, Source 3: Dipesh_Paul_Resume.pdf, Source 4: Dipesh_Paul_Resume.pdf, Source 5: Dipesh_Paul_Resume.pdf].', '[{"document_id": 10, "document_name": "Dipesh_Paul_Resume.pdf", "chunk_id": 1, "content": "Indore (Senior Machine Learning Engineer) Dec 2023 - Prese ... (1941 characters truncated) ... Kafka, Docker, FastAPI, AI/ML, Fastai Avatar Generator Built an avatar generation system for...", "relevance_score": 0.10870695114135742, "page": 1}]', None, None, 1849, None, 'llama-3.3-70b-versatile')
2025-12-12 15:43:50,393 - sqlalchemy.engine.Engine - INFO - [cached since 569.2s ago] (6, 'assistant', 'Based on the provided document context, the key findings can be summarized as follows:\n\n* The individual, Dipesh Paul, is a Senior Machine Learning ... (1491 characters truncated) ... _Resume.pdf, Source 2: Dipesh_Paul_Resume.pdf, Source 3: Dipesh_Paul_Resume.pdf, Source 4: Dipesh_Paul_Resume.pdf, Source 5: Dipesh_Paul_Resume.pdf].', '[{"document_id": 10, "document_name": "Dipesh_Paul_Resume.pdf", "chunk_id": 1, "content": "Indore (Senior Machine Learning Engineer) Dec 2023 - Prese ... (1941 characters truncated) ... Kafka, Docker, FastAPI, AI/ML, Fastai Avatar Generator Built an avatar generation system for...", "relevance_score": 0.10870695114135742, "page": 1}]', None, None, 1849, None, 'llama-3.3-70b-versatile')
2025-12-12 15:43:50,457 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:43:50,457 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:43:50,457 INFO sqlalchemy.engine.Engine [cached since 569.2s ago] (1, datetime.datetime(2025, 12, 12, 10, 13, 50, 391919), datetime.datetime(2025, 12, 12, 10, 13, 50, 391910), 6)
2025-12-12 15:43:50,457 - sqlalchemy.engine.Engine - INFO - [cached since 569.2s ago] (1, datetime.datetime(2025, 12, 12, 10, 13, 50, 391919), datetime.datetime(2025, 12, 12, 10, 13, 50, 391910), 6)
2025-12-12 15:43:50,521 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:43:50,521 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:43:50,522 INFO sqlalchemy.engine.Engine [cached since 569.1s ago] (8,)
2025-12-12 15:43:50,522 - sqlalchemy.engine.Engine - INFO - [cached since 569.1s ago] (8,)
2025-12-12 15:43:50,585 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:43:50,585 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:43:50,585 INFO sqlalchemy.engine.Engine [cached since 569.6s ago] (6, 3)
2025-12-12 15:43:50,585 - sqlalchemy.engine.Engine - INFO - [cached since 569.6s ago] (6, 3)
2025-12-12 15:43:50,647 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:43:50,647 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60960 - "POST /api/v1/chat/sessions/6/messages HTTP/1.1" 200 OK
2025-12-12 15:46:37,783 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:37,783 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:37,783 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:37,783 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:37,784 INFO sqlalchemy.engine.Engine [cached since 743.2s ago] (3,)
2025-12-12 15:46:37,784 - sqlalchemy.engine.Engine - INFO - [cached since 743.2s ago] (3,)
2025-12-12 15:46:37,793 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:37,793 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:37,794 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:37,794 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:37,794 INFO sqlalchemy.engine.Engine [cached since 743.2s ago] (3,)
2025-12-12 15:46:37,794 - sqlalchemy.engine.Engine - INFO - [cached since 743.2s ago] (3,)
2025-12-12 15:46:37,906 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:46:37,906 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:46:37,918 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:46:37,918 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:46:38,175 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:38,175 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:38,176 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:46:38,176 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:46:38,176 INFO sqlalchemy.engine.Engine [cached since 321.2s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 37, 980554))
2025-12-12 15:46:38,176 - sqlalchemy.engine.Engine - INFO - [cached since 321.2s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 37, 980554))
2025-12-12 15:46:38,271 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:38,271 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:38,272 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:38,272 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:38,272 INFO sqlalchemy.engine.Engine [cached since 321.3s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 37, 968201))
2025-12-12 15:46:38,272 - sqlalchemy.engine.Engine - INFO - [cached since 321.3s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 37, 968201))
2025-12-12 15:46:38,300 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:46:38,300 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:49678 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 15:46:38,395 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:38,395 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:38,395 INFO sqlalchemy.engine.Engine [cached since 321.2s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 37, 968201))
2025-12-12 15:46:38,395 - sqlalchemy.engine.Engine - INFO - [cached since 321.2s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 37, 968201))
2025-12-12 15:46:38,457 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:38,457 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:38,458 INFO sqlalchemy.engine.Engine [cached since 321.2s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 37, 968201))
2025-12-12 15:46:38,458 - sqlalchemy.engine.Engine - INFO - [cached since 321.2s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 37, 968201))
2025-12-12 15:46:38,521 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:38,521 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:38,521 INFO sqlalchemy.engine.Engine [cached since 321.1s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 37, 968201))
2025-12-12 15:46:38,521 - sqlalchemy.engine.Engine - INFO - [cached since 321.1s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 37, 968201))
2025-12-12 15:46:38,554 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:38,554 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:38,555 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:38,555 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:38,555 INFO sqlalchemy.engine.Engine [cached since 744s ago] (3,)
2025-12-12 15:46:38,555 - sqlalchemy.engine.Engine - INFO - [cached since 744s ago] (3,)
2025-12-12 15:46:38,583 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:46:38,583 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:49662 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 15:46:38,679 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:46:38,679 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:46:38,834 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:38,834 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:38,834 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:38,834 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:38,835 INFO sqlalchemy.engine.Engine [cached since 744.2s ago] (3,)
2025-12-12 15:46:38,835 - sqlalchemy.engine.Engine - INFO - [cached since 744.2s ago] (3,)
2025-12-12 15:46:38,923 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:38,923 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:38,923 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:46:38,923 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:46:38,923 INFO sqlalchemy.engine.Engine [cached since 321.9s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 38, 741106))
2025-12-12 15:46:38,923 - sqlalchemy.engine.Engine - INFO - [cached since 321.9s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 38, 741106))
2025-12-12 15:46:38,957 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:46:38,957 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:46:39,046 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:46:39,046 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:49678 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 15:46:39,223 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:39,223 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:39,224 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:39,224 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:39,225 INFO sqlalchemy.engine.Engine [cached since 322.2s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 39, 17986))
2025-12-12 15:46:39,225 - sqlalchemy.engine.Engine - INFO - [cached since 322.2s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 39, 17986))
2025-12-12 15:46:39,350 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:39,350 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:39,350 INFO sqlalchemy.engine.Engine [cached since 322.2s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 39, 17986))
2025-12-12 15:46:39,350 - sqlalchemy.engine.Engine - INFO - [cached since 322.2s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 39, 17986))
2025-12-12 15:46:39,414 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:39,414 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:39,414 INFO sqlalchemy.engine.Engine [cached since 322.1s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 39, 17986))
2025-12-12 15:46:39,414 - sqlalchemy.engine.Engine - INFO - [cached since 322.1s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 39, 17986))
2025-12-12 15:46:39,477 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:39,477 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:46:39,478 INFO sqlalchemy.engine.Engine [cached since 322s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 39, 17986))
2025-12-12 15:46:39,478 - sqlalchemy.engine.Engine - INFO - [cached since 322s ago] (3, datetime.datetime(2025, 11, 12, 10, 16, 39, 17986))
2025-12-12 15:46:39,540 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:46:39,540 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:49680 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:49680 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:49662 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 15:46:39,726 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:39,726 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:39,726 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:39,726 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:39,726 INFO sqlalchemy.engine.Engine [cached since 745.1s ago] (3,)
2025-12-12 15:46:39,726 - sqlalchemy.engine.Engine - INFO - [cached since 745.1s ago] (3,)
2025-12-12 15:46:39,735 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:39,735 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:39,736 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:46:39,736 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:46:39,736 INFO sqlalchemy.engine.Engine [cached since 744s ago] (3,)
2025-12-12 15:46:39,736 - sqlalchemy.engine.Engine - INFO - [cached since 744s ago] (3,)
2025-12-12 15:46:39,848 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:46:39,848 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:46:39,858 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:46:39,858 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:46:39,858 INFO sqlalchemy.engine.Engine [cached since 743.9s ago] (3, 100, 0)
2025-12-12 15:46:39,858 - sqlalchemy.engine.Engine - INFO - [cached since 743.9s ago] (3, 100, 0)
2025-12-12 15:46:39,920 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:46:39,920 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:49680 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:46:40,095 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:40,095 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:40,096 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:46:40,096 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:46:40,096 INFO sqlalchemy.engine.Engine [cached since 741.9s ago] (3,)
2025-12-12 15:46:40,096 - sqlalchemy.engine.Engine - INFO - [cached since 741.9s ago] (3,)
2025-12-12 15:46:40,170 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:40,170 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:40,171 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:46:40,171 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:46:40,171 INFO sqlalchemy.engine.Engine [cached since 744.5s ago] (3,)
2025-12-12 15:46:40,171 - sqlalchemy.engine.Engine - INFO - [cached since 744.5s ago] (3,)
2025-12-12 15:46:40,221 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:46:40,221 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:46:40,222 INFO sqlalchemy.engine.Engine [cached since 740.9s ago] (3, 50, 0)
2025-12-12 15:46:40,222 - sqlalchemy.engine.Engine - INFO - [cached since 740.9s ago] (3, 50, 0)
2025-12-12 15:46:40,285 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:46:40,285 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:46:40,295 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:46:40,295 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:46:40,295 INFO sqlalchemy.engine.Engine [cached since 744.3s ago] (3, 100, 0)
2025-12-12 15:46:40,295 - sqlalchemy.engine.Engine - INFO - [cached since 744.3s ago] (3, 100, 0)
INFO:     127.0.0.1:49678 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:46:40,356 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:46:40,356 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:49680 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:46:40,534 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:40,534 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:40,535 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:40,535 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:40,535 INFO sqlalchemy.engine.Engine [cached since 745.9s ago] (3,)
2025-12-12 15:46:40,535 - sqlalchemy.engine.Engine - INFO - [cached since 745.9s ago] (3,)
2025-12-12 15:46:40,657 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:46:40,657 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:46:40,904 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:40,904 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:40,905 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:46:40,905 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:46:40,905 INFO sqlalchemy.engine.Engine [cached since 742.7s ago] (3,)
2025-12-12 15:46:40,905 - sqlalchemy.engine.Engine - INFO - [cached since 742.7s ago] (3,)
2025-12-12 15:46:41,031 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:46:41,031 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:46:41,031 INFO sqlalchemy.engine.Engine [cached since 741.7s ago] (3, 50, 0)
2025-12-12 15:46:41,031 - sqlalchemy.engine.Engine - INFO - [cached since 741.7s ago] (3, 50, 0)
2025-12-12 15:46:41,044 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:41,044 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:41,044 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:41,044 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:41,045 INFO sqlalchemy.engine.Engine [cached since 746.4s ago] (3,)
2025-12-12 15:46:41,045 - sqlalchemy.engine.Engine - INFO - [cached since 746.4s ago] (3,)
2025-12-12 15:46:41,095 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:46:41,095 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:49678 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:46:41,174 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:46:41,174 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:46:41,418 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:41,418 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:41,419 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 15:46:41,419 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 15:46:41,419 INFO sqlalchemy.engine.Engine [cached since 210.7s ago] (3,)
2025-12-12 15:46:41,419 - sqlalchemy.engine.Engine - INFO - [cached since 210.7s ago] (3,)
2025-12-12 15:46:41,542 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 15:46:41,542 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 15:46:41,542 INFO sqlalchemy.engine.Engine [cached since 210.6s ago] (3,)
2025-12-12 15:46:41,542 - sqlalchemy.engine.Engine - INFO - [cached since 210.6s ago] (3,)
2025-12-12 15:46:41,604 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:46:41,604 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:49680 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
2025-12-12 15:46:41,853 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:41,853 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:41,854 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:41,854 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:46:41,854 INFO sqlalchemy.engine.Engine [cached since 747.3s ago] (3,)
2025-12-12 15:46:41,854 - sqlalchemy.engine.Engine - INFO - [cached since 747.3s ago] (3,)
2025-12-12 15:46:41,978 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:46:41,978 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:46:42,223 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:42,223 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:42,223 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 15:46:42,223 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 15:46:42,223 INFO sqlalchemy.engine.Engine [cached since 211.5s ago] (3,)
2025-12-12 15:46:42,223 - sqlalchemy.engine.Engine - INFO - [cached since 211.5s ago] (3,)
2025-12-12 15:46:42,483 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 15:46:42,483 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 15:46:42,483 INFO sqlalchemy.engine.Engine [cached since 211.6s ago] (3,)
2025-12-12 15:46:42,483 - sqlalchemy.engine.Engine - INFO - [cached since 211.6s ago] (3,)
2025-12-12 15:46:42,605 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:46:42,605 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:49680 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:51078 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:51078 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
2025-12-12 15:46:58,925 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:58,925 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:58,925 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:46:58,925 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:46:58,926 INFO sqlalchemy.engine.Engine [cached since 763.2s ago] (3,)
2025-12-12 15:46:58,926 - sqlalchemy.engine.Engine - INFO - [cached since 763.2s ago] (3,)
2025-12-12 15:46:59,049 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:46:59,049 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:46:59,050 INFO sqlalchemy.engine.Engine [cached since 763.1s ago] (3, 10, 0)
2025-12-12 15:46:59,050 - sqlalchemy.engine.Engine - INFO - [cached since 763.1s ago] (3, 10, 0)
2025-12-12 15:46:59,124 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:46:59,124 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:51078 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 15:46:59,378 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:46:59,378 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:46:59,378 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:46:59,378 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:46:59,379 INFO sqlalchemy.engine.Engine [cached since 763.7s ago] (3,)
2025-12-12 15:46:59,379 - sqlalchemy.engine.Engine - INFO - [cached since 763.7s ago] (3,)
2025-12-12 15:46:59,503 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:46:59,503 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:46:59,503 INFO sqlalchemy.engine.Engine [cached since 763.6s ago] (3, 10, 0)
2025-12-12 15:46:59,503 - sqlalchemy.engine.Engine - INFO - [cached since 763.6s ago] (3, 10, 0)
2025-12-12 15:46:59,565 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:46:59,565 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:51078 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 15:47:30,474 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:47:30,474 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:47:30,475 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:47:30,475 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:47:30,475 INFO sqlalchemy.engine.Engine [cached since 795.9s ago] (3,)
2025-12-12 15:47:30,475 - sqlalchemy.engine.Engine - INFO - [cached since 795.9s ago] (3,)
2025-12-12 15:47:30,598 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:47:30,598 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:47:30,842 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:47:30,842 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:47:30,843 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 15:47:30,843 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 15:47:30,843 INFO sqlalchemy.engine.Engine [cached since 260.1s ago] (3,)
2025-12-12 15:47:30,843 - sqlalchemy.engine.Engine - INFO - [cached since 260.1s ago] (3,)
2025-12-12 15:47:30,966 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 15:47:30,966 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 15:47:30,967 INFO sqlalchemy.engine.Engine [cached since 260s ago] (3,)
2025-12-12 15:47:30,967 - sqlalchemy.engine.Engine - INFO - [cached since 260s ago] (3,)
2025-12-12 15:47:31,029 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:47:31,029 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:50170 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
2025-12-12 15:47:31,282 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:47:31,282 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:47:31,283 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:47:31,283 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:47:31,283 INFO sqlalchemy.engine.Engine [cached since 796.7s ago] (3,)
2025-12-12 15:47:31,283 - sqlalchemy.engine.Engine - INFO - [cached since 796.7s ago] (3,)
2025-12-12 15:47:31,408 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:47:31,408 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:47:31,651 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:47:31,651 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:47:31,652 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 15:47:31,652 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 15:47:31,653 INFO sqlalchemy.engine.Engine [cached since 260.9s ago] (3,)
2025-12-12 15:47:31,653 - sqlalchemy.engine.Engine - INFO - [cached since 260.9s ago] (3,)
2025-12-12 15:47:31,776 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 15:47:31,776 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 15:47:31,777 INFO sqlalchemy.engine.Engine [cached since 260.9s ago] (3,)
2025-12-12 15:47:31,777 - sqlalchemy.engine.Engine - INFO - [cached since 260.9s ago] (3,)
2025-12-12 15:47:31,839 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:47:31,839 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:50170 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:35074 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:35074 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 15:47:33,370 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:47:33,370 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:47:33,371 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:47:33,371 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:47:33,371 INFO sqlalchemy.engine.Engine [cached since 798.8s ago] (3,)
2025-12-12 15:47:33,371 - sqlalchemy.engine.Engine - INFO - [cached since 798.8s ago] (3,)
2025-12-12 15:47:33,378 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:47:33,378 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:47:33,379 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:47:33,379 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:47:33,380 INFO sqlalchemy.engine.Engine [cached since 797.7s ago] (3,)
2025-12-12 15:47:33,380 - sqlalchemy.engine.Engine - INFO - [cached since 797.7s ago] (3,)
2025-12-12 15:47:33,493 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:47:33,493 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:47:33,503 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:47:33,503 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:47:33,504 INFO sqlalchemy.engine.Engine [cached since 797.6s ago] (3, 100, 0)
2025-12-12 15:47:33,504 - sqlalchemy.engine.Engine - INFO - [cached since 797.6s ago] (3, 100, 0)
2025-12-12 15:47:33,567 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:47:33,567 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:35074 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:47:33,738 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:47:33,738 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:47:33,738 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:47:33,738 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:47:33,739 INFO sqlalchemy.engine.Engine [cached since 795.5s ago] (3,)
2025-12-12 15:47:33,739 - sqlalchemy.engine.Engine - INFO - [cached since 795.5s ago] (3,)
2025-12-12 15:47:33,818 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:47:33,818 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:47:33,819 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:47:33,819 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:47:33,820 INFO sqlalchemy.engine.Engine [cached since 798.1s ago] (3,)
2025-12-12 15:47:33,820 - sqlalchemy.engine.Engine - INFO - [cached since 798.1s ago] (3,)
2025-12-12 15:47:33,866 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:47:33,866 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:47:33,866 INFO sqlalchemy.engine.Engine [cached since 794.6s ago] (3, 50, 0)
2025-12-12 15:47:33,866 - sqlalchemy.engine.Engine - INFO - [cached since 794.6s ago] (3, 50, 0)
2025-12-12 15:47:33,929 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:47:33,929 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:47:33,942 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:47:33,942 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:47:33,943 INFO sqlalchemy.engine.Engine [cached since 798s ago] (3, 100, 0)
2025-12-12 15:47:33,943 - sqlalchemy.engine.Engine - INFO - [cached since 798s ago] (3, 100, 0)
INFO:     127.0.0.1:50170 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:47:34,005 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:47:34,005 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:35074 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:47:34,183 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:47:34,183 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:47:34,184 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:47:34,184 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:47:34,185 INFO sqlalchemy.engine.Engine [cached since 799.6s ago] (3,)
2025-12-12 15:47:34,185 - sqlalchemy.engine.Engine - INFO - [cached since 799.6s ago] (3,)
2025-12-12 15:47:34,317 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:47:34,317 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:47:34,574 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:47:34,574 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:47:34,575 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:47:34,575 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:47:34,575 INFO sqlalchemy.engine.Engine [cached since 796.4s ago] (3,)
2025-12-12 15:47:34,575 - sqlalchemy.engine.Engine - INFO - [cached since 796.4s ago] (3,)
2025-12-12 15:47:34,697 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:47:34,697 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:47:34,697 INFO sqlalchemy.engine.Engine [cached since 795.4s ago] (3, 50, 0)
2025-12-12 15:47:34,697 - sqlalchemy.engine.Engine - INFO - [cached since 795.4s ago] (3, 50, 0)
2025-12-12 15:47:34,760 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:47:34,760 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:50170 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53486 - "OPTIONS /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53490 - "OPTIONS /api/v1/documents?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53500 - "OPTIONS /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53510 - "OPTIONS /api/v1/documents?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53486 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:53486 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:53510 - "OPTIONS /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53486 - "OPTIONS /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:51:12,623 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:51:12,623 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:51:12,623 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:51:12,623 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:51:12,623 INFO sqlalchemy.engine.Engine [cached since 1018s ago] (3,)
2025-12-12 15:51:12,623 - sqlalchemy.engine.Engine - INFO - [cached since 1018s ago] (3,)
2025-12-12 15:51:12,668 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:51:12,668 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:51:12,669 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:51:12,669 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:51:12,670 INFO sqlalchemy.engine.Engine [cached since 1017s ago] (3,)
2025-12-12 15:51:12,670 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] (3,)
2025-12-12 15:51:12,748 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:51:12,748 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:51:12,799 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:51:12,799 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:51:12,799 INFO sqlalchemy.engine.Engine [cached since 1017s ago] (3, 100, 0)
2025-12-12 15:51:12,799 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] (3, 100, 0)
2025-12-12 15:51:12,869 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:51:12,869 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:53500 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:51:13,001 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:51:13,001 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:51:13,003 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:51:13,003 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:51:13,004 INFO sqlalchemy.engine.Engine [cached since 1015s ago] (3,)
2025-12-12 15:51:13,004 - sqlalchemy.engine.Engine - INFO - [cached since 1015s ago] (3,)
2025-12-12 15:51:13,126 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:51:13,126 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:51:13,126 INFO sqlalchemy.engine.Engine [cached since 1014s ago] (3, 50, 0)
2025-12-12 15:51:13,126 - sqlalchemy.engine.Engine - INFO - [cached since 1014s ago] (3, 50, 0)
2025-12-12 15:51:13,128 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:51:13,128 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:51:13,128 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:51:13,128 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:51:13,130 INFO sqlalchemy.engine.Engine [cached since 1017s ago] (3,)
2025-12-12 15:51:13,130 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] (3,)
2025-12-12 15:51:13,190 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:51:13,190 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:53514 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
2025-12-12 15:51:13,253 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:51:13,253 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:51:13,254 INFO sqlalchemy.engine.Engine [cached since 1017s ago] (3, 100, 0)
2025-12-12 15:51:13,254 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] (3, 100, 0)
2025-12-12 15:51:13,315 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:51:13,315 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:53500 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:51:13,442 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:51:13,442 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:51:13,442 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:51:13,442 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:51:13,443 INFO sqlalchemy.engine.Engine [cached since 1019s ago] (3,)
2025-12-12 15:51:13,443 - sqlalchemy.engine.Engine - INFO - [cached since 1019s ago] (3,)
2025-12-12 15:51:13,565 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:51:13,565 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:51:13,812 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:51:13,812 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:51:13,815 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:51:13,815 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 15:51:13,816 INFO sqlalchemy.engine.Engine [cached since 1016s ago] (3,)
2025-12-12 15:51:13,816 - sqlalchemy.engine.Engine - INFO - [cached since 1016s ago] (3,)
2025-12-12 15:51:13,938 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:51:13,938 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:51:13,939 INFO sqlalchemy.engine.Engine [cached since 1015s ago] (3, 50, 0)
2025-12-12 15:51:13,939 - sqlalchemy.engine.Engine - INFO - [cached since 1015s ago] (3, 50, 0)
2025-12-12 15:51:14,000 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:51:14,000 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:53514 - "GET /api/v1/chat/sessions?page=1&per_page=50 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55390 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:55390 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 15:52:54,988 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:52:54,988 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:52:54,988 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:52:54,988 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:52:54,988 INFO sqlalchemy.engine.Engine [cached since 1119s ago] (3,)
2025-12-12 15:52:54,988 - sqlalchemy.engine.Engine - INFO - [cached since 1119s ago] (3,)
2025-12-12 15:52:55,117 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:52:55,117 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:52:55,118 INFO sqlalchemy.engine.Engine [cached since 1119s ago] (3, 100, 0)
2025-12-12 15:52:55,118 - sqlalchemy.engine.Engine - INFO - [cached since 1119s ago] (3, 100, 0)
2025-12-12 15:52:55,181 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:52:55,181 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:55390 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:52:55,594 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:52:55,594 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:52:55,594 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:52:55,594 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:52:55,594 INFO sqlalchemy.engine.Engine [cached since 1120s ago] (3,)
2025-12-12 15:52:55,594 - sqlalchemy.engine.Engine - INFO - [cached since 1120s ago] (3,)
2025-12-12 15:52:55,717 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:52:55,717 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:52:55,718 INFO sqlalchemy.engine.Engine [cached since 1120s ago] (3, 100, 0)
2025-12-12 15:52:55,718 - sqlalchemy.engine.Engine - INFO - [cached since 1120s ago] (3, 100, 0)
2025-12-12 15:52:55,779 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:52:55,779 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:55390 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:37978 - "OPTIONS /api/v1/chat/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:37984 - "POST /api/v1/chat/sessions HTTP/1.1" 401 Unauthorized
2025-12-12 15:57:39,062 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:57:39,062 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:57:39,062 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:57:39,062 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:57:39,063 INFO sqlalchemy.engine.Engine [cached since 1404s ago] (3,)
2025-12-12 15:57:39,063 - sqlalchemy.engine.Engine - INFO - [cached since 1404s ago] (3,)
/home/ubox133/projects/DocQuery AI/backend/app/core/security.py:37: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  expire = datetime.utcnow() + timedelta(
/home/ubox133/projects/DocQuery AI/backend/app/core/security.py:63: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  expire = datetime.utcnow() + timedelta(
2025-12-12 15:57:39,186 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:57:39,186 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37984 - "POST /api/v1/auth/refresh?refresh_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIzIiwiZXhwIjoxNzY2MTM4MjIwLCJ0eXBlIjoicmVmcmVzaCJ9.ipanbnrRv6ptsMrd8vEYjgHrrtpFukpYI9HDPXCNjoQ HTTP/1.1" 200 OK
2025-12-12 15:57:39,446 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:57:39,446 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:57:39,447 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:57:39,447 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:57:39,447 INFO sqlalchemy.engine.Engine [cached since 1405s ago] (3,)
2025-12-12 15:57:39,447 - sqlalchemy.engine.Engine - INFO - [cached since 1405s ago] (3,)
2025-12-12 15:57:39,570 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:57:39,570 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:57:39,816 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:57:39,816 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:57:39,817 INFO sqlalchemy.engine.Engine INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 15:57:39,817 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 15:57:39,817 INFO sqlalchemy.engine.Engine [cached since 1400s ago] (3, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 15:57:39,817 - sqlalchemy.engine.Engine - INFO - [cached since 1400s ago] (3, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 15:57:39,942 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:57:39,942 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 15:57:39,943 INFO sqlalchemy.engine.Engine [cached since 1400s ago] (7,)
2025-12-12 15:57:39,943 - sqlalchemy.engine.Engine - INFO - [cached since 1400s ago] (7,)
2025-12-12 15:57:40,007 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:57:40,007 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37984 - "POST /api/v1/chat/sessions HTTP/1.1" 201 Created
INFO:     127.0.0.1:37984 - "OPTIONS /api/v1/chat/sessions/7/messages HTTP/1.1" 200 OK
2025-12-12 15:57:40,268 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:57:40,268 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:57:40,269 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:57:40,269 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:57:40,269 INFO sqlalchemy.engine.Engine [cached since 1406s ago] (3,)
2025-12-12 15:57:40,269 - sqlalchemy.engine.Engine - INFO - [cached since 1406s ago] (3,)
2025-12-12 15:57:40,393 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:57:40,393 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:57:40,635 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:57:40,635 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:57:40,636 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:57:40,636 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:57:40,636 INFO sqlalchemy.engine.Engine [cached since 1400s ago] (7, 3)
2025-12-12 15:57:40,636 - sqlalchemy.engine.Engine - INFO - [cached since 1400s ago] (7, 3)
2025-12-12 15:57:40,764 INFO sqlalchemy.engine.Engine INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:57:40,764 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:57:40,765 INFO sqlalchemy.engine.Engine [cached since 1400s ago] (7, 'user', 'Summarize the key findings', 'null', None, None, None, None, None)
2025-12-12 15:57:40,765 - sqlalchemy.engine.Engine - INFO - [cached since 1400s ago] (7, 'user', 'Summarize the key findings', 'null', None, None, None, None, None)
2025-12-12 15:57:40,827 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:57:40,827 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:57:40,828 INFO sqlalchemy.engine.Engine [cached since 1400s ago] (1, datetime.datetime(2025, 12, 12, 10, 27, 40, 763509), datetime.datetime(2025, 12, 12, 10, 27, 40, 763501), 7)
2025-12-12 15:57:40,828 - sqlalchemy.engine.Engine - INFO - [cached since 1400s ago] (1, datetime.datetime(2025, 12, 12, 10, 27, 40, 763509), datetime.datetime(2025, 12, 12, 10, 27, 40, 763501), 7)
2025-12-12 15:57:40,891 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:57:40,891 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:57:40,891 INFO sqlalchemy.engine.Engine [cached since 1399s ago] (9,)
2025-12-12 15:57:40,891 - sqlalchemy.engine.Engine - INFO - [cached since 1399s ago] (9,)
2025-12-12 15:57:40,955 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET title=$1::VARCHAR, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:57:40,955 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET title=$1::VARCHAR, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 15:57:40,955 INFO sqlalchemy.engine.Engine [cached since 1399s ago] ('Summarize the key findings', 7)
2025-12-12 15:57:40,955 - sqlalchemy.engine.Engine - INFO - [cached since 1399s ago] ('Summarize the key findings', 7)
2025-12-12 15:57:41,018 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:57:41,018 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:57:41,018 INFO sqlalchemy.engine.Engine [cached since 1400s ago] (7, 3)
2025-12-12 15:57:41,018 - sqlalchemy.engine.Engine - INFO - [cached since 1400s ago] (7, 3)
2025-12-12 15:57:41,081 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.session_id = $1::INTEGER ORDER BY chat_messages.created_at 
 LIMIT $2::INTEGER
2025-12-12 15:57:41,081 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.session_id = $1::INTEGER ORDER BY chat_messages.created_at 
 LIMIT $2::INTEGER
2025-12-12 15:57:41,081 INFO sqlalchemy.engine.Engine [cached since 1399s ago] (7, 10)
2025-12-12 15:57:41,081 - sqlalchemy.engine.Engine - INFO - [cached since 1399s ago] (7, 10)
2025-12-12 15:57:45,286 - app.services.weaviate_service - INFO - Found 5 results for query: Summarize the key findings...
2025-12-12 15:57:45,288 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-be573aeb-c23b-42b3-bf72-f03bc517d41e', 'json_data': {'messages': [{'role': 'user', 'content': "You are DocQuery AI, an intelligent document assistant. Your task is to answer questions based on the provided document context.\n\nGuidelines:\n1. Answer based ONLY on the information provided in the context\n2. If the context doesn't contain relevant information, clearly state that\n3. Cite the source documents when providing information\n4. Be concise but comprehensive\n5. If multiple sources provide relevant information, synthesize them\n6. Use a professional and helpful tone\n\n## Document Context:\n[Source 1: Dipesh_Paul_Resume.pdf] (Page 1)\nIndore (Senior Machine Learning Engineer) Dec 2023 - Present Designed and implemented distributed finetuning workflows using QLoRA, reducing training time by ~30% and cutting training costs by ~20%. Built multi-agent orchestration using OpenAI Agent SDK + PydanticAI for real-time task routing, improving routing accuracy and reducing manual triage effort by 40%. Collaborated with cross-functional teams (product, infra) to productionize LLM features with FastAPI and Docker, ensuring low-latency, high-availability deployments.Tensorflow Keras Pytorch Scikit Learn Transformers Ollama OpenCV Spacy RAGPydanticAI Langchain NLP SFT, RLHF, Peft etc. Docker MCP & Tools Function Calling Embeddings Prompt EngineeringJira Git Agent Frameworks Kafka Team Lead Client Handling Innovation Adoption Research Translation Architecture Designing Feb 2023 - July 2023Zdaly, Indore (Senior Machine Learning Engineer) Built an LLM-powered product catalog analyzer that improved lookup accuracy by 45%.\n\n---\n\n[Source 2: Dipesh_Paul_Resume.pdf] (Page 1)\nJan 2022Calsoft, Pune (Machine Learning Engineer) Built an avatar generator using GANs (DCGAN, StyleGAN) trained on 143k+ images. Implemented virtualization automation PaaS platform using TensorFlow. Reduced VM provisioning time by 27% Developed ML pipelines for anomaly detection & forecasting using Scikit-Learn + Kafka. Jan 2019  Jul 2019Calsoft, Pune (Machine Learning Engineer Intern) Created internal POCs in image classification, OCR, and NLP. Built early prototypes of ticket analyzer using traditional NLP + Python. Contributed to optimizing CNN models, improving accuracy by 12%. Senior Machine Learning Engineer | GenAI & LLM Specialist KEY PROJECTS AWARDS Rising Star, 2020, Calsoft Pvt. Ltd. Outstanding Innovator, 2022, Calsoft Pvt. Ltd. Praise, 2024, SystangoMulti-Agent Procurement Platform Built a Multi-Agent platform to streamline procurement, featuring LLM-powered chatbot portals for support, order analysis, and data visualization.\n\n---\n\n[Source 3: Dipesh_Paul_Resume.pdf] (Page 1)\nResearch Translation Architecture Designing Feb 2023 - July 2023Zdaly, Indore (Senior Machine Learning Engineer) Built an LLM-powered product catalog analyzer that improved lookup accuracy by 45%. Designed a vector-based similarity search pipeline using Weaviate for real-time customer recommendations. Migrated legacy NLP models to transformer-based architectures, reducing latency by 50%. Jan 2022  Jan 2023GsLab, Pune (Machine Learning Engineer) Developed a ticket classification model using ULMFit + FastAI that improved routing accuracy by 38%. Automated price prediction system using TensorFlow & Scrapy, processing 100k+ product datapoints. Optimized inference pipeline with Dockerized microservices, cutting server cost by 25%. Aug 2019  Jan 2022Calsoft, Pune (Machine Learning Engineer) Built an avatar generator using GANs (DCGAN, StyleGAN) trained on 143k+ images. Implemented virtualization automation PaaS platform using TensorFlow.\n\n---\n\n[Source 4: Dipesh_Paul_Resume.pdf] (Page 1)\nDIPESH PAUL Indore, MP, 452016 | +91 896 277 5625 dipeshpal17@gmail.com | www.dipeshpal.in PROFESSIONAL SUMMARY Senior Machine Learning Engineer (7 years) specializing in GenAI, LLMs, multi-agent systems, RAG, and model finetuning. Experienced with OpenAI, DeepSeek, Llama, Mistral, QLoRA, PEFT, distributed training, and vector databases (Weaviate, Pinecone, Qdrant). Built and deployed production-grade ML, DL, and LLM systems using FastAPI, Docker, and cloud services, delivering scalable, low-latency AI solutions in enterprise environments. GenAI Machine Learning Deep Learning LLM OpenAI, DeepSeek, Llama, Mistral etc. LLM Finetuning OpenAI Agent SDK LlamaIndex Pinecone, Qdrant, WeaviateSKILLS EXPERIENCE Systango, Indore (Senior Machine Learning Engineer) Dec 2023 - Present Designed and implemented distributed finetuning workflows using QLoRA, reducing training time by ~30% and cutting training costs by ~20%.\n\n---\n\n[Source 5: Dipesh_Paul_Resume.pdf] (Page 1)\nAutomated ticketing processes using advanced machine learning techniques. Utilized NLP and Wikipedia-trained ULMfit Fastai models to analyze tickets and intelligently determine appropriate assignees. Python, Kafka, Docker, FastAPI, AI/ML, Fastai Avatar Generator Built an avatar generation system for portfolio faces, trained on a dataset of approximately 143,000 human and cartoon images. Implemented various neural network architectures, including Deep Convolutional GANs (Style GAN), CNN, and UNet. Python, AI/ML, Tensorflow, OpenCV, DZoneADDITIONAL PROJECTS CERTIFICATIONS Machine Learning: Stanford University (96.47%) Introduction to TensorFlow for Artificial Intelligence, Machine Learning, and Deep Learning: Coursera (99.28%) Supervised Machine Learning (Regression and Classification): DeepLearning.AI, Stanford University (100%) Python Data Structures: University of Michigan (98.40%) RGPV University Bachelor of Engineering in Computer Science, 2019 Acropolis Institute of Tech.\n\n## User Question:\nSummarize the key findings\n\n## Your Response:"}], 'model': 'llama-3.3-70b-versatile', 'max_tokens': 1024, 'temperature': 0.7}}
2025-12-12 15:57:45,289 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-12-12 15:57:46,448 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Fri, 12 Dec 2025 10:27:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'server': 'cloudflare', 'vary': 'Origin', 'x-groq-region': 'bom', 'x-ratelimit-limit-requests': '1000', 'x-ratelimit-limit-tokens': '12000', 'x-ratelimit-remaining-requests': '999', 'x-ratelimit-remaining-tokens': '10689', 'x-ratelimit-reset-requests': '1m26.4s', 'x-ratelimit-reset-tokens': '6.555s', 'x-request-id': 'req_01kc91mckwfvq94gw4sdp11hw6', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=hlhUcOwBIbfGgffNNOfyYHQeQDxTe90HWRBc6AH_Eck-1765535265.3683028-1.0.1.1-Pw3dNHi5SmJ12S0ImYwEJSnHUSJyWEjp9QUS7xKzBmc3hau.U1dt1Ufn_PT5d8Hreax.Uciu_l2pLvWOyoHB44tekIU9JDHFIKM7LGlsy96MQcglbeFTxZP7mOa1D_Lo; HttpOnly; Secure; Path=/; Domain=groq.com; Expires=Fri, 12 Dec 2025 10:57:46 GMT', 'strict-transport-security': 'max-age=2592000', 'content-encoding': 'gzip', 'cf-ray': '9acc87f08a468513-BOM', 'alt-svc': 'h3=":443"; ma=86400'})
2025-12-12 15:57:46,452 INFO sqlalchemy.engine.Engine INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:57:46,452 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 15:57:46,453 INFO sqlalchemy.engine.Engine [cached since 1405s ago] (7, 'assistant', "Based on the provided document context, the key findings are:\n\n1. **Improved Efficiency**: The implementation of distributed finetuning workflows u ... (1061 characters truncated) ... ng, and GenAI, as well as their ability to develop and implement efficient and accurate solutions. [Source 1, Source 2, Source 3, Source 4, Source 5]", '[{"document_id": 10, "document_name": "Dipesh_Paul_Resume.pdf", "chunk_id": 1, "content": "Indore (Senior Machine Learning Engineer) Dec 2023 - Prese ... (1942 characters truncated) ... Kafka, Docker, FastAPI, AI/ML, Fastai Avatar Generator Built an avatar generation system for...", "relevance_score": 0.05341231822967529, "page": 1}]', None, None, 5307, None, 'llama-3.3-70b-versatile')
2025-12-12 15:57:46,453 - sqlalchemy.engine.Engine - INFO - [cached since 1405s ago] (7, 'assistant', "Based on the provided document context, the key findings are:\n\n1. **Improved Efficiency**: The implementation of distributed finetuning workflows u ... (1061 characters truncated) ... ng, and GenAI, as well as their ability to develop and implement efficient and accurate solutions. [Source 1, Source 2, Source 3, Source 4, Source 5]", '[{"document_id": 10, "document_name": "Dipesh_Paul_Resume.pdf", "chunk_id": 1, "content": "Indore (Senior Machine Learning Engineer) Dec 2023 - Prese ... (1942 characters truncated) ... Kafka, Docker, FastAPI, AI/ML, Fastai Avatar Generator Built an avatar generation system for...", "relevance_score": 0.05341231822967529, "page": 1}]', None, None, 5307, None, 'llama-3.3-70b-versatile')
2025-12-12 15:57:46,520 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:57:46,520 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 15:57:46,520 INFO sqlalchemy.engine.Engine [cached since 1405s ago] (1, datetime.datetime(2025, 12, 12, 10, 27, 46, 451292), datetime.datetime(2025, 12, 12, 10, 27, 46, 451284), 7)
2025-12-12 15:57:46,520 - sqlalchemy.engine.Engine - INFO - [cached since 1405s ago] (1, datetime.datetime(2025, 12, 12, 10, 27, 46, 451292), datetime.datetime(2025, 12, 12, 10, 27, 46, 451284), 7)
2025-12-12 15:57:46,585 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:57:46,585 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 15:57:46,586 INFO sqlalchemy.engine.Engine [cached since 1405s ago] (10,)
2025-12-12 15:57:46,586 - sqlalchemy.engine.Engine - INFO - [cached since 1405s ago] (10,)
2025-12-12 15:57:46,650 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:57:46,650 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 15:57:46,651 INFO sqlalchemy.engine.Engine [cached since 1406s ago] (7, 3)
2025-12-12 15:57:46,651 - sqlalchemy.engine.Engine - INFO - [cached since 1406s ago] (7, 3)
2025-12-12 15:57:46,713 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:57:46,713 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37978 - "POST /api/v1/chat/sessions/7/messages HTTP/1.1" 200 OK
INFO:     127.0.0.1:45596 - "OPTIONS /api/v1/documents?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45612 - "OPTIONS /api/v1/documents?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45616 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:45616 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:45616 - "OPTIONS /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 15:58:03,576 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:03,576 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:03,576 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:03,576 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:03,577 INFO sqlalchemy.engine.Engine [cached since 1428s ago] (3,)
2025-12-12 15:58:03,577 - sqlalchemy.engine.Engine - INFO - [cached since 1428s ago] (3,)
2025-12-12 15:58:03,700 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:03,700 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:03,701 INFO sqlalchemy.engine.Engine [cached since 1428s ago] (3, 10, 0)
2025-12-12 15:58:03,701 - sqlalchemy.engine.Engine - INFO - [cached since 1428s ago] (3, 10, 0)
2025-12-12 15:58:03,763 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:58:03,763 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:45612 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45616 - "OPTIONS /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:45596 - "OPTIONS /api/v1/documents?page=1&page_size=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45624 - "OPTIONS /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:45616 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:45632 - "OPTIONS /api/v1/documents?page=1&page_size=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45616 - "OPTIONS /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45624 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
2025-12-12 15:58:04,015 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:04,015 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:04,016 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:04,016 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:04,016 INFO sqlalchemy.engine.Engine [cached since 1428s ago] (3,)
2025-12-12 15:58:04,016 - sqlalchemy.engine.Engine - INFO - [cached since 1428s ago] (3,)
2025-12-12 15:58:04,144 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:04,144 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:04,145 INFO sqlalchemy.engine.Engine [cached since 1428s ago] (3, 10, 0)
2025-12-12 15:58:04,145 - sqlalchemy.engine.Engine - INFO - [cached since 1428s ago] (3, 10, 0)
2025-12-12 15:58:04,155 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:04,155 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:04,156 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:04,156 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:04,156 INFO sqlalchemy.engine.Engine [cached since 1428s ago] (3,)
2025-12-12 15:58:04,156 - sqlalchemy.engine.Engine - INFO - [cached since 1428s ago] (3,)
2025-12-12 15:58:04,208 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:58:04,208 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:58:04,269 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:04,269 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:04,269 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:04,269 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:04,270 INFO sqlalchemy.engine.Engine [cached since 1429s ago] (3,)
2025-12-12 15:58:04,270 - sqlalchemy.engine.Engine - INFO - [cached since 1429s ago] (3,)
INFO:     127.0.0.1:45612 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 15:58:04,280 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:04,280 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:04,280 INFO sqlalchemy.engine.Engine [cached since 1428s ago] (3, 5, 0)
2025-12-12 15:58:04,280 - sqlalchemy.engine.Engine - INFO - [cached since 1428s ago] (3, 5, 0)
2025-12-12 15:58:04,343 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:58:04,343 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:58:04,392 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:58:04,392 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:58:04,392 INFO sqlalchemy.engine.Engine [cached since 873s ago] (3,)
2025-12-12 15:58:04,392 - sqlalchemy.engine.Engine - INFO - [cached since 873s ago] (3,)
INFO:     127.0.0.1:45632 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
2025-12-12 15:58:04,453 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:58:04,453 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:45638 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
2025-12-12 15:58:04,593 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:04,593 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:04,594 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:04,594 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:04,594 INFO sqlalchemy.engine.Engine [cached since 1429s ago] (3,)
2025-12-12 15:58:04,594 - sqlalchemy.engine.Engine - INFO - [cached since 1429s ago] (3,)
2025-12-12 15:58:04,709 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:04,709 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:04,710 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:04,710 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:04,710 INFO sqlalchemy.engine.Engine [cached since 1429s ago] (3,)
2025-12-12 15:58:04,710 - sqlalchemy.engine.Engine - INFO - [cached since 1429s ago] (3,)
2025-12-12 15:58:04,716 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:04,716 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:04,716 INFO sqlalchemy.engine.Engine [cached since 1429s ago] (3, 5, 0)
2025-12-12 15:58:04,716 - sqlalchemy.engine.Engine - INFO - [cached since 1429s ago] (3, 5, 0)
2025-12-12 15:58:04,779 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:58:04,779 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:58:04,834 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:58:04,834 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:58:04,834 INFO sqlalchemy.engine.Engine [cached since 873.4s ago] (3,)
2025-12-12 15:58:04,834 - sqlalchemy.engine.Engine - INFO - [cached since 873.4s ago] (3,)
INFO:     127.0.0.1:45632 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
2025-12-12 15:58:04,896 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:58:04,896 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:45638 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:45638 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:45638 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 15:58:05,734 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:05,734 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:05,735 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:05,735 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:05,735 INFO sqlalchemy.engine.Engine [cached since 1430s ago] (3,)
2025-12-12 15:58:05,735 - sqlalchemy.engine.Engine - INFO - [cached since 1430s ago] (3,)
2025-12-12 15:58:05,858 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:05,858 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:05,858 INFO sqlalchemy.engine.Engine [cached since 1430s ago] (3, 100, 0)
2025-12-12 15:58:05,858 - sqlalchemy.engine.Engine - INFO - [cached since 1430s ago] (3, 100, 0)
2025-12-12 15:58:05,921 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:58:05,921 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:45638 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:58:06,173 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:06,173 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:06,174 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:06,174 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:06,174 INFO sqlalchemy.engine.Engine [cached since 1430s ago] (3,)
2025-12-12 15:58:06,174 - sqlalchemy.engine.Engine - INFO - [cached since 1430s ago] (3,)
2025-12-12 15:58:06,300 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:06,300 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:06,301 INFO sqlalchemy.engine.Engine [cached since 1430s ago] (3, 100, 0)
2025-12-12 15:58:06,301 - sqlalchemy.engine.Engine - INFO - [cached since 1430s ago] (3, 100, 0)
2025-12-12 15:58:06,362 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:58:06,362 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:45638 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45638 - "OPTIONS /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45612 - "OPTIONS /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45616 - "OPTIONS /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 15:58:08,463 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:08,463 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:08,463 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:58:08,463 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:58:08,463 INFO sqlalchemy.engine.Engine [cached since 1434s ago] (3,)
2025-12-12 15:58:08,463 - sqlalchemy.engine.Engine - INFO - [cached since 1434s ago] (3,)
2025-12-12 15:58:08,466 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:08,466 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:08,466 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:58:08,466 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:58:08,466 INFO sqlalchemy.engine.Engine [cached since 1434s ago] (3,)
2025-12-12 15:58:08,466 - sqlalchemy.engine.Engine - INFO - [cached since 1434s ago] (3,)
2025-12-12 15:58:08,586 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:58:08,586 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:58:08,587 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:58:08,587 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:58:08,833 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:08,833 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:08,834 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:08,834 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:08,834 INFO sqlalchemy.engine.Engine [cached since 1012s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 8, 650931))
2025-12-12 15:58:08,834 - sqlalchemy.engine.Engine - INFO - [cached since 1012s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 8, 650931))
2025-12-12 15:58:08,835 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:08,835 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:08,836 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:58:08,836 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:58:08,836 INFO sqlalchemy.engine.Engine [cached since 1012s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 8, 649235))
2025-12-12 15:58:08,836 - sqlalchemy.engine.Engine - INFO - [cached since 1012s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 8, 649235))
2025-12-12 15:58:08,959 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:08,959 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:08,959 INFO sqlalchemy.engine.Engine [cached since 1012s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 8, 650931))
2025-12-12 15:58:08,959 - sqlalchemy.engine.Engine - INFO - [cached since 1012s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 8, 650931))
2025-12-12 15:58:08,961 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:58:08,961 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:58:09,022 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:09,022 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:09,022 INFO sqlalchemy.engine.Engine [cached since 1012s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 8, 650931))
2025-12-12 15:58:09,022 - sqlalchemy.engine.Engine - INFO - [cached since 1012s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 8, 650931))
INFO:     127.0.0.1:45638 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 15:58:09,085 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:09,085 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:09,085 INFO sqlalchemy.engine.Engine [cached since 1012s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 8, 650931))
2025-12-12 15:58:09,085 - sqlalchemy.engine.Engine - INFO - [cached since 1012s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 8, 650931))
2025-12-12 15:58:09,147 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:58:09,147 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:45632 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 15:58:09,216 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:09,216 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:09,217 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:58:09,217 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:58:09,218 INFO sqlalchemy.engine.Engine [cached since 1435s ago] (3,)
2025-12-12 15:58:09,218 - sqlalchemy.engine.Engine - INFO - [cached since 1435s ago] (3,)
2025-12-12 15:58:09,341 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:58:09,341 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:58:09,397 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:09,397 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:09,397 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:58:09,397 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:58:09,398 INFO sqlalchemy.engine.Engine [cached since 1435s ago] (3,)
2025-12-12 15:58:09,398 - sqlalchemy.engine.Engine - INFO - [cached since 1435s ago] (3,)
2025-12-12 15:58:09,519 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:58:09,519 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:58:09,609 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:09,609 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:09,610 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:58:09,610 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:58:09,610 INFO sqlalchemy.engine.Engine [cached since 1013s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 9, 403092))
2025-12-12 15:58:09,610 - sqlalchemy.engine.Engine - INFO - [cached since 1013s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 9, 403092))
2025-12-12 15:58:09,733 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:58:09,733 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:58:09,766 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:09,766 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:09,767 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:09,767 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:09,767 INFO sqlalchemy.engine.Engine [cached since 1013s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 9, 580948))
2025-12-12 15:58:09,767 - sqlalchemy.engine.Engine - INFO - [cached since 1013s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 9, 580948))
INFO:     127.0.0.1:45638 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 15:58:09,892 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:09,892 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:09,892 INFO sqlalchemy.engine.Engine [cached since 1013s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 9, 580948))
2025-12-12 15:58:09,892 - sqlalchemy.engine.Engine - INFO - [cached since 1013s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 9, 580948))
2025-12-12 15:58:09,956 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:09,956 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:09,956 INFO sqlalchemy.engine.Engine [cached since 1013s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 9, 580948))
2025-12-12 15:58:09,956 - sqlalchemy.engine.Engine - INFO - [cached since 1013s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 9, 580948))
2025-12-12 15:58:10,020 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:10,020 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:58:10,020 INFO sqlalchemy.engine.Engine [cached since 1013s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 9, 580948))
2025-12-12 15:58:10,020 - sqlalchemy.engine.Engine - INFO - [cached since 1013s ago] (3, datetime.datetime(2025, 11, 12, 10, 28, 9, 580948))
2025-12-12 15:58:10,083 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:58:10,083 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:45638 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:45638 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:45632 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 15:58:10,279 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:10,279 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:10,279 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:10,279 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:10,280 INFO sqlalchemy.engine.Engine [cached since 1435s ago] (3,)
2025-12-12 15:58:10,280 - sqlalchemy.engine.Engine - INFO - [cached since 1435s ago] (3,)
2025-12-12 15:58:10,402 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:10,402 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:10,402 INFO sqlalchemy.engine.Engine [cached since 1434s ago] (3, 100, 0)
2025-12-12 15:58:10,402 - sqlalchemy.engine.Engine - INFO - [cached since 1434s ago] (3, 100, 0)
2025-12-12 15:58:10,463 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:58:10,463 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:45638 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:58:10,708 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:58:10,708 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:58:10,709 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:10,709 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:58:10,709 INFO sqlalchemy.engine.Engine [cached since 1435s ago] (3,)
2025-12-12 15:58:10,709 - sqlalchemy.engine.Engine - INFO - [cached since 1435s ago] (3,)
2025-12-12 15:58:10,830 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:10,830 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:58:10,830 INFO sqlalchemy.engine.Engine [cached since 1435s ago] (3, 100, 0)
2025-12-12 15:58:10,830 - sqlalchemy.engine.Engine - INFO - [cached since 1435s ago] (3, 100, 0)
2025-12-12 15:58:10,891 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:58:10,891 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:45638 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:34686 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:34686 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
2025-12-12 15:59:24,924 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:24,924 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:24,925 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:24,925 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:24,925 INFO sqlalchemy.engine.Engine [cached since 1509s ago] (3,)
2025-12-12 15:59:24,925 - sqlalchemy.engine.Engine - INFO - [cached since 1509s ago] (3,)
2025-12-12 15:59:24,927 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:24,927 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:24,928 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:24,928 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:24,928 INFO sqlalchemy.engine.Engine [cached since 1509s ago] (3,)
2025-12-12 15:59:24,928 - sqlalchemy.engine.Engine - INFO - [cached since 1509s ago] (3,)
2025-12-12 15:59:25,048 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:59:25,048 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:59:25,048 INFO sqlalchemy.engine.Engine [cached since 953.6s ago] (3,)
2025-12-12 15:59:25,048 - sqlalchemy.engine.Engine - INFO - [cached since 953.6s ago] (3,)
2025-12-12 15:59:25,049 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:59:25,049 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:59:25,050 INFO sqlalchemy.engine.Engine [cached since 1509s ago] (3, 5, 0)
2025-12-12 15:59:25,050 - sqlalchemy.engine.Engine - INFO - [cached since 1509s ago] (3, 5, 0)
2025-12-12 15:59:25,115 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:59:25,115 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:59:25,116 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:59:25,116 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:34686 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:34676 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
2025-12-12 15:59:25,362 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:25,362 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:25,363 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:25,363 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:25,363 INFO sqlalchemy.engine.Engine [cached since 1510s ago] (3,)
2025-12-12 15:59:25,363 - sqlalchemy.engine.Engine - INFO - [cached since 1510s ago] (3,)
2025-12-12 15:59:25,363 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:25,363 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:25,363 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:25,363 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:25,364 INFO sqlalchemy.engine.Engine [cached since 1510s ago] (3,)
2025-12-12 15:59:25,364 - sqlalchemy.engine.Engine - INFO - [cached since 1510s ago] (3,)
2025-12-12 15:59:25,484 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:59:25,484 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:59:25,484 INFO sqlalchemy.engine.Engine [cached since 954.1s ago] (3,)
2025-12-12 15:59:25,484 - sqlalchemy.engine.Engine - INFO - [cached since 954.1s ago] (3,)
2025-12-12 15:59:25,485 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:59:25,485 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:59:25,485 INFO sqlalchemy.engine.Engine [cached since 1510s ago] (3, 5, 0)
2025-12-12 15:59:25,485 - sqlalchemy.engine.Engine - INFO - [cached since 1510s ago] (3, 5, 0)
2025-12-12 15:59:25,545 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:59:25,545 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:59:25,546 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:59:25,546 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:34686 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:34676 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:45858 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:45858 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 15:59:40,302 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:40,302 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:40,302 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:40,302 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:40,303 INFO sqlalchemy.engine.Engine [cached since 1525s ago] (3,)
2025-12-12 15:59:40,303 - sqlalchemy.engine.Engine - INFO - [cached since 1525s ago] (3,)
2025-12-12 15:59:40,425 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:59:40,425 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:59:40,426 INFO sqlalchemy.engine.Engine [cached since 1524s ago] (3, 100, 0)
2025-12-12 15:59:40,426 - sqlalchemy.engine.Engine - INFO - [cached since 1524s ago] (3, 100, 0)
2025-12-12 15:59:40,490 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:59:40,490 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:45858 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:59:40,752 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:40,752 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:40,752 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:40,752 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:40,752 INFO sqlalchemy.engine.Engine [cached since 1525s ago] (3,)
2025-12-12 15:59:40,752 - sqlalchemy.engine.Engine - INFO - [cached since 1525s ago] (3,)
2025-12-12 15:59:40,873 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:59:40,873 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:59:40,874 INFO sqlalchemy.engine.Engine [cached since 1525s ago] (3, 100, 0)
2025-12-12 15:59:40,874 - sqlalchemy.engine.Engine - INFO - [cached since 1525s ago] (3, 100, 0)
2025-12-12 15:59:40,935 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:59:40,935 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:45858 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 15:59:48,396 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:48,396 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:48,396 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:59:48,396 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:59:48,397 INFO sqlalchemy.engine.Engine [cached since 1534s ago] (3,)
2025-12-12 15:59:48,397 - sqlalchemy.engine.Engine - INFO - [cached since 1534s ago] (3,)
2025-12-12 15:59:48,400 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:48,400 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:48,400 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:59:48,400 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:59:48,400 INFO sqlalchemy.engine.Engine [cached since 1534s ago] (3,)
2025-12-12 15:59:48,400 - sqlalchemy.engine.Engine - INFO - [cached since 1534s ago] (3,)
2025-12-12 15:59:48,523 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:59:48,523 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:59:48,534 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:59:48,534 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:59:48,766 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:48,766 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:48,766 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:59:48,766 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:59:48,766 INFO sqlalchemy.engine.Engine [cached since 1112s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 48, 585030))
2025-12-12 15:59:48,766 - sqlalchemy.engine.Engine - INFO - [cached since 1112s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 48, 585030))
2025-12-12 15:59:48,781 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:48,781 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:48,782 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:48,782 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:48,782 INFO sqlalchemy.engine.Engine [cached since 1112s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 48, 597567))
2025-12-12 15:59:48,782 - sqlalchemy.engine.Engine - INFO - [cached since 1112s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 48, 597567))
2025-12-12 15:59:48,889 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:59:48,889 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:59:48,905 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:48,905 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:48,906 INFO sqlalchemy.engine.Engine [cached since 1112s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 48, 597567))
2025-12-12 15:59:48,906 - sqlalchemy.engine.Engine - INFO - [cached since 1112s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 48, 597567))
INFO:     127.0.0.1:48828 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 15:59:48,968 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:48,968 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:48,968 INFO sqlalchemy.engine.Engine [cached since 1112s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 48, 597567))
2025-12-12 15:59:48,968 - sqlalchemy.engine.Engine - INFO - [cached since 1112s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 48, 597567))
2025-12-12 15:59:49,030 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:49,030 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:49,030 INFO sqlalchemy.engine.Engine [cached since 1112s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 48, 597567))
2025-12-12 15:59:49,030 - sqlalchemy.engine.Engine - INFO - [cached since 1112s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 48, 597567))
2025-12-12 15:59:49,093 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:59:49,093 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:59:49,135 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:49,135 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:49,135 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:59:49,135 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:59:49,136 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (3,)
2025-12-12 15:59:49,136 - sqlalchemy.engine.Engine - INFO - [cached since 1535s ago] (3,)
INFO:     127.0.0.1:48816 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 15:59:49,264 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:59:49,264 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:59:49,345 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:49,345 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:49,346 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:59:49,346 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 15:59:49,346 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (3,)
2025-12-12 15:59:49,346 - sqlalchemy.engine.Engine - INFO - [cached since 1535s ago] (3,)
2025-12-12 15:59:49,468 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 15:59:49,468 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 15:59:49,511 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:49,511 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:49,512 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:59:49,512 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 15:59:49,512 INFO sqlalchemy.engine.Engine [cached since 1113s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 49, 324916))
2025-12-12 15:59:49,512 - sqlalchemy.engine.Engine - INFO - [cached since 1113s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 49, 324916))
2025-12-12 15:59:49,700 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:59:49,700 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:59:49,720 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:49,720 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:49,721 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:49,721 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:49,721 INFO sqlalchemy.engine.Engine [cached since 1113s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 49, 534082))
2025-12-12 15:59:49,721 - sqlalchemy.engine.Engine - INFO - [cached since 1113s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 49, 534082))
INFO:     127.0.0.1:48828 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 15:59:49,903 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:49,903 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:49,903 INFO sqlalchemy.engine.Engine [cached since 1113s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 49, 534082))
2025-12-12 15:59:49,903 - sqlalchemy.engine.Engine - INFO - [cached since 1113s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 49, 534082))
2025-12-12 15:59:50,025 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:50,025 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:50,026 INFO sqlalchemy.engine.Engine [cached since 1113s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 49, 534082))
2025-12-12 15:59:50,026 - sqlalchemy.engine.Engine - INFO - [cached since 1113s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 49, 534082))
2025-12-12 15:59:50,162 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:50,162 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 15:59:50,162 INFO sqlalchemy.engine.Engine [cached since 1113s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 49, 534082))
2025-12-12 15:59:50,162 - sqlalchemy.engine.Engine - INFO - [cached since 1113s ago] (3, datetime.datetime(2025, 11, 12, 10, 29, 49, 534082))
2025-12-12 15:59:50,285 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:59:50,285 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:48816 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48828 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:48828 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
2025-12-12 15:59:52,791 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:52,791 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:52,792 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:52,792 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:52,792 INFO sqlalchemy.engine.Engine [cached since 1537s ago] (3,)
2025-12-12 15:59:52,792 - sqlalchemy.engine.Engine - INFO - [cached since 1537s ago] (3,)
2025-12-12 15:59:52,795 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:52,795 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:52,796 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:52,796 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:52,796 INFO sqlalchemy.engine.Engine [cached since 1537s ago] (3,)
2025-12-12 15:59:52,796 - sqlalchemy.engine.Engine - INFO - [cached since 1537s ago] (3,)
2025-12-12 15:59:52,916 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:59:52,916 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:59:52,917 INFO sqlalchemy.engine.Engine [cached since 981.5s ago] (3,)
2025-12-12 15:59:52,917 - sqlalchemy.engine.Engine - INFO - [cached since 981.5s ago] (3,)
2025-12-12 15:59:52,920 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:59:52,920 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:59:52,920 INFO sqlalchemy.engine.Engine [cached since 1537s ago] (3, 5, 0)
2025-12-12 15:59:52,920 - sqlalchemy.engine.Engine - INFO - [cached since 1537s ago] (3, 5, 0)
2025-12-12 15:59:52,978 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:59:52,978 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:59:52,983 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:59:52,983 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:48816 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:48828 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
2025-12-12 15:59:53,240 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:53,240 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:53,240 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:53,240 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:53,240 INFO sqlalchemy.engine.Engine [cached since 1538s ago] (3,)
2025-12-12 15:59:53,240 - sqlalchemy.engine.Engine - INFO - [cached since 1538s ago] (3,)
2025-12-12 15:59:53,243 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 15:59:53,243 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 15:59:53,243 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:53,243 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 15:59:53,243 INFO sqlalchemy.engine.Engine [cached since 1538s ago] (3,)
2025-12-12 15:59:53,243 - sqlalchemy.engine.Engine - INFO - [cached since 1538s ago] (3,)
2025-12-12 15:59:53,365 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:59:53,365 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 15:59:53,365 INFO sqlalchemy.engine.Engine [cached since 982s ago] (3,)
2025-12-12 15:59:53,365 - sqlalchemy.engine.Engine - INFO - [cached since 982s ago] (3,)
2025-12-12 15:59:53,374 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:59:53,374 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 15:59:53,374 INFO sqlalchemy.engine.Engine [cached since 1537s ago] (3, 5, 0)
2025-12-12 15:59:53,374 - sqlalchemy.engine.Engine - INFO - [cached since 1537s ago] (3, 5, 0)
2025-12-12 15:59:53,441 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:59:53,441 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 15:59:53,497 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 15:59:53,497 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:48816 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:48828 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:48838 - "OPTIONS /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:43670 - "OPTIONS /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
2025-12-12 16:00:06,971 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:06,971 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:06,972 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:06,972 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:06,972 INFO sqlalchemy.engine.Engine [cached since 1552s ago] (3,)
2025-12-12 16:00:06,972 - sqlalchemy.engine.Engine - INFO - [cached since 1552s ago] (3,)
2025-12-12 16:00:07,096 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:00:07,096 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:00:07,339 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:07,339 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:07,340 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:00:07,340 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:00:07,340 INFO sqlalchemy.engine.Engine [cached since 1017s ago] (3,)
2025-12-12 16:00:07,340 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] (3,)
2025-12-12 16:00:07,463 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:00:07,463 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:00:07,463 INFO sqlalchemy.engine.Engine [cached since 1017s ago] (3,)
2025-12-12 16:00:07,463 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] (3,)
2025-12-12 16:00:07,525 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:07,525 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:43682 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
2025-12-12 16:00:07,795 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:07,795 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:07,796 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:07,796 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:07,797 INFO sqlalchemy.engine.Engine [cached since 1553s ago] (3,)
2025-12-12 16:00:07,797 - sqlalchemy.engine.Engine - INFO - [cached since 1553s ago] (3,)
2025-12-12 16:00:07,919 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:00:07,919 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:00:08,168 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:08,168 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:08,168 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:00:08,168 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:00:08,169 INFO sqlalchemy.engine.Engine [cached since 1017s ago] (3,)
2025-12-12 16:00:08,169 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] (3,)
2025-12-12 16:00:08,292 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:00:08,292 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:00:08,293 INFO sqlalchemy.engine.Engine [cached since 1017s ago] (3,)
2025-12-12 16:00:08,293 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] (3,)
2025-12-12 16:00:08,356 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:08,356 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:43682 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:60148 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:60148 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:00:27,087 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:27,087 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:27,089 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:27,089 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:27,089 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (3,)
2025-12-12 16:00:27,089 - sqlalchemy.engine.Engine - INFO - [cached since 1571s ago] (3,)
2025-12-12 16:00:27,210 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:00:27,210 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:00:27,211 INFO sqlalchemy.engine.Engine [cached since 1571s ago] (3, 100, 0)
2025-12-12 16:00:27,211 - sqlalchemy.engine.Engine - INFO - [cached since 1571s ago] (3, 100, 0)
2025-12-12 16:00:27,277 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:27,277 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60158 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:00:27,532 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:27,532 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:27,533 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:27,533 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:27,533 INFO sqlalchemy.engine.Engine [cached since 1572s ago] (3,)
2025-12-12 16:00:27,533 - sqlalchemy.engine.Engine - INFO - [cached since 1572s ago] (3,)
2025-12-12 16:00:27,657 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:00:27,657 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:00:27,657 INFO sqlalchemy.engine.Engine [cached since 1572s ago] (3, 100, 0)
2025-12-12 16:00:27,657 - sqlalchemy.engine.Engine - INFO - [cached since 1572s ago] (3, 100, 0)
2025-12-12 16:00:27,719 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:27,719 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60158 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60158 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:60158 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:00:28,420 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:28,420 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:28,421 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:28,421 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:28,421 INFO sqlalchemy.engine.Engine [cached since 1573s ago] (3,)
2025-12-12 16:00:28,421 - sqlalchemy.engine.Engine - INFO - [cached since 1573s ago] (3,)
2025-12-12 16:00:28,553 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:00:28,553 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:00:28,553 INFO sqlalchemy.engine.Engine [cached since 1573s ago] (3, 10, 0)
2025-12-12 16:00:28,553 - sqlalchemy.engine.Engine - INFO - [cached since 1573s ago] (3, 10, 0)
2025-12-12 16:00:28,625 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:28,625 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60158 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 16:00:28,880 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:28,880 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:28,880 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:28,880 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:28,881 INFO sqlalchemy.engine.Engine [cached since 1573s ago] (3,)
2025-12-12 16:00:28,881 - sqlalchemy.engine.Engine - INFO - [cached since 1573s ago] (3,)
2025-12-12 16:00:29,008 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:00:29,008 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:00:29,008 INFO sqlalchemy.engine.Engine [cached since 1573s ago] (3, 10, 0)
2025-12-12 16:00:29,008 - sqlalchemy.engine.Engine - INFO - [cached since 1573s ago] (3, 10, 0)
2025-12-12 16:00:29,071 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:29,071 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60158 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 16:00:29,707 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:29,707 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:29,708 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:29,708 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:29,708 INFO sqlalchemy.engine.Engine [cached since 1575s ago] (3,)
2025-12-12 16:00:29,708 - sqlalchemy.engine.Engine - INFO - [cached since 1575s ago] (3,)
2025-12-12 16:00:29,831 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:00:29,831 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:00:30,078 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:30,078 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:30,079 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:00:30,079 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:00:30,079 INFO sqlalchemy.engine.Engine [cached since 1039s ago] (3,)
2025-12-12 16:00:30,079 - sqlalchemy.engine.Engine - INFO - [cached since 1039s ago] (3,)
INFO:     127.0.0.1:60166 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:60166 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:00:30,205 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:00:30,205 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:00:30,206 INFO sqlalchemy.engine.Engine [cached since 1039s ago] (3,)
2025-12-12 16:00:30,206 - sqlalchemy.engine.Engine - INFO - [cached since 1039s ago] (3,)
2025-12-12 16:00:30,267 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:30,267 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:00:30,290 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:30,290 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:30,291 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:30,291 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:30,291 INFO sqlalchemy.engine.Engine [cached since 1575s ago] (3,)
2025-12-12 16:00:30,291 - sqlalchemy.engine.Engine - INFO - [cached since 1575s ago] (3,)
2025-12-12 16:00:30,297 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:30,297 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:30,298 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:30,298 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:30,298 INFO sqlalchemy.engine.Engine [cached since 1575s ago] (3,)
2025-12-12 16:00:30,298 - sqlalchemy.engine.Engine - INFO - [cached since 1575s ago] (3,)
INFO:     127.0.0.1:60158 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
2025-12-12 16:00:30,415 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:00:30,415 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:00:30,416 INFO sqlalchemy.engine.Engine [cached since 1019s ago] (3,)
2025-12-12 16:00:30,416 - sqlalchemy.engine.Engine - INFO - [cached since 1019s ago] (3,)
2025-12-12 16:00:30,420 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:00:30,420 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:00:30,421 INFO sqlalchemy.engine.Engine [cached since 1574s ago] (3, 5, 0)
2025-12-12 16:00:30,421 - sqlalchemy.engine.Engine - INFO - [cached since 1574s ago] (3, 5, 0)
2025-12-12 16:00:30,478 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:30,478 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:00:30,483 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:30,483 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:00:30,526 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:30,526 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:30,526 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:30,526 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:30,527 INFO sqlalchemy.engine.Engine [cached since 1576s ago] (3,)
2025-12-12 16:00:30,527 - sqlalchemy.engine.Engine - INFO - [cached since 1576s ago] (3,)
INFO:     127.0.0.1:60148 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:60166 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
2025-12-12 16:00:30,657 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:00:30,657 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:00:30,728 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:30,728 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:30,728 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:30,728 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:30,729 INFO sqlalchemy.engine.Engine [cached since 1575s ago] (3,)
2025-12-12 16:00:30,729 - sqlalchemy.engine.Engine - INFO - [cached since 1575s ago] (3,)
2025-12-12 16:00:30,752 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:30,752 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:30,753 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:30,753 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:00:30,753 INFO sqlalchemy.engine.Engine [cached since 1575s ago] (3,)
2025-12-12 16:00:30,753 - sqlalchemy.engine.Engine - INFO - [cached since 1575s ago] (3,)
2025-12-12 16:00:30,851 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:00:30,851 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:00:30,852 INFO sqlalchemy.engine.Engine [cached since 1019s ago] (3,)
2025-12-12 16:00:30,852 - sqlalchemy.engine.Engine - INFO - [cached since 1019s ago] (3,)
2025-12-12 16:00:30,877 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:00:30,877 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:00:30,878 INFO sqlalchemy.engine.Engine [cached since 1575s ago] (3, 5, 0)
2025-12-12 16:00:30,878 - sqlalchemy.engine.Engine - INFO - [cached since 1575s ago] (3, 5, 0)
2025-12-12 16:00:30,914 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:30,914 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:00:30,931 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:30,931 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:30,932 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:00:30,932 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:00:30,932 INFO sqlalchemy.engine.Engine [cached since 1040s ago] (3,)
2025-12-12 16:00:30,932 - sqlalchemy.engine.Engine - INFO - [cached since 1040s ago] (3,)
2025-12-12 16:00:30,941 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:30,941 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60148 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:60166 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
2025-12-12 16:00:31,058 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:00:31,058 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:00:31,058 INFO sqlalchemy.engine.Engine [cached since 1040s ago] (3,)
2025-12-12 16:00:31,058 - sqlalchemy.engine.Engine - INFO - [cached since 1040s ago] (3,)
2025-12-12 16:00:31,121 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:31,121 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60158 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
2025-12-12 16:00:33,295 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:33,295 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:33,295 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:33,295 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:33,295 INFO sqlalchemy.engine.Engine [cached since 1579s ago] (3,)
2025-12-12 16:00:33,295 - sqlalchemy.engine.Engine - INFO - [cached since 1579s ago] (3,)
2025-12-12 16:00:33,296 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:33,296 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:33,296 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:33,296 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:33,296 INFO sqlalchemy.engine.Engine [cached since 1579s ago] (3,)
2025-12-12 16:00:33,296 - sqlalchemy.engine.Engine - INFO - [cached since 1579s ago] (3,)
2025-12-12 16:00:33,419 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:00:33,419 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:00:33,419 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:00:33,419 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:00:33,674 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:33,674 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:33,675 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:00:33,675 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:00:33,675 INFO sqlalchemy.engine.Engine [cached since 1157s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 33, 480610))
2025-12-12 16:00:33,675 - sqlalchemy.engine.Engine - INFO - [cached since 1157s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 33, 480610))
2025-12-12 16:00:33,676 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:33,676 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:33,677 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:33,677 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:33,677 INFO sqlalchemy.engine.Engine [cached since 1157s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 33, 479961))
2025-12-12 16:00:33,677 - sqlalchemy.engine.Engine - INFO - [cached since 1157s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 33, 479961))
2025-12-12 16:00:33,799 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:33,799 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:00:33,801 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:33,801 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:33,802 INFO sqlalchemy.engine.Engine [cached since 1157s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 33, 479961))
2025-12-12 16:00:33,802 - sqlalchemy.engine.Engine - INFO - [cached since 1157s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 33, 479961))
INFO:     127.0.0.1:60166 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 16:00:33,867 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:33,867 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:33,868 INFO sqlalchemy.engine.Engine [cached since 1157s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 33, 479961))
2025-12-12 16:00:33,868 - sqlalchemy.engine.Engine - INFO - [cached since 1157s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 33, 479961))
2025-12-12 16:00:33,931 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:33,931 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:33,932 INFO sqlalchemy.engine.Engine [cached since 1156s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 33, 479961))
2025-12-12 16:00:33,932 - sqlalchemy.engine.Engine - INFO - [cached since 1156s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 33, 479961))
2025-12-12 16:00:33,995 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:33,995 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:00:34,056 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:34,056 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:34,057 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:34,057 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:34,057 INFO sqlalchemy.engine.Engine [cached since 1579s ago] (3,)
2025-12-12 16:00:34,057 - sqlalchemy.engine.Engine - INFO - [cached since 1579s ago] (3,)
INFO:     127.0.0.1:60158 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 16:00:34,178 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:00:34,178 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:00:34,249 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:34,249 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:34,249 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:34,249 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:00:34,249 INFO sqlalchemy.engine.Engine [cached since 1580s ago] (3,)
2025-12-12 16:00:34,249 - sqlalchemy.engine.Engine - INFO - [cached since 1580s ago] (3,)
2025-12-12 16:00:34,370 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:00:34,370 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:00:34,423 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:34,423 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:34,424 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:00:34,424 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:00:34,424 INFO sqlalchemy.engine.Engine [cached since 1157s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 34, 239355))
2025-12-12 16:00:34,424 - sqlalchemy.engine.Engine - INFO - [cached since 1157s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 34, 239355))
2025-12-12 16:00:34,548 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:34,548 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:00:34,612 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:00:34,612 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:00:34,613 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:34,613 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:34,613 INFO sqlalchemy.engine.Engine [cached since 1158s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 34, 431417))
2025-12-12 16:00:34,613 - sqlalchemy.engine.Engine - INFO - [cached since 1158s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 34, 431417))
INFO:     127.0.0.1:60166 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 16:00:34,737 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:34,737 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:34,738 INFO sqlalchemy.engine.Engine [cached since 1158s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 34, 431417))
2025-12-12 16:00:34,738 - sqlalchemy.engine.Engine - INFO - [cached since 1158s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 34, 431417))
2025-12-12 16:00:34,801 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:34,801 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:34,801 INFO sqlalchemy.engine.Engine [cached since 1157s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 34, 431417))
2025-12-12 16:00:34,801 - sqlalchemy.engine.Engine - INFO - [cached since 1157s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 34, 431417))
2025-12-12 16:00:34,864 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:34,864 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:00:34,864 INFO sqlalchemy.engine.Engine [cached since 1157s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 34, 431417))
2025-12-12 16:00:34,864 - sqlalchemy.engine.Engine - INFO - [cached since 1157s ago] (3, datetime.datetime(2025, 11, 12, 10, 30, 34, 431417))
2025-12-12 16:00:34,927 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:00:34,927 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60158 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51710 - "OPTIONS /api/v1/auth/register HTTP/1.1" 200 OK
2025-12-12 16:01:06,654 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:06,654 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:06,656 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-12-12 16:01:06,656 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-12-12 16:01:06,656 INFO sqlalchemy.engine.Engine [generated in 0.00025s] ('rahulalatre101@gmail.com',)
2025-12-12 16:01:06,656 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('rahulalatre101@gmail.com',)
2025-12-12 16:01:06,841 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.username = $1::VARCHAR
2025-12-12 16:01:06,841 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.username = $1::VARCHAR
2025-12-12 16:01:06,841 INFO sqlalchemy.engine.Engine [generated in 0.00057s] ('rahul',)
2025-12-12 16:01:06,841 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ('rahul',)
2025-12-12 16:01:07,005 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/ubox133/projects/DocQuery AI/backend/.venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-12-12 16:01:07,008 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-12-12 16:01:07,008 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-12-12 16:01:07,440 INFO sqlalchemy.engine.Engine INSERT INTO users (email, username, hashed_password, full_name, is_active, is_verified, avatar_url, preferred_llm, theme, totp_secret, totp_enabled, backup_codes, daily_query_limit, queries_today, last_query_reset) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::BOOLEAN, $6::BOOLEAN, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::VARCHAR, $11::BOOLEAN, $12::VARCHAR, $13::INTEGER, $14::INTEGER, $15::TIMESTAMP WITH TIME ZONE) RETURNING users.id, users.created_at, users.updated_at
2025-12-12 16:01:07,440 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (email, username, hashed_password, full_name, is_active, is_verified, avatar_url, preferred_llm, theme, totp_secret, totp_enabled, backup_codes, daily_query_limit, queries_today, last_query_reset) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::BOOLEAN, $6::BOOLEAN, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::VARCHAR, $11::BOOLEAN, $12::VARCHAR, $13::INTEGER, $14::INTEGER, $15::TIMESTAMP WITH TIME ZONE) RETURNING users.id, users.created_at, users.updated_at
2025-12-12 16:01:07,440 INFO sqlalchemy.engine.Engine [generated in 0.00046s] ('rahulalatre101@gmail.com', 'rahul', '$2b$12$0rd.b.1wxiFr/NLVRJUwReYz3KFPjpyFbaGxNiXuAull.9SuD4Hnu', 'alatre', True, False, None, 'groq', 'dark', None, False, None, 100, 0, None)
2025-12-12 16:01:07,440 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ('rahulalatre101@gmail.com', 'rahul', '$2b$12$0rd.b.1wxiFr/NLVRJUwReYz3KFPjpyFbaGxNiXuAull.9SuD4Hnu', 'alatre', True, False, None, 'groq', 'dark', None, False, None, 100, 0, None)
2025-12-12 16:01:07,568 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:07,568 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:07,568 INFO sqlalchemy.engine.Engine [generated in 0.00080s] (5,)
2025-12-12 16:01:07,568 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] (5,)
2025-12-12 16:01:07,631 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:07,631 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:51712 - "POST /api/v1/auth/register HTTP/1.1" 201 Created
INFO:     127.0.0.1:51712 - "OPTIONS /api/v1/auth/login HTTP/1.1" 200 OK
2025-12-12 16:01:07,896 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:07,896 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:07,897 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-12-12 16:01:07,897 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-12-12 16:01:07,897 INFO sqlalchemy.engine.Engine [cached since 1.241s ago] ('rahulalatre101@gmail.com',)
2025-12-12 16:01:07,897 - sqlalchemy.engine.Engine - INFO - [cached since 1.241s ago] ('rahulalatre101@gmail.com',)
2025-12-12 16:01:08,476 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:08,476 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:51710 - "POST /api/v1/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:51710 - "OPTIONS /api/v1/users/me HTTP/1.1" 200 OK
2025-12-12 16:01:08,752 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:08,752 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:08,753 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:08,753 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:08,754 INFO sqlalchemy.engine.Engine [cached since 1614s ago] (5,)
2025-12-12 16:01:08,754 - sqlalchemy.engine.Engine - INFO - [cached since 1614s ago] (5,)
2025-12-12 16:01:08,877 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:08,877 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:51712 - "GET /api/v1/users/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:51710 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:51710 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:01:09,197 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:09,197 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:09,198 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:09,198 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:09,198 INFO sqlalchemy.engine.Engine [cached since 1613s ago] (5,)
2025-12-12 16:01:09,198 - sqlalchemy.engine.Engine - INFO - [cached since 1613s ago] (5,)
2025-12-12 16:01:09,219 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:09,219 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:09,219 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:09,219 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:09,220 INFO sqlalchemy.engine.Engine [cached since 1614s ago] (5,)
2025-12-12 16:01:09,220 - sqlalchemy.engine.Engine - INFO - [cached since 1614s ago] (5,)
2025-12-12 16:01:09,321 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:01:09,321 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:01:09,321 INFO sqlalchemy.engine.Engine [cached since 1058s ago] (5,)
2025-12-12 16:01:09,321 - sqlalchemy.engine.Engine - INFO - [cached since 1058s ago] (5,)
2025-12-12 16:01:09,346 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:09,346 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:09,346 INFO sqlalchemy.engine.Engine [cached since 1613s ago] (5, 5, 0)
2025-12-12 16:01:09,346 - sqlalchemy.engine.Engine - INFO - [cached since 1613s ago] (5, 5, 0)
2025-12-12 16:01:09,383 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:09,383 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:01:09,409 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:09,409 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:51712 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:51710 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
2025-12-12 16:01:09,633 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:09,633 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:09,634 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:09,634 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:09,634 INFO sqlalchemy.engine.Engine [cached since 1614s ago] (5,)
2025-12-12 16:01:09,634 - sqlalchemy.engine.Engine - INFO - [cached since 1614s ago] (5,)
2025-12-12 16:01:09,664 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:09,664 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:09,664 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:09,664 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:09,665 INFO sqlalchemy.engine.Engine [cached since 1614s ago] (5,)
2025-12-12 16:01:09,665 - sqlalchemy.engine.Engine - INFO - [cached since 1614s ago] (5,)
2025-12-12 16:01:09,757 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:01:09,757 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:01:09,757 INFO sqlalchemy.engine.Engine [cached since 1058s ago] (5,)
2025-12-12 16:01:09,757 - sqlalchemy.engine.Engine - INFO - [cached since 1058s ago] (5,)
2025-12-12 16:01:09,786 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:09,786 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:09,787 INFO sqlalchemy.engine.Engine [cached since 1614s ago] (5, 5, 0)
2025-12-12 16:01:09,787 - sqlalchemy.engine.Engine - INFO - [cached since 1614s ago] (5, 5, 0)
2025-12-12 16:01:09,820 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:09,820 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:01:09,849 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:09,849 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:51712 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:51710 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51710 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:51710 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:01:14,959 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:14,959 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:14,961 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:14,961 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:14,961 INFO sqlalchemy.engine.Engine [cached since 1619s ago] (5,)
2025-12-12 16:01:14,961 - sqlalchemy.engine.Engine - INFO - [cached since 1619s ago] (5,)
2025-12-12 16:01:15,086 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:15,086 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:15,091 INFO sqlalchemy.engine.Engine [cached since 1619s ago] (5, 10, 0)
2025-12-12 16:01:15,091 - sqlalchemy.engine.Engine - INFO - [cached since 1619s ago] (5, 10, 0)
2025-12-12 16:01:15,153 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:15,153 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:51712 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 16:01:15,410 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:15,410 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:15,413 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:15,413 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:15,413 INFO sqlalchemy.engine.Engine [cached since 1620s ago] (5,)
2025-12-12 16:01:15,413 - sqlalchemy.engine.Engine - INFO - [cached since 1620s ago] (5,)
2025-12-12 16:01:15,538 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:15,538 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:15,538 INFO sqlalchemy.engine.Engine [cached since 1620s ago] (5, 10, 0)
2025-12-12 16:01:15,538 - sqlalchemy.engine.Engine - INFO - [cached since 1620s ago] (5, 10, 0)
2025-12-12 16:01:15,606 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:15,606 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:51712 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:35286 - "OPTIONS /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:35288 - "OPTIONS /api/v1/documents?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:35292 - "OPTIONS /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:35286 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:35302 - "OPTIONS /api/v1/documents?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:35302 - "OPTIONS /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:35286 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:01:21,837 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:21,837 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:21,837 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:21,837 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:21,837 INFO sqlalchemy.engine.Engine [cached since 1627s ago] (5,)
2025-12-12 16:01:21,837 - sqlalchemy.engine.Engine - INFO - [cached since 1627s ago] (5,)
2025-12-12 16:01:21,848 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:21,848 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:21,849 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:21,849 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:21,849 INFO sqlalchemy.engine.Engine [cached since 1626s ago] (5,)
2025-12-12 16:01:21,849 - sqlalchemy.engine.Engine - INFO - [cached since 1626s ago] (5,)
2025-12-12 16:01:21,959 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:21,959 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:21,973 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:21,973 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:21,973 INFO sqlalchemy.engine.Engine [cached since 1626s ago] (5, 100, 0)
2025-12-12 16:01:21,973 - sqlalchemy.engine.Engine - INFO - [cached since 1626s ago] (5, 100, 0)
2025-12-12 16:01:22,038 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:22,038 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:35292 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:01:22,202 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:22,202 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:22,203 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:01:22,203 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:01:22,203 INFO sqlalchemy.engine.Engine [cached since 1624s ago] (5,)
2025-12-12 16:01:22,203 - sqlalchemy.engine.Engine - INFO - [cached since 1624s ago] (5,)
2025-12-12 16:01:22,291 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:22,291 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:22,291 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:22,291 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:22,291 INFO sqlalchemy.engine.Engine [cached since 1627s ago] (5,)
2025-12-12 16:01:22,291 - sqlalchemy.engine.Engine - INFO - [cached since 1627s ago] (5,)
2025-12-12 16:01:22,328 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:22,328 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:22,328 INFO sqlalchemy.engine.Engine [cached since 1623s ago] (5, 20, 0)
2025-12-12 16:01:22,328 - sqlalchemy.engine.Engine - INFO - [cached since 1623s ago] (5, 20, 0)
2025-12-12 16:01:22,390 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:22,390 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:01:22,420 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:22,420 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:22,420 INFO sqlalchemy.engine.Engine [cached since 1626s ago] (5, 100, 0)
2025-12-12 16:01:22,420 - sqlalchemy.engine.Engine - INFO - [cached since 1626s ago] (5, 100, 0)
INFO:     127.0.0.1:35318 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:01:22,498 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:22,498 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:35292 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:01:22,688 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:22,688 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:22,689 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:22,689 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:22,689 INFO sqlalchemy.engine.Engine [cached since 1628s ago] (5,)
2025-12-12 16:01:22,689 - sqlalchemy.engine.Engine - INFO - [cached since 1628s ago] (5,)
2025-12-12 16:01:22,814 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:22,814 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:23,058 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:23,058 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:23,059 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:01:23,059 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:01:23,059 INFO sqlalchemy.engine.Engine [cached since 1625s ago] (5,)
2025-12-12 16:01:23,059 - sqlalchemy.engine.Engine - INFO - [cached since 1625s ago] (5,)
2025-12-12 16:01:23,183 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:23,183 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:23,183 INFO sqlalchemy.engine.Engine [cached since 1624s ago] (5, 20, 0)
2025-12-12 16:01:23,183 - sqlalchemy.engine.Engine - INFO - [cached since 1624s ago] (5, 20, 0)
2025-12-12 16:01:23,245 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:23,245 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:35318 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:01:28,764 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:28,764 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:28,765 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:28,765 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:28,765 INFO sqlalchemy.engine.Engine [cached since 1634s ago] (5,)
2025-12-12 16:01:28,765 - sqlalchemy.engine.Engine - INFO - [cached since 1634s ago] (5,)
2025-12-12 16:01:28,891 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:28,891 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:29,138 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:29,138 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:29,139 INFO sqlalchemy.engine.Engine INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 16:01:29,139 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_sessions (user_id, title, description, document_ids, collection_id, is_active, is_pinned, message_count, last_message_at) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::INTEGER, $6::BOOLEAN, $7::BOOLEAN, $8::INTEGER, $9::TIMESTAMP WITH TIME ZONE) RETURNING chat_sessions.id, chat_sessions.created_at, chat_sessions.updated_at
2025-12-12 16:01:29,139 INFO sqlalchemy.engine.Engine [cached since 1629s ago] (5, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 16:01:29,139 - sqlalchemy.engine.Engine - INFO - [cached since 1629s ago] (5, 'New Chat', None, '[]', None, True, False, 0, None)
2025-12-12 16:01:29,265 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 16:01:29,265 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER
2025-12-12 16:01:29,265 INFO sqlalchemy.engine.Engine [cached since 1629s ago] (8,)
2025-12-12 16:01:29,265 - sqlalchemy.engine.Engine - INFO - [cached since 1629s ago] (8,)
2025-12-12 16:01:29,328 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:29,328 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:48142 - "POST /api/v1/chat/sessions HTTP/1.1" 201 Created
INFO:     127.0.0.1:48142 - "OPTIONS /api/v1/chat/sessions/8/messages HTTP/1.1" 200 OK
2025-12-12 16:01:29,579 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:29,579 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:29,580 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:29,580 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:29,580 INFO sqlalchemy.engine.Engine [cached since 1635s ago] (5,)
2025-12-12 16:01:29,580 - sqlalchemy.engine.Engine - INFO - [cached since 1635s ago] (5,)
2025-12-12 16:01:29,705 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:29,705 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:29,952 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:29,952 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:29,952 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 16:01:29,952 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 16:01:29,952 INFO sqlalchemy.engine.Engine [cached since 1629s ago] (8, 5)
2025-12-12 16:01:29,952 - sqlalchemy.engine.Engine - INFO - [cached since 1629s ago] (8, 5)
2025-12-12 16:01:30,074 INFO sqlalchemy.engine.Engine INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 16:01:30,074 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 16:01:30,074 INFO sqlalchemy.engine.Engine [cached since 1629s ago] (8, 'user', 'Summarize the key findings', 'null', None, None, None, None, None)
2025-12-12 16:01:30,074 - sqlalchemy.engine.Engine - INFO - [cached since 1629s ago] (8, 'user', 'Summarize the key findings', 'null', None, None, None, None, None)
2025-12-12 16:01:30,137 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 16:01:30,137 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 16:01:30,137 INFO sqlalchemy.engine.Engine [cached since 1629s ago] (1, datetime.datetime(2025, 12, 12, 10, 31, 30, 74236), datetime.datetime(2025, 12, 12, 10, 31, 30, 74232), 8)
2025-12-12 16:01:30,137 - sqlalchemy.engine.Engine - INFO - [cached since 1629s ago] (1, datetime.datetime(2025, 12, 12, 10, 31, 30, 74236), datetime.datetime(2025, 12, 12, 10, 31, 30, 74232), 8)
2025-12-12 16:01:30,199 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 16:01:30,199 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 16:01:30,199 INFO sqlalchemy.engine.Engine [cached since 1629s ago] (11,)
2025-12-12 16:01:30,199 - sqlalchemy.engine.Engine - INFO - [cached since 1629s ago] (11,)
2025-12-12 16:01:30,262 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET title=$1::VARCHAR, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 16:01:30,262 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET title=$1::VARCHAR, updated_at=now() WHERE chat_sessions.id = $2::INTEGER
2025-12-12 16:01:30,262 INFO sqlalchemy.engine.Engine [cached since 1629s ago] ('Summarize the key findings', 8)
2025-12-12 16:01:30,262 - sqlalchemy.engine.Engine - INFO - [cached since 1629s ago] ('Summarize the key findings', 8)
2025-12-12 16:01:30,323 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 16:01:30,323 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 16:01:30,323 INFO sqlalchemy.engine.Engine [cached since 1629s ago] (8, 5)
2025-12-12 16:01:30,323 - sqlalchemy.engine.Engine - INFO - [cached since 1629s ago] (8, 5)
2025-12-12 16:01:30,385 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.session_id = $1::INTEGER ORDER BY chat_messages.created_at 
 LIMIT $2::INTEGER
2025-12-12 16:01:30,385 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.session_id = $1::INTEGER ORDER BY chat_messages.created_at 
 LIMIT $2::INTEGER
2025-12-12 16:01:30,385 INFO sqlalchemy.engine.Engine [cached since 1629s ago] (8, 10)
2025-12-12 16:01:30,385 - sqlalchemy.engine.Engine - INFO - [cached since 1629s ago] (8, 10)
2025-12-12 16:01:32,144 - app.services.weaviate_service - INFO - Found 0 results for query: Summarize the key findings...
2025-12-12 16:01:32,147 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-43b5c391-0322-46b7-934f-5a7acde5ef0b', 'json_data': {'messages': [{'role': 'user', 'content': "You are DocQuery AI, an intelligent document assistant. Your task is to answer questions based on the provided document context.\n\nGuidelines:\n1. Answer based ONLY on the information provided in the context\n2. If the context doesn't contain relevant information, clearly state that\n3. Cite the source documents when providing information\n4. Be concise but comprehensive\n5. If multiple sources provide relevant information, synthesize them\n6. Use a professional and helpful tone\n\n## Document Context:\n\n\n## User Question:\nSummarize the key findings\n\n## Your Response:"}], 'model': 'llama-3.3-70b-versatile', 'max_tokens': 1024, 'temperature': 0.7}}
2025-12-12 16:01:32,149 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-12-12 16:01:32,429 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Fri, 12 Dec 2025 10:31:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'server': 'cloudflare', 'vary': 'Origin', 'x-groq-region': 'bom', 'x-ratelimit-limit-requests': '1000', 'x-ratelimit-limit-tokens': '12000', 'x-ratelimit-remaining-requests': '999', 'x-ratelimit-remaining-tokens': '11850', 'x-ratelimit-reset-requests': '1m26.4s', 'x-ratelimit-reset-tokens': '750ms', 'x-request-id': 'req_01kc91va4gfcw82kwt82gejpc4', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=9p90uxtSL1Ml9h1O3oy_SFcn2_QmZYLrrd9ZpLNsp6M-1765535492.2066166-1.0.1.1-CLZOvbnxw3_7NqerYRw3TEGA7i8vz05wQeqZa.2ksqiy_ROCFD9olYHkL4_Vs9DILG0iAVUJvjAJSY6f6x8Ya2N.UiTMSp8LgHXCN_lfrJbKxhKx6MO4Rsxnmm.3_Ci.; HttpOnly; Secure; Path=/; Domain=groq.com; Expires=Fri, 12 Dec 2025 11:01:32 GMT', 'strict-transport-security': 'max-age=2592000', 'content-encoding': 'gzip', 'cf-ray': '9acc8d7a496929f5-BOM', 'alt-svc': 'h3=":443"; ma=86400'})
2025-12-12 16:01:32,433 INFO sqlalchemy.engine.Engine INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 16:01:32,433 - sqlalchemy.engine.Engine - INFO - INSERT INTO chat_messages (session_id, role, content, sources, feedback, feedback_text, generation_time_ms, tokens_used, model_used) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON, $5::VARCHAR, $6::VARCHAR, $7::INTEGER, $8::INTEGER, $9::VARCHAR) RETURNING chat_messages.id, chat_messages.created_at
2025-12-12 16:01:32,433 INFO sqlalchemy.engine.Engine [cached since 1631s ago] (8, 'assistant', 'There is no document context provided to summarize key findings from. Please provide the relevant document context to assist with your query.', '[]', None, None, 1983, None, 'llama-3.3-70b-versatile')
2025-12-12 16:01:32,433 - sqlalchemy.engine.Engine - INFO - [cached since 1631s ago] (8, 'assistant', 'There is no document context provided to summarize key findings from. Please provide the relevant document context to assist with your query.', '[]', None, None, 1983, None, 'llama-3.3-70b-versatile')
2025-12-12 16:01:32,496 INFO sqlalchemy.engine.Engine UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 16:01:32,496 - sqlalchemy.engine.Engine - INFO - UPDATE chat_sessions SET message_count=(chat_sessions.message_count + $1::INTEGER), updated_at=$2::TIMESTAMP WITH TIME ZONE, last_message_at=$3::TIMESTAMP WITH TIME ZONE WHERE chat_sessions.id = $4::INTEGER
2025-12-12 16:01:32,496 INFO sqlalchemy.engine.Engine [cached since 1631s ago] (1, datetime.datetime(2025, 12, 12, 10, 31, 32, 431938), datetime.datetime(2025, 12, 12, 10, 31, 32, 431930), 8)
2025-12-12 16:01:32,496 - sqlalchemy.engine.Engine - INFO - [cached since 1631s ago] (1, datetime.datetime(2025, 12, 12, 10, 31, 32, 431938), datetime.datetime(2025, 12, 12, 10, 31, 32, 431930), 8)
2025-12-12 16:01:32,558 INFO sqlalchemy.engine.Engine SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 16:01:32,558 - sqlalchemy.engine.Engine - INFO - SELECT chat_messages.id, chat_messages.session_id, chat_messages.role, chat_messages.content, chat_messages.sources, chat_messages.feedback, chat_messages.feedback_text, chat_messages.generation_time_ms, chat_messages.tokens_used, chat_messages.model_used, chat_messages.created_at 
FROM chat_messages 
WHERE chat_messages.id = $1::INTEGER
2025-12-12 16:01:32,559 INFO sqlalchemy.engine.Engine [cached since 1631s ago] (12,)
2025-12-12 16:01:32,559 - sqlalchemy.engine.Engine - INFO - [cached since 1631s ago] (12,)
2025-12-12 16:01:32,622 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 16:01:32,622 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.id = $1::INTEGER AND chat_sessions.user_id = $2::INTEGER
2025-12-12 16:01:32,622 INFO sqlalchemy.engine.Engine [cached since 1632s ago] (8, 5)
2025-12-12 16:01:32,622 - sqlalchemy.engine.Engine - INFO - [cached since 1632s ago] (8, 5)
2025-12-12 16:01:32,684 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:32,684 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:48148 - "POST /api/v1/chat/sessions/8/messages HTTP/1.1" 200 OK
2025-12-12 16:01:49,805 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:49,805 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:49,805 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:49,805 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:49,806 INFO sqlalchemy.engine.Engine [cached since 1655s ago] (5,)
2025-12-12 16:01:49,806 - sqlalchemy.engine.Engine - INFO - [cached since 1655s ago] (5,)
2025-12-12 16:01:49,806 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:49,806 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:49,810 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:49,810 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:49,811 INFO sqlalchemy.engine.Engine [cached since 1655s ago] (5,)
2025-12-12 16:01:49,811 - sqlalchemy.engine.Engine - INFO - [cached since 1655s ago] (5,)
2025-12-12 16:01:49,928 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:49,928 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:49,934 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:49,934 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:50,175 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:50,175 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:50,176 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:01:50,176 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:01:50,176 INFO sqlalchemy.engine.Engine [cached since 1233s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 49, 988778))
2025-12-12 16:01:50,176 - sqlalchemy.engine.Engine - INFO - [cached since 1233s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 49, 988778))
2025-12-12 16:01:50,177 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:50,177 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:50,178 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:50,178 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:50,178 INFO sqlalchemy.engine.Engine [cached since 1233s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 49, 995801))
2025-12-12 16:01:50,178 - sqlalchemy.engine.Engine - INFO - [cached since 1233s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 49, 995801))
2025-12-12 16:01:50,298 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:50,298 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:01:50,300 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:50,300 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:50,300 INFO sqlalchemy.engine.Engine [cached since 1233s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 49, 995801))
2025-12-12 16:01:50,300 - sqlalchemy.engine.Engine - INFO - [cached since 1233s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 49, 995801))
INFO:     127.0.0.1:37378 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 16:01:50,363 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:50,363 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:50,364 INFO sqlalchemy.engine.Engine [cached since 1233s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 49, 995801))
2025-12-12 16:01:50,364 - sqlalchemy.engine.Engine - INFO - [cached since 1233s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 49, 995801))
2025-12-12 16:01:50,425 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:50,425 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:50,426 INFO sqlalchemy.engine.Engine [cached since 1233s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 49, 995801))
2025-12-12 16:01:50,426 - sqlalchemy.engine.Engine - INFO - [cached since 1233s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 49, 995801))
2025-12-12 16:01:50,487 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:50,487 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37374 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 16:01:50,551 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:50,551 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:50,552 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:50,552 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:50,552 INFO sqlalchemy.engine.Engine [cached since 1656s ago] (5,)
2025-12-12 16:01:50,552 - sqlalchemy.engine.Engine - INFO - [cached since 1656s ago] (5,)
2025-12-12 16:01:50,679 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:50,679 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:50,739 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:50,739 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:50,740 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:50,740 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:50,740 INFO sqlalchemy.engine.Engine [cached since 1656s ago] (5,)
2025-12-12 16:01:50,740 - sqlalchemy.engine.Engine - INFO - [cached since 1656s ago] (5,)
2025-12-12 16:01:50,862 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:50,862 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:50,925 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:50,925 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:50,926 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:01:50,926 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:01:50,926 INFO sqlalchemy.engine.Engine [cached since 1234s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 50, 741959))
2025-12-12 16:01:50,926 - sqlalchemy.engine.Engine - INFO - [cached since 1234s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 50, 741959))
2025-12-12 16:01:51,048 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:51,048 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37378 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 16:01:51,110 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:51,110 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:51,111 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:51,111 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:51,112 INFO sqlalchemy.engine.Engine [cached since 1234s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 50, 923924))
2025-12-12 16:01:51,112 - sqlalchemy.engine.Engine - INFO - [cached since 1234s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 50, 923924))
2025-12-12 16:01:51,237 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:51,237 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:51,237 INFO sqlalchemy.engine.Engine [cached since 1234s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 50, 923924))
2025-12-12 16:01:51,237 - sqlalchemy.engine.Engine - INFO - [cached since 1234s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 50, 923924))
2025-12-12 16:01:51,300 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:51,300 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:51,300 INFO sqlalchemy.engine.Engine [cached since 1234s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 50, 923924))
2025-12-12 16:01:51,300 - sqlalchemy.engine.Engine - INFO - [cached since 1234s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 50, 923924))
2025-12-12 16:01:51,364 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:51,364 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:51,364 INFO sqlalchemy.engine.Engine [cached since 1234s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 50, 923924))
2025-12-12 16:01:51,364 - sqlalchemy.engine.Engine - INFO - [cached since 1234s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 50, 923924))
INFO:     127.0.0.1:37390 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:37390 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:01:51,436 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:51,436 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37374 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 16:01:51,577 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:51,577 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:51,578 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:51,578 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:51,578 INFO sqlalchemy.engine.Engine [cached since 1656s ago] (5,)
2025-12-12 16:01:51,578 - sqlalchemy.engine.Engine - INFO - [cached since 1656s ago] (5,)
2025-12-12 16:01:51,579 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:51,579 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:51,580 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:51,580 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:51,580 INFO sqlalchemy.engine.Engine [cached since 1657s ago] (5,)
2025-12-12 16:01:51,580 - sqlalchemy.engine.Engine - INFO - [cached since 1657s ago] (5,)
2025-12-12 16:01:51,700 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:51,700 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:51,700 INFO sqlalchemy.engine.Engine [cached since 1656s ago] (5, 100, 0)
2025-12-12 16:01:51,700 - sqlalchemy.engine.Engine - INFO - [cached since 1656s ago] (5, 100, 0)
2025-12-12 16:01:51,702 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:51,702 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:51,762 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:51,762 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37390 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:01:51,952 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:51,952 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:51,953 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:01:51,953 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:01:51,954 INFO sqlalchemy.engine.Engine [cached since 1654s ago] (5,)
2025-12-12 16:01:51,954 - sqlalchemy.engine.Engine - INFO - [cached since 1654s ago] (5,)
2025-12-12 16:01:52,018 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:52,018 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:52,018 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:52,018 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:52,019 INFO sqlalchemy.engine.Engine [cached since 1656s ago] (5,)
2025-12-12 16:01:52,019 - sqlalchemy.engine.Engine - INFO - [cached since 1656s ago] (5,)
2025-12-12 16:01:52,082 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:52,082 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:52,083 INFO sqlalchemy.engine.Engine [cached since 1653s ago] (5, 20, 0)
2025-12-12 16:01:52,083 - sqlalchemy.engine.Engine - INFO - [cached since 1653s ago] (5, 20, 0)
2025-12-12 16:01:52,141 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:52,141 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:52,142 INFO sqlalchemy.engine.Engine [cached since 1656s ago] (5, 100, 0)
2025-12-12 16:01:52,142 - sqlalchemy.engine.Engine - INFO - [cached since 1656s ago] (5, 100, 0)
2025-12-12 16:01:52,145 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:52,145 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:01:52,202 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:52,202 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37378 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:37390 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:01:52,393 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:52,393 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:52,393 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:52,393 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:52,394 INFO sqlalchemy.engine.Engine [cached since 1658s ago] (5,)
2025-12-12 16:01:52,394 - sqlalchemy.engine.Engine - INFO - [cached since 1658s ago] (5,)
2025-12-12 16:01:52,520 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:52,520 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:52,773 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:52,773 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:52,774 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:01:52,774 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:01:52,774 INFO sqlalchemy.engine.Engine [cached since 1655s ago] (5,)
2025-12-12 16:01:52,774 - sqlalchemy.engine.Engine - INFO - [cached since 1655s ago] (5,)
2025-12-12 16:01:52,899 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:52,899 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:52,899 INFO sqlalchemy.engine.Engine [cached since 1654s ago] (5, 20, 0)
2025-12-12 16:01:52,899 - sqlalchemy.engine.Engine - INFO - [cached since 1654s ago] (5, 20, 0)
2025-12-12 16:01:52,961 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:52,961 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:01:52,987 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:52,987 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:52,987 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:52,987 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:52,988 INFO sqlalchemy.engine.Engine [cached since 1658s ago] (5,)
2025-12-12 16:01:52,988 - sqlalchemy.engine.Engine - INFO - [cached since 1658s ago] (5,)
2025-12-12 16:01:52,988 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:52,988 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:52,988 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:52,988 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:52,988 INFO sqlalchemy.engine.Engine [cached since 1658s ago] (5,)
2025-12-12 16:01:52,988 - sqlalchemy.engine.Engine - INFO - [cached since 1658s ago] (5,)
INFO:     127.0.0.1:37378 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:01:53,111 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:53,111 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:53,112 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:53,112 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:53,358 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:53,358 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:53,359 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:01:53,359 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:01:53,359 INFO sqlalchemy.engine.Engine [cached since 1236s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 53, 172734))
2025-12-12 16:01:53,359 - sqlalchemy.engine.Engine - INFO - [cached since 1236s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 53, 172734))
2025-12-12 16:01:53,360 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:53,360 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:53,361 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:53,361 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:53,361 INFO sqlalchemy.engine.Engine [cached since 1236s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 53, 174752))
2025-12-12 16:01:53,361 - sqlalchemy.engine.Engine - INFO - [cached since 1236s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 53, 174752))
2025-12-12 16:01:53,484 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:53,484 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:53,484 INFO sqlalchemy.engine.Engine [cached since 1236s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 53, 174752))
2025-12-12 16:01:53,484 - sqlalchemy.engine.Engine - INFO - [cached since 1236s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 53, 174752))
2025-12-12 16:01:53,486 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:53,486 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:01:53,547 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:53,547 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:53,547 INFO sqlalchemy.engine.Engine [cached since 1236s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 53, 174752))
2025-12-12 16:01:53,547 - sqlalchemy.engine.Engine - INFO - [cached since 1236s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 53, 174752))
INFO:     127.0.0.1:37374 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
INFO:     127.0.0.1:37398 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:37398 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:01:53,609 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:53,609 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:53,609 INFO sqlalchemy.engine.Engine [cached since 1236s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 53, 174752))
2025-12-12 16:01:53,609 - sqlalchemy.engine.Engine - INFO - [cached since 1236s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 53, 174752))
2025-12-12 16:01:53,671 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:53,671 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37390 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 16:01:53,741 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:53,741 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:53,741 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:53,741 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:53,741 INFO sqlalchemy.engine.Engine [cached since 1659s ago] (5,)
2025-12-12 16:01:53,741 - sqlalchemy.engine.Engine - INFO - [cached since 1659s ago] (5,)
2025-12-12 16:01:53,766 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:53,766 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:53,766 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:53,766 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:53,766 INFO sqlalchemy.engine.Engine [cached since 1659s ago] (5,)
2025-12-12 16:01:53,766 - sqlalchemy.engine.Engine - INFO - [cached since 1659s ago] (5,)
2025-12-12 16:01:53,866 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:53,866 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:53,898 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:53,898 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:53,917 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:53,917 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:53,918 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:53,918 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:53,918 INFO sqlalchemy.engine.Engine [cached since 1659s ago] (5,)
2025-12-12 16:01:53,918 - sqlalchemy.engine.Engine - INFO - [cached since 1659s ago] (5,)
2025-12-12 16:01:54,053 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:54,053 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:54,113 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:54,113 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:54,114 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:01:54,114 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:01:54,115 INFO sqlalchemy.engine.Engine [cached since 1237s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 53, 929003))
2025-12-12 16:01:54,115 - sqlalchemy.engine.Engine - INFO - [cached since 1237s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 53, 929003))
2025-12-12 16:01:54,178 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:54,178 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:54,179 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:01:54,179 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:01:54,179 INFO sqlalchemy.engine.Engine [cached since 1656s ago] (5,)
2025-12-12 16:01:54,179 - sqlalchemy.engine.Engine - INFO - [cached since 1656s ago] (5,)
2025-12-12 16:01:54,242 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:54,242 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:01:54,300 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:54,300 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:54,301 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:54,301 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:54,301 INFO sqlalchemy.engine.Engine [cached since 1237s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 54, 116358))
2025-12-12 16:01:54,301 - sqlalchemy.engine.Engine - INFO - [cached since 1237s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 54, 116358))
INFO:     127.0.0.1:37374 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 16:01:54,307 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:54,307 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:54,307 INFO sqlalchemy.engine.Engine [cached since 1655s ago] (5, 20, 0)
2025-12-12 16:01:54,307 - sqlalchemy.engine.Engine - INFO - [cached since 1655s ago] (5, 20, 0)
2025-12-12 16:01:54,373 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:54,373 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:01:54,423 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:54,423 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:54,423 INFO sqlalchemy.engine.Engine [cached since 1237s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 54, 116358))
2025-12-12 16:01:54,423 - sqlalchemy.engine.Engine - INFO - [cached since 1237s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 54, 116358))
INFO:     127.0.0.1:37378 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:01:54,485 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:54,485 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:54,486 INFO sqlalchemy.engine.Engine [cached since 1237s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 54, 116358))
2025-12-12 16:01:54,486 - sqlalchemy.engine.Engine - INFO - [cached since 1237s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 54, 116358))
2025-12-12 16:01:54,508 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:54,508 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:54,509 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:54,509 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:54,509 INFO sqlalchemy.engine.Engine [cached since 1659s ago] (5,)
2025-12-12 16:01:54,509 - sqlalchemy.engine.Engine - INFO - [cached since 1659s ago] (5,)
2025-12-12 16:01:54,548 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:54,548 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:01:54,549 INFO sqlalchemy.engine.Engine [cached since 1237s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 54, 116358))
2025-12-12 16:01:54,549 - sqlalchemy.engine.Engine - INFO - [cached since 1237s ago] (5, datetime.datetime(2025, 11, 12, 10, 31, 54, 116358))
2025-12-12 16:01:54,611 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:54,611 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:01:54,622 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:54,622 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:54,623 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:54,623 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:01:54,623 INFO sqlalchemy.engine.Engine [cached since 1660s ago] (5,)
2025-12-12 16:01:54,623 - sqlalchemy.engine.Engine - INFO - [cached since 1660s ago] (5,)
INFO:     127.0.0.1:37390 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 16:01:54,747 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:01:54,747 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:01:54,810 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:54,810 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:54,810 INFO sqlalchemy.engine.Engine [cached since 1659s ago] (5, 100, 0)
2025-12-12 16:01:54,810 - sqlalchemy.engine.Engine - INFO - [cached since 1659s ago] (5, 100, 0)
2025-12-12 16:01:54,998 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:54,998 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:54,999 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:01:54,999 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:01:54,999 INFO sqlalchemy.engine.Engine [cached since 1657s ago] (5,)
2025-12-12 16:01:54,999 - sqlalchemy.engine.Engine - INFO - [cached since 1657s ago] (5,)
2025-12-12 16:01:55,124 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:55,124 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:55,124 INFO sqlalchemy.engine.Engine [cached since 1656s ago] (5, 20, 0)
2025-12-12 16:01:55,124 - sqlalchemy.engine.Engine - INFO - [cached since 1656s ago] (5, 20, 0)
2025-12-12 16:01:55,187 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:55,187 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37378 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:01:55,416 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:55,416 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37398 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:01:55,681 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:55,681 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:55,681 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:55,681 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:55,681 INFO sqlalchemy.engine.Engine [cached since 1660s ago] (5,)
2025-12-12 16:01:55,681 - sqlalchemy.engine.Engine - INFO - [cached since 1660s ago] (5,)
2025-12-12 16:01:55,804 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:55,804 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:55,805 INFO sqlalchemy.engine.Engine [cached since 1660s ago] (5, 100, 0)
2025-12-12 16:01:55,805 - sqlalchemy.engine.Engine - INFO - [cached since 1660s ago] (5, 100, 0)
2025-12-12 16:01:55,866 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:55,866 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37398 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:37398 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:37398 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:01:58,086 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:58,086 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:58,087 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:58,087 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:58,087 INFO sqlalchemy.engine.Engine [cached since 1662s ago] (5,)
2025-12-12 16:01:58,087 - sqlalchemy.engine.Engine - INFO - [cached since 1662s ago] (5,)
2025-12-12 16:01:58,210 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:58,210 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:58,210 INFO sqlalchemy.engine.Engine [cached since 1662s ago] (5, 10, 0)
2025-12-12 16:01:58,210 - sqlalchemy.engine.Engine - INFO - [cached since 1662s ago] (5, 10, 0)
2025-12-12 16:01:58,277 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:58,277 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37398 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 16:01:58,528 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:01:58,528 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:01:58,529 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:58,529 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:01:58,529 INFO sqlalchemy.engine.Engine [cached since 1663s ago] (5,)
2025-12-12 16:01:58,529 - sqlalchemy.engine.Engine - INFO - [cached since 1663s ago] (5,)
2025-12-12 16:01:58,653 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:58,653 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:01:58,654 INFO sqlalchemy.engine.Engine [cached since 1663s ago] (5, 10, 0)
2025-12-12 16:01:58,654 - sqlalchemy.engine.Engine - INFO - [cached since 1663s ago] (5, 10, 0)
2025-12-12 16:01:58,718 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:01:58,718 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37398 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:37020 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:37020 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:02:20,481 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:20,481 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:20,482 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:20,482 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:20,482 INFO sqlalchemy.engine.Engine [cached since 1685s ago] (5,)
2025-12-12 16:02:20,482 - sqlalchemy.engine.Engine - INFO - [cached since 1685s ago] (5,)
2025-12-12 16:02:20,588 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:20,588 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:20,589 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:20,589 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:20,589 INFO sqlalchemy.engine.Engine [cached since 1685s ago] (5,)
2025-12-12 16:02:20,589 - sqlalchemy.engine.Engine - INFO - [cached since 1685s ago] (5,)
2025-12-12 16:02:20,605 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:20,605 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:20,605 INFO sqlalchemy.engine.Engine [cached since 1685s ago] (5, 5, 0)
2025-12-12 16:02:20,605 - sqlalchemy.engine.Engine - INFO - [cached since 1685s ago] (5, 5, 0)
2025-12-12 16:02:20,667 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:20,667 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37020 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
2025-12-12 16:02:20,744 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:02:20,744 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:02:20,745 INFO sqlalchemy.engine.Engine [cached since 1129s ago] (5,)
2025-12-12 16:02:20,745 - sqlalchemy.engine.Engine - INFO - [cached since 1129s ago] (5,)
2025-12-12 16:02:20,894 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:20,894 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:20,921 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:20,921 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:20,922 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:20,922 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:20,922 INFO sqlalchemy.engine.Engine [cached since 1685s ago] (5,)
2025-12-12 16:02:20,922 - sqlalchemy.engine.Engine - INFO - [cached since 1685s ago] (5,)
INFO:     127.0.0.1:37076 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
2025-12-12 16:02:21,043 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:21,043 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:21,043 INFO sqlalchemy.engine.Engine [cached since 1685s ago] (5, 5, 0)
2025-12-12 16:02:21,043 - sqlalchemy.engine.Engine - INFO - [cached since 1685s ago] (5, 5, 0)
2025-12-12 16:02:21,105 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:21,105 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:21,158 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:21,158 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:21,158 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:21,158 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:21,158 INFO sqlalchemy.engine.Engine [cached since 1685s ago] (5,)
2025-12-12 16:02:21,158 - sqlalchemy.engine.Engine - INFO - [cached since 1685s ago] (5,)
INFO:     127.0.0.1:37020 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
2025-12-12 16:02:21,283 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:02:21,283 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:02:21,283 INFO sqlalchemy.engine.Engine [cached since 1130s ago] (5,)
2025-12-12 16:02:21,283 - sqlalchemy.engine.Engine - INFO - [cached since 1130s ago] (5,)
2025-12-12 16:02:21,345 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:21,345 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37076 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:37076 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:37076 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:02:25,124 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:25,124 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:25,125 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:25,125 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:25,125 INFO sqlalchemy.engine.Engine [cached since 1689s ago] (5,)
2025-12-12 16:02:25,125 - sqlalchemy.engine.Engine - INFO - [cached since 1689s ago] (5,)
2025-12-12 16:02:25,248 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:25,248 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:25,248 INFO sqlalchemy.engine.Engine [cached since 1689s ago] (5, 10, 0)
2025-12-12 16:02:25,248 - sqlalchemy.engine.Engine - INFO - [cached since 1689s ago] (5, 10, 0)
2025-12-12 16:02:25,309 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:25,309 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37076 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 16:02:25,600 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:25,600 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:25,601 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:25,601 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:25,602 INFO sqlalchemy.engine.Engine [cached since 1690s ago] (5,)
2025-12-12 16:02:25,602 - sqlalchemy.engine.Engine - INFO - [cached since 1690s ago] (5,)
2025-12-12 16:02:25,752 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:25,752 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:25,752 INFO sqlalchemy.engine.Engine [cached since 1690s ago] (5, 10, 0)
2025-12-12 16:02:25,752 - sqlalchemy.engine.Engine - INFO - [cached since 1690s ago] (5, 10, 0)
2025-12-12 16:02:25,828 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:25,828 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37076 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 16:02:27,093 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:27,093 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:27,094 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:27,094 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:27,095 INFO sqlalchemy.engine.Engine [cached since 1692s ago] (5,)
2025-12-12 16:02:27,095 - sqlalchemy.engine.Engine - INFO - [cached since 1692s ago] (5,)
2025-12-12 16:02:27,217 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:27,217 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:27,462 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:27,462 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:27,463 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:02:27,463 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:02:27,463 INFO sqlalchemy.engine.Engine [cached since 1157s ago] (5,)
2025-12-12 16:02:27,463 - sqlalchemy.engine.Engine - INFO - [cached since 1157s ago] (5,)
2025-12-12 16:02:27,587 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:02:27,587 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:02:27,588 INFO sqlalchemy.engine.Engine [cached since 1157s ago] (5,)
2025-12-12 16:02:27,588 - sqlalchemy.engine.Engine - INFO - [cached since 1157s ago] (5,)
2025-12-12 16:02:27,651 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:27,651 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60444 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:37076 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
INFO:     127.0.0.1:60444 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:02:27,893 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:27,893 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:27,894 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:27,894 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:27,894 INFO sqlalchemy.engine.Engine [cached since 1693s ago] (5,)
2025-12-12 16:02:27,894 - sqlalchemy.engine.Engine - INFO - [cached since 1693s ago] (5,)
2025-12-12 16:02:27,902 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:27,902 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:27,902 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:27,902 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:27,903 INFO sqlalchemy.engine.Engine [cached since 1692s ago] (5,)
2025-12-12 16:02:27,903 - sqlalchemy.engine.Engine - INFO - [cached since 1692s ago] (5,)
2025-12-12 16:02:27,943 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:27,943 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:27,944 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:27,944 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:27,944 INFO sqlalchemy.engine.Engine [cached since 1693s ago] (5,)
2025-12-12 16:02:27,944 - sqlalchemy.engine.Engine - INFO - [cached since 1693s ago] (5,)
2025-12-12 16:02:28,017 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:28,017 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:28,026 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:28,026 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:28,026 INFO sqlalchemy.engine.Engine [cached since 1692s ago] (5, 100, 0)
2025-12-12 16:02:28,026 - sqlalchemy.engine.Engine - INFO - [cached since 1692s ago] (5, 100, 0)
2025-12-12 16:02:28,089 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:28,089 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60450 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:02:28,171 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:28,171 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:28,264 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:28,264 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:28,265 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:28,265 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:28,265 INFO sqlalchemy.engine.Engine [cached since 1690s ago] (5,)
2025-12-12 16:02:28,265 - sqlalchemy.engine.Engine - INFO - [cached since 1690s ago] (5,)
2025-12-12 16:02:28,339 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:28,339 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:28,339 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:28,339 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:28,340 INFO sqlalchemy.engine.Engine [cached since 1693s ago] (5,)
2025-12-12 16:02:28,340 - sqlalchemy.engine.Engine - INFO - [cached since 1693s ago] (5,)
2025-12-12 16:02:28,388 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:28,388 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:28,388 INFO sqlalchemy.engine.Engine [cached since 1689s ago] (5, 20, 0)
2025-12-12 16:02:28,388 - sqlalchemy.engine.Engine - INFO - [cached since 1689s ago] (5, 20, 0)
2025-12-12 16:02:28,427 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:28,427 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:28,427 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:02:28,427 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:02:28,428 INFO sqlalchemy.engine.Engine [cached since 1158s ago] (5,)
2025-12-12 16:02:28,428 - sqlalchemy.engine.Engine - INFO - [cached since 1158s ago] (5,)
2025-12-12 16:02:28,451 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:28,451 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:28,462 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:28,462 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:28,462 INFO sqlalchemy.engine.Engine [cached since 1693s ago] (5, 100, 0)
2025-12-12 16:02:28,462 - sqlalchemy.engine.Engine - INFO - [cached since 1693s ago] (5, 100, 0)
INFO:     127.0.0.1:37022 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:02:28,524 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:28,524 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:28,550 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:02:28,550 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:02:28,550 INFO sqlalchemy.engine.Engine [cached since 1158s ago] (5,)
2025-12-12 16:02:28,550 - sqlalchemy.engine.Engine - INFO - [cached since 1158s ago] (5,)
INFO:     127.0.0.1:60450 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:02:28,612 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:28,612 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37076 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
2025-12-12 16:02:28,743 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:28,743 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:28,744 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:28,744 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:28,744 INFO sqlalchemy.engine.Engine [cached since 1694s ago] (5,)
2025-12-12 16:02:28,744 - sqlalchemy.engine.Engine - INFO - [cached since 1694s ago] (5,)
2025-12-12 16:02:28,894 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:28,894 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:29,154 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:29,154 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:29,155 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:29,155 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:29,156 INFO sqlalchemy.engine.Engine [cached since 1691s ago] (5,)
2025-12-12 16:02:29,156 - sqlalchemy.engine.Engine - INFO - [cached since 1691s ago] (5,)
2025-12-12 16:02:29,281 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:29,281 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:29,282 INFO sqlalchemy.engine.Engine [cached since 1690s ago] (5, 20, 0)
2025-12-12 16:02:29,282 - sqlalchemy.engine.Engine - INFO - [cached since 1690s ago] (5, 20, 0)
2025-12-12 16:02:29,346 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:29,346 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37022 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:02:29,940 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:29,940 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:29,941 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:29,941 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:29,941 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (5,)
2025-12-12 16:02:29,941 - sqlalchemy.engine.Engine - INFO - [cached since 1695s ago] (5,)
2025-12-12 16:02:29,947 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:29,947 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:29,948 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:29,948 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:29,948 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (5,)
2025-12-12 16:02:29,948 - sqlalchemy.engine.Engine - INFO - [cached since 1695s ago] (5,)
2025-12-12 16:02:30,063 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:30,063 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:30,070 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:30,070 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:30,316 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:30,316 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:30,317 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:30,317 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:30,317 INFO sqlalchemy.engine.Engine [cached since 1273s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 30, 132048))
2025-12-12 16:02:30,317 - sqlalchemy.engine.Engine - INFO - [cached since 1273s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 30, 132048))
INFO:     127.0.0.1:60444 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:60444 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:02:30,356 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:30,356 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:30,356 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:02:30,356 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:02:30,356 INFO sqlalchemy.engine.Engine [cached since 1273s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 30, 125298))
2025-12-12 16:02:30,356 - sqlalchemy.engine.Engine - INFO - [cached since 1273s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 30, 125298))
2025-12-12 16:02:30,440 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:30,440 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:30,441 INFO sqlalchemy.engine.Engine [cached since 1273s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 30, 132048))
2025-12-12 16:02:30,441 - sqlalchemy.engine.Engine - INFO - [cached since 1273s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 30, 132048))
2025-12-12 16:02:30,504 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:30,504 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:30,504 INFO sqlalchemy.engine.Engine [cached since 1273s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 30, 132048))
2025-12-12 16:02:30,504 - sqlalchemy.engine.Engine - INFO - [cached since 1273s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 30, 132048))
2025-12-12 16:02:30,507 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:30,507 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:30,508 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:30,508 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:30,508 INFO sqlalchemy.engine.Engine [cached since 1696s ago] (5,)
2025-12-12 16:02:30,508 - sqlalchemy.engine.Engine - INFO - [cached since 1696s ago] (5,)
2025-12-12 16:02:30,511 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:30,511 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:30,512 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:30,512 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:30,512 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (5,)
2025-12-12 16:02:30,512 - sqlalchemy.engine.Engine - INFO - [cached since 1695s ago] (5,)
2025-12-12 16:02:30,568 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:30,568 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:30,568 INFO sqlalchemy.engine.Engine [cached since 1273s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 30, 132048))
2025-12-12 16:02:30,568 - sqlalchemy.engine.Engine - INFO - [cached since 1273s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 30, 132048))
2025-12-12 16:02:30,580 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:30,580 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:30,631 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:30,631 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:30,633 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:30,633 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:30,636 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:30,636 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:30,636 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (5, 100, 0)
2025-12-12 16:02:30,636 - sqlalchemy.engine.Engine - INFO - [cached since 1695s ago] (5, 100, 0)
INFO:     127.0.0.1:37076 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
INFO:     127.0.0.1:37022 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 16:02:30,697 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:30,697 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60444 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:02:30,877 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:30,877 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:30,877 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:30,877 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:30,878 INFO sqlalchemy.engine.Engine [cached since 1693s ago] (5,)
2025-12-12 16:02:30,878 - sqlalchemy.engine.Engine - INFO - [cached since 1693s ago] (5,)
2025-12-12 16:02:30,882 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:30,882 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:30,883 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:30,883 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:30,883 INFO sqlalchemy.engine.Engine [cached since 1696s ago] (5,)
2025-12-12 16:02:30,883 - sqlalchemy.engine.Engine - INFO - [cached since 1696s ago] (5,)
2025-12-12 16:02:30,884 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:30,884 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:30,884 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:30,884 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:30,884 INFO sqlalchemy.engine.Engine [cached since 1696s ago] (5,)
2025-12-12 16:02:30,884 - sqlalchemy.engine.Engine - INFO - [cached since 1696s ago] (5,)
2025-12-12 16:02:30,946 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:30,946 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:30,948 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:30,948 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:30,948 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (5,)
2025-12-12 16:02:30,948 - sqlalchemy.engine.Engine - INFO - [cached since 1695s ago] (5,)
2025-12-12 16:02:31,000 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:31,000 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:31,001 INFO sqlalchemy.engine.Engine [cached since 1692s ago] (5, 20, 0)
2025-12-12 16:02:31,001 - sqlalchemy.engine.Engine - INFO - [cached since 1692s ago] (5, 20, 0)
2025-12-12 16:02:31,011 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:31,011 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:31,034 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:31,034 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:31,071 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:31,071 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:31,071 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (5, 100, 0)
2025-12-12 16:02:31,071 - sqlalchemy.engine.Engine - INFO - [cached since 1695s ago] (5, 100, 0)
2025-12-12 16:02:31,073 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:31,073 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:31,133 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:31,133 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60450 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:60444 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:02:31,258 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:31,258 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:31,259 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:31,259 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:31,259 INFO sqlalchemy.engine.Engine [cached since 1274s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 31, 74603))
2025-12-12 16:02:31,259 - sqlalchemy.engine.Engine - INFO - [cached since 1274s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 31, 74603))
2025-12-12 16:02:31,322 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:31,322 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:31,322 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:31,322 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:31,323 INFO sqlalchemy.engine.Engine [cached since 1697s ago] (5,)
2025-12-12 16:02:31,323 - sqlalchemy.engine.Engine - INFO - [cached since 1697s ago] (5,)
2025-12-12 16:02:31,332 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:31,332 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:31,333 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:02:31,333 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:02:31,333 INFO sqlalchemy.engine.Engine [cached since 1274s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 31, 109266))
2025-12-12 16:02:31,333 - sqlalchemy.engine.Engine - INFO - [cached since 1274s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 31, 109266))
2025-12-12 16:02:31,382 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:31,382 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:31,382 INFO sqlalchemy.engine.Engine [cached since 1274s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 31, 74603))
2025-12-12 16:02:31,382 - sqlalchemy.engine.Engine - INFO - [cached since 1274s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 31, 74603))
2025-12-12 16:02:31,444 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:31,444 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:31,446 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:31,446 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:31,446 INFO sqlalchemy.engine.Engine [cached since 1274s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 31, 74603))
2025-12-12 16:02:31,446 - sqlalchemy.engine.Engine - INFO - [cached since 1274s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 31, 74603))
2025-12-12 16:02:31,482 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:31,482 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:31,509 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:31,509 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:31,510 INFO sqlalchemy.engine.Engine [cached since 1274s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 31, 74603))
2025-12-12 16:02:31,510 - sqlalchemy.engine.Engine - INFO - [cached since 1274s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 31, 74603))
INFO:     127.0.0.1:37076 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 16:02:31,573 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:31,573 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37022 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 16:02:31,695 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:31,695 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:31,695 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:31,695 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:31,695 INFO sqlalchemy.engine.Engine [cached since 1694s ago] (5,)
2025-12-12 16:02:31,695 - sqlalchemy.engine.Engine - INFO - [cached since 1694s ago] (5,)
2025-12-12 16:02:31,828 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:31,828 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:31,828 INFO sqlalchemy.engine.Engine [cached since 1693s ago] (5, 20, 0)
2025-12-12 16:02:31,828 - sqlalchemy.engine.Engine - INFO - [cached since 1693s ago] (5, 20, 0)
2025-12-12 16:02:31,891 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:31,891 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60450 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:02:33,733 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:33,733 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:33,733 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:33,733 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:33,734 INFO sqlalchemy.engine.Engine [cached since 1699s ago] (5,)
2025-12-12 16:02:33,734 - sqlalchemy.engine.Engine - INFO - [cached since 1699s ago] (5,)
2025-12-12 16:02:33,791 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:33,791 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:33,792 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:33,792 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:33,792 INFO sqlalchemy.engine.Engine [cached since 1699s ago] (5,)
2025-12-12 16:02:33,792 - sqlalchemy.engine.Engine - INFO - [cached since 1699s ago] (5,)
2025-12-12 16:02:33,856 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:33,856 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:33,944 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:33,944 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:34,105 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:34,105 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:34,106 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:34,106 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:34,107 INFO sqlalchemy.engine.Engine [cached since 1277s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 33, 920244))
2025-12-12 16:02:34,107 - sqlalchemy.engine.Engine - INFO - [cached since 1277s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 33, 920244))
2025-12-12 16:02:34,204 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:34,204 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:34,205 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:02:34,205 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:02:34,206 INFO sqlalchemy.engine.Engine [cached since 1277s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 34, 21925))
2025-12-12 16:02:34,206 - sqlalchemy.engine.Engine - INFO - [cached since 1277s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 34, 21925))
2025-12-12 16:02:34,232 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:34,232 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:34,233 INFO sqlalchemy.engine.Engine [cached since 1277s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 33, 920244))
2025-12-12 16:02:34,233 - sqlalchemy.engine.Engine - INFO - [cached since 1277s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 33, 920244))
2025-12-12 16:02:34,299 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:34,299 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:34,299 INFO sqlalchemy.engine.Engine [cached since 1277s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 33, 920244))
2025-12-12 16:02:34,299 - sqlalchemy.engine.Engine - INFO - [cached since 1277s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 33, 920244))
2025-12-12 16:02:34,328 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:34,328 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:34,367 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:34,367 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:34,367 INFO sqlalchemy.engine.Engine [cached since 1277s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 33, 920244))
2025-12-12 16:02:34,367 - sqlalchemy.engine.Engine - INFO - [cached since 1277s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 33, 920244))
INFO:     127.0.0.1:37022 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 16:02:34,429 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:34,429 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60450 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 16:02:34,573 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:34,573 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:34,574 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:34,574 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:34,574 INFO sqlalchemy.engine.Engine [cached since 1700s ago] (5,)
2025-12-12 16:02:34,574 - sqlalchemy.engine.Engine - INFO - [cached since 1700s ago] (5,)
2025-12-12 16:02:34,695 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:34,695 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:34,720 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:34,720 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:34,720 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:34,720 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:34,720 INFO sqlalchemy.engine.Engine [cached since 1700s ago] (5,)
2025-12-12 16:02:34,720 - sqlalchemy.engine.Engine - INFO - [cached since 1700s ago] (5,)
2025-12-12 16:02:34,869 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:34,869 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:34,938 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:34,938 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:34,939 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:02:34,939 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:02:34,939 INFO sqlalchemy.engine.Engine [cached since 1278s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 34, 756067))
2025-12-12 16:02:34,939 - sqlalchemy.engine.Engine - INFO - [cached since 1278s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 34, 756067))
2025-12-12 16:02:35,061 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:35,061 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:37022 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 16:02:35,131 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:35,131 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:35,132 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:35,132 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:35,132 INFO sqlalchemy.engine.Engine [cached since 1278s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 34, 944630))
2025-12-12 16:02:35,132 - sqlalchemy.engine.Engine - INFO - [cached since 1278s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 34, 944630))
2025-12-12 16:02:35,256 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:35,256 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:35,257 INFO sqlalchemy.engine.Engine [cached since 1278s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 34, 944630))
2025-12-12 16:02:35,257 - sqlalchemy.engine.Engine - INFO - [cached since 1278s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 34, 944630))
2025-12-12 16:02:35,319 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:35,319 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:35,320 INFO sqlalchemy.engine.Engine [cached since 1278s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 34, 944630))
2025-12-12 16:02:35,320 - sqlalchemy.engine.Engine - INFO - [cached since 1278s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 34, 944630))
2025-12-12 16:02:35,383 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:35,383 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:35,383 INFO sqlalchemy.engine.Engine [cached since 1278s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 34, 944630))
2025-12-12 16:02:35,383 - sqlalchemy.engine.Engine - INFO - [cached since 1278s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 34, 944630))
2025-12-12 16:02:35,446 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:35,446 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60450 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 16:02:38,418 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:38,418 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:38,418 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:38,418 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:38,418 INFO sqlalchemy.engine.Engine [cached since 1704s ago] (5,)
2025-12-12 16:02:38,418 - sqlalchemy.engine.Engine - INFO - [cached since 1704s ago] (5,)
2025-12-12 16:02:38,458 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:38,458 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:38,459 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:38,459 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:38,459 INFO sqlalchemy.engine.Engine [cached since 1704s ago] (5,)
2025-12-12 16:02:38,459 - sqlalchemy.engine.Engine - INFO - [cached since 1704s ago] (5,)
2025-12-12 16:02:38,539 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:38,539 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:38,608 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:38,608 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:34002 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:34002 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:02:38,780 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:38,780 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:38,781 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:38,781 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:38,781 INFO sqlalchemy.engine.Engine [cached since 1282s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 38, 599971))
2025-12-12 16:02:38,781 - sqlalchemy.engine.Engine - INFO - [cached since 1282s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 38, 599971))
2025-12-12 16:02:38,867 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:38,867 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:38,867 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:02:38,867 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:02:38,868 INFO sqlalchemy.engine.Engine [cached since 1282s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 38, 681932))
2025-12-12 16:02:38,868 - sqlalchemy.engine.Engine - INFO - [cached since 1282s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 38, 681932))
2025-12-12 16:02:38,902 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:38,902 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:38,902 INFO sqlalchemy.engine.Engine [cached since 1282s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 38, 599971))
2025-12-12 16:02:38,902 - sqlalchemy.engine.Engine - INFO - [cached since 1282s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 38, 599971))
2025-12-12 16:02:38,953 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:38,953 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:38,953 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:38,953 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:38,953 INFO sqlalchemy.engine.Engine [cached since 1704s ago] (5,)
2025-12-12 16:02:38,953 - sqlalchemy.engine.Engine - INFO - [cached since 1704s ago] (5,)
2025-12-12 16:02:38,964 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:38,964 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:38,964 INFO sqlalchemy.engine.Engine [cached since 1282s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 38, 599971))
2025-12-12 16:02:38,964 - sqlalchemy.engine.Engine - INFO - [cached since 1282s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 38, 599971))
2025-12-12 16:02:38,990 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:38,990 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:38,999 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:38,999 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:38,999 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:38,999 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:38,999 INFO sqlalchemy.engine.Engine [cached since 1703s ago] (5,)
2025-12-12 16:02:38,999 - sqlalchemy.engine.Engine - INFO - [cached since 1703s ago] (5,)
2025-12-12 16:02:39,025 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:39,025 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:39,025 INFO sqlalchemy.engine.Engine [cached since 1282s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 38, 599971))
2025-12-12 16:02:39,025 - sqlalchemy.engine.Engine - INFO - [cached since 1282s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 38, 599971))
INFO:     127.0.0.1:37022 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 16:02:39,074 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:39,074 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:39,087 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:39,087 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:39,148 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:39,148 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:39,148 INFO sqlalchemy.engine.Engine [cached since 1703s ago] (5, 100, 0)
2025-12-12 16:02:39,148 - sqlalchemy.engine.Engine - INFO - [cached since 1703s ago] (5, 100, 0)
INFO:     127.0.0.1:60450 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 16:02:39,222 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:39,222 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:39,238 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:39,238 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:39,238 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:39,238 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:39,238 INFO sqlalchemy.engine.Engine [cached since 1705s ago] (5,)
2025-12-12 16:02:39,238 - sqlalchemy.engine.Engine - INFO - [cached since 1705s ago] (5,)
INFO:     127.0.0.1:34002 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:02:39,329 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:39,329 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:39,330 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:39,330 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:39,330 INFO sqlalchemy.engine.Engine [cached since 1701s ago] (5,)
2025-12-12 16:02:39,330 - sqlalchemy.engine.Engine - INFO - [cached since 1701s ago] (5,)
2025-12-12 16:02:39,361 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:39,361 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:39,450 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:39,450 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:39,451 INFO sqlalchemy.engine.Engine [cached since 1700s ago] (5, 20, 0)
2025-12-12 16:02:39,451 - sqlalchemy.engine.Engine - INFO - [cached since 1700s ago] (5, 20, 0)
2025-12-12 16:02:39,452 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:39,452 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:39,452 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:39,452 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:39,452 INFO sqlalchemy.engine.Engine [cached since 1705s ago] (5,)
2025-12-12 16:02:39,452 - sqlalchemy.engine.Engine - INFO - [cached since 1705s ago] (5,)
2025-12-12 16:02:39,512 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:39,512 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:39,531 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:39,531 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:39,532 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:39,532 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:39,532 INFO sqlalchemy.engine.Engine [cached since 1704s ago] (5,)
2025-12-12 16:02:39,532 - sqlalchemy.engine.Engine - INFO - [cached since 1704s ago] (5,)
INFO:     127.0.0.1:33992 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:02:39,580 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:39,580 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:39,606 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:39,606 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:39,606 INFO sqlalchemy.engine.Engine SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:02:39,606 - sqlalchemy.engine.Engine - INFO - SELECT date(queries.created_at) AS date, count(queries.id) AS query_count 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE GROUP BY date(queries.created_at) ORDER BY date(queries.created_at)
2025-12-12 16:02:39,606 INFO sqlalchemy.engine.Engine [cached since 1283s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 39, 422792))
2025-12-12 16:02:39,606 - sqlalchemy.engine.Engine - INFO - [cached since 1283s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 39, 422792))
2025-12-12 16:02:39,681 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:39,681 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:39,681 INFO sqlalchemy.engine.Engine [cached since 1704s ago] (5, 100, 0)
2025-12-12 16:02:39,681 - sqlalchemy.engine.Engine - INFO - [cached since 1704s ago] (5, 100, 0)
2025-12-12 16:02:39,735 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:39,735 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:39,756 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:39,756 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:39,760 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:39,760 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:39,761 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:39,761 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:39,761 INFO sqlalchemy.engine.Engine [cached since 1705s ago] (5,)
2025-12-12 16:02:39,761 - sqlalchemy.engine.Engine - INFO - [cached since 1705s ago] (5,)
INFO:     127.0.0.1:37022 - "GET /api/v1/analytics/timeline?days=30 HTTP/1.1" 200 OK
2025-12-12 16:02:39,821 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:39,821 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:39,822 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:39,822 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS total_docs, sum(documents.file_size) AS total_size, avg(documents.word_count) AS avg_word_count 
FROM documents 
WHERE documents.user_id = $1::INTEGER AND documents.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:39,822 INFO sqlalchemy.engine.Engine [cached since 1283s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 39, 640492))
2025-12-12 16:02:39,822 - sqlalchemy.engine.Engine - INFO - [cached since 1283s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 39, 640492))
INFO:     127.0.0.1:34002 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:02:39,881 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:39,881 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:39,942 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:39,942 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS total_queries, avg(queries.total_time_ms) AS avg_response_time, avg(queries.confidence_score) AS avg_confidence 
FROM queries 
WHERE queries.user_id = $1::INTEGER AND queries.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:39,943 INFO sqlalchemy.engine.Engine [cached since 1283s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 39, 640492))
2025-12-12 16:02:39,943 - sqlalchemy.engine.Engine - INFO - [cached since 1283s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 39, 640492))
2025-12-12 16:02:40,004 INFO sqlalchemy.engine.Engine SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:40,004 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_sessions.id) AS count_1 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:40,004 INFO sqlalchemy.engine.Engine [cached since 1283s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 39, 640492))
2025-12-12 16:02:40,004 - sqlalchemy.engine.Engine - INFO - [cached since 1283s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 39, 640492))
2025-12-12 16:02:40,066 INFO sqlalchemy.engine.Engine SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:40,066 - sqlalchemy.engine.Engine - INFO - SELECT count(chat_messages.id) AS count_1 
FROM chat_messages JOIN chat_sessions ON chat_sessions.id = chat_messages.session_id 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_messages.created_at >= $2::TIMESTAMP WITH TIME ZONE
2025-12-12 16:02:40,066 INFO sqlalchemy.engine.Engine [cached since 1283s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 39, 640492))
2025-12-12 16:02:40,066 - sqlalchemy.engine.Engine - INFO - [cached since 1283s ago] (5, datetime.datetime(2025, 11, 12, 10, 32, 39, 640492))
2025-12-12 16:02:40,127 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:40,127 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:40,127 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:40,127 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:40,127 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:40,127 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:40,127 INFO sqlalchemy.engine.Engine [cached since 1702s ago] (5,)
2025-12-12 16:02:40,127 - sqlalchemy.engine.Engine - INFO - [cached since 1702s ago] (5,)
INFO:     127.0.0.1:60450 - "GET /api/v1/analytics/stats?days=30 HTTP/1.1" 200 OK
2025-12-12 16:02:40,250 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:40,250 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:40,250 INFO sqlalchemy.engine.Engine [cached since 1701s ago] (5, 20, 0)
2025-12-12 16:02:40,250 - sqlalchemy.engine.Engine - INFO - [cached since 1701s ago] (5, 20, 0)
2025-12-12 16:02:40,312 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:40,312 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:33992 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:02:49,862 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:49,862 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:49,862 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:49,862 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:49,863 INFO sqlalchemy.engine.Engine [cached since 1715s ago] (5,)
2025-12-12 16:02:49,863 - sqlalchemy.engine.Engine - INFO - [cached since 1715s ago] (5,)
2025-12-12 16:02:50,012 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:50,012 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:51184 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:51184 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:02:50,273 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:50,273 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:50,273 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:02:50,273 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:02:50,273 INFO sqlalchemy.engine.Engine [cached since 1180s ago] (5,)
2025-12-12 16:02:50,273 - sqlalchemy.engine.Engine - INFO - [cached since 1180s ago] (5,)
2025-12-12 16:02:50,396 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:02:50,396 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:02:50,396 INFO sqlalchemy.engine.Engine [cached since 1179s ago] (5,)
2025-12-12 16:02:50,396 - sqlalchemy.engine.Engine - INFO - [cached since 1179s ago] (5,)
2025-12-12 16:02:50,454 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:50,454 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:50,454 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:50,454 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:50,454 INFO sqlalchemy.engine.Engine [cached since 1715s ago] (5,)
2025-12-12 16:02:50,454 - sqlalchemy.engine.Engine - INFO - [cached since 1715s ago] (5,)
2025-12-12 16:02:50,458 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:50,458 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:51178 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
2025-12-12 16:02:50,577 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:50,577 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:50,578 INFO sqlalchemy.engine.Engine [cached since 1715s ago] (5, 10, 0)
2025-12-12 16:02:50,578 - sqlalchemy.engine.Engine - INFO - [cached since 1715s ago] (5, 10, 0)
2025-12-12 16:02:50,643 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:50,643 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:51184 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 16:02:50,712 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:50,712 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:50,712 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:50,712 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:50,712 INFO sqlalchemy.engine.Engine [cached since 1716s ago] (5,)
2025-12-12 16:02:50,712 - sqlalchemy.engine.Engine - INFO - [cached since 1716s ago] (5,)
2025-12-12 16:02:50,835 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:50,835 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:50,927 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:50,927 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:50,928 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:50,928 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:50,928 INFO sqlalchemy.engine.Engine [cached since 1715s ago] (5,)
2025-12-12 16:02:50,928 - sqlalchemy.engine.Engine - INFO - [cached since 1715s ago] (5,)
2025-12-12 16:02:51,076 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:51,076 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:51,076 INFO sqlalchemy.engine.Engine [cached since 1715s ago] (5, 10, 0)
2025-12-12 16:02:51,076 - sqlalchemy.engine.Engine - INFO - [cached since 1715s ago] (5, 10, 0)
2025-12-12 16:02:51,079 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:51,079 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:51,079 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:02:51,079 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:02:51,079 INFO sqlalchemy.engine.Engine [cached since 1180s ago] (5,)
2025-12-12 16:02:51,079 - sqlalchemy.engine.Engine - INFO - [cached since 1180s ago] (5,)
2025-12-12 16:02:51,151 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:51,151 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:51,200 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:02:51,200 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:02:51,200 INFO sqlalchemy.engine.Engine [cached since 1180s ago] (5,)
2025-12-12 16:02:51,200 - sqlalchemy.engine.Engine - INFO - [cached since 1180s ago] (5,)
INFO:     127.0.0.1:51184 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 16:02:51,261 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:51,261 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:51178 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
2025-12-12 16:02:57,438 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:57,438 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:57,439 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:57,439 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:57,439 INFO sqlalchemy.engine.Engine [cached since 1723s ago] (5,)
2025-12-12 16:02:57,439 - sqlalchemy.engine.Engine - INFO - [cached since 1723s ago] (5,)
2025-12-12 16:02:57,562 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:57,562 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:46670 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:46670 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:02:57,808 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:57,808 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:57,808 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:02:57,808 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:02:57,809 INFO sqlalchemy.engine.Engine [cached since 1187s ago] (5,)
2025-12-12 16:02:57,809 - sqlalchemy.engine.Engine - INFO - [cached since 1187s ago] (5,)
2025-12-12 16:02:57,924 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:57,924 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:57,925 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:57,925 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:57,925 INFO sqlalchemy.engine.Engine [cached since 1722s ago] (5,)
2025-12-12 16:02:57,925 - sqlalchemy.engine.Engine - INFO - [cached since 1722s ago] (5,)
2025-12-12 16:02:57,933 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:02:57,933 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:02:57,934 INFO sqlalchemy.engine.Engine [cached since 1187s ago] (5,)
2025-12-12 16:02:57,934 - sqlalchemy.engine.Engine - INFO - [cached since 1187s ago] (5,)
2025-12-12 16:02:57,960 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:57,960 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:57,960 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:57,960 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:57,961 INFO sqlalchemy.engine.Engine [cached since 1723s ago] (5,)
2025-12-12 16:02:57,961 - sqlalchemy.engine.Engine - INFO - [cached since 1723s ago] (5,)
2025-12-12 16:02:57,996 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:57,996 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:58,048 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:58,048 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:58,048 INFO sqlalchemy.engine.Engine [cached since 1722s ago] (5, 100, 0)
2025-12-12 16:02:58,048 - sqlalchemy.engine.Engine - INFO - [cached since 1722s ago] (5, 100, 0)
INFO:     127.0.0.1:46648 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
2025-12-12 16:02:58,111 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:58,111 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:58,115 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:58,115 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:46670 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:02:58,249 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:58,249 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:58,250 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:58,250 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:58,250 INFO sqlalchemy.engine.Engine [cached since 1724s ago] (5,)
2025-12-12 16:02:58,250 - sqlalchemy.engine.Engine - INFO - [cached since 1724s ago] (5,)
2025-12-12 16:02:58,371 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:58,371 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:58,372 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:58,372 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:58,372 INFO sqlalchemy.engine.Engine [cached since 1720s ago] (5,)
2025-12-12 16:02:58,372 - sqlalchemy.engine.Engine - INFO - [cached since 1720s ago] (5,)
2025-12-12 16:02:58,373 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:58,373 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:58,374 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:58,374 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:58,374 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:58,374 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:02:58,374 INFO sqlalchemy.engine.Engine [cached since 1723s ago] (5,)
2025-12-12 16:02:58,374 - sqlalchemy.engine.Engine - INFO - [cached since 1723s ago] (5,)
2025-12-12 16:02:58,496 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:58,496 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:58,496 INFO sqlalchemy.engine.Engine [cached since 1719s ago] (5, 20, 0)
2025-12-12 16:02:58,496 - sqlalchemy.engine.Engine - INFO - [cached since 1719s ago] (5, 20, 0)
2025-12-12 16:02:58,498 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:58,498 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:58,498 INFO sqlalchemy.engine.Engine [cached since 1723s ago] (5, 100, 0)
2025-12-12 16:02:58,498 - sqlalchemy.engine.Engine - INFO - [cached since 1723s ago] (5, 100, 0)
2025-12-12 16:02:58,558 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:58,558 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:02:58,561 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:58,561 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:46656 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46670 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:02:58,656 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:58,656 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:58,657 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:02:58,657 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections 
WHERE collections.user_id = $1::INTEGER
2025-12-12 16:02:58,657 INFO sqlalchemy.engine.Engine [cached since 1188s ago] (5,)
2025-12-12 16:02:58,657 - sqlalchemy.engine.Engine - INFO - [cached since 1188s ago] (5,)
2025-12-12 16:02:58,811 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:58,811 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:58,812 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:58,812 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:02:58,812 INFO sqlalchemy.engine.Engine [cached since 1724s ago] (5,)
2025-12-12 16:02:58,812 - sqlalchemy.engine.Engine - INFO - [cached since 1724s ago] (5,)
2025-12-12 16:02:58,881 INFO sqlalchemy.engine.Engine SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:02:58,881 - sqlalchemy.engine.Engine - INFO - SELECT collections.id, collections.user_id, collections.name, collections.description, collections.color, collections.icon, collections.is_public, collections.created_at, collections.updated_at 
FROM collections JOIN collection_shares ON collections.id = collection_shares.collection_id 
WHERE collection_shares.shared_with_user_id = $1::INTEGER
2025-12-12 16:02:58,881 INFO sqlalchemy.engine.Engine [cached since 1188s ago] (5,)
2025-12-12 16:02:58,881 - sqlalchemy.engine.Engine - INFO - [cached since 1188s ago] (5,)
2025-12-12 16:02:58,934 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:02:58,934 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:02:59,031 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:59,031 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:46648 - "GET /api/v1/collections?include_shared=true HTTP/1.1" 200 OK
2025-12-12 16:02:59,193 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:02:59,193 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:02:59,194 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:59,194 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:02:59,195 INFO sqlalchemy.engine.Engine [cached since 1721s ago] (5,)
2025-12-12 16:02:59,195 - sqlalchemy.engine.Engine - INFO - [cached since 1721s ago] (5,)
2025-12-12 16:02:59,317 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:59,317 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:02:59,317 INFO sqlalchemy.engine.Engine [cached since 1720s ago] (5, 20, 0)
2025-12-12 16:02:59,317 - sqlalchemy.engine.Engine - INFO - [cached since 1720s ago] (5, 20, 0)
2025-12-12 16:02:59,379 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:02:59,379 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:46656 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:03:20,084 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:03:20,084 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:03:20,085 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-12-12 16:03:20,085 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-12-12 16:03:20,085 INFO sqlalchemy.engine.Engine [cached since 133.4s ago] ('sys@yopmail.com',)
2025-12-12 16:03:20,085 - sqlalchemy.engine.Engine - INFO - [cached since 133.4s ago] ('sys@yopmail.com',)
2025-12-12 16:03:20,597 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:03:20,597 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:33480 - "POST /api/v1/auth/login HTTP/1.1" 200 OK
2025-12-12 16:03:20,853 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:03:20,853 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:03:20,853 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:03:20,853 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:03:20,853 INFO sqlalchemy.engine.Engine [cached since 1746s ago] (3,)
2025-12-12 16:03:20,853 - sqlalchemy.engine.Engine - INFO - [cached since 1746s ago] (3,)
2025-12-12 16:03:20,974 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:03:20,974 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:33480 - "GET /api/v1/users/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:33488 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:33488 - "GET /api/v1/documents?page=1&page_size=5 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:03:21,309 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:03:21,309 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:03:21,309 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:03:21,309 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:03:21,309 INFO sqlalchemy.engine.Engine [cached since 1746s ago] (3,)
2025-12-12 16:03:21,309 - sqlalchemy.engine.Engine - INFO - [cached since 1746s ago] (3,)
2025-12-12 16:03:21,400 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:03:21,400 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:03:21,401 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:03:21,401 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:03:21,401 INFO sqlalchemy.engine.Engine [cached since 1746s ago] (3,)
2025-12-12 16:03:21,401 - sqlalchemy.engine.Engine - INFO - [cached since 1746s ago] (3,)
2025-12-12 16:03:21,458 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:03:21,458 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:03:21,458 INFO sqlalchemy.engine.Engine [cached since 1190s ago] (3,)
2025-12-12 16:03:21,458 - sqlalchemy.engine.Engine - INFO - [cached since 1190s ago] (3,)
2025-12-12 16:03:21,522 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:03:21,522 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:03:21,522 INFO sqlalchemy.engine.Engine [cached since 1746s ago] (3, 5, 0)
2025-12-12 16:03:21,522 - sqlalchemy.engine.Engine - INFO - [cached since 1746s ago] (3, 5, 0)
2025-12-12 16:03:21,533 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:03:21,533 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:03:21,585 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:03:21,585 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:33480 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:33488 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
2025-12-12 16:03:21,799 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:03:21,799 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:03:21,799 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:03:21,799 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:03:21,800 INFO sqlalchemy.engine.Engine [cached since 1746s ago] (3,)
2025-12-12 16:03:21,800 - sqlalchemy.engine.Engine - INFO - [cached since 1746s ago] (3,)
2025-12-12 16:03:21,838 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:03:21,838 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:03:21,839 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:03:21,839 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:03:21,839 INFO sqlalchemy.engine.Engine [cached since 1746s ago] (3,)
2025-12-12 16:03:21,839 - sqlalchemy.engine.Engine - INFO - [cached since 1746s ago] (3,)
2025-12-12 16:03:21,925 INFO sqlalchemy.engine.Engine SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:03:21,925 - sqlalchemy.engine.Engine - INFO - SELECT count(queries.id) AS count_1 
FROM queries 
WHERE queries.user_id = $1::INTEGER
2025-12-12 16:03:21,925 INFO sqlalchemy.engine.Engine [cached since 1191s ago] (3,)
2025-12-12 16:03:21,925 - sqlalchemy.engine.Engine - INFO - [cached since 1191s ago] (3,)
2025-12-12 16:03:21,961 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:03:21,961 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:03:21,962 INFO sqlalchemy.engine.Engine [cached since 1746s ago] (3, 5, 0)
2025-12-12 16:03:21,962 - sqlalchemy.engine.Engine - INFO - [cached since 1746s ago] (3, 5, 0)
2025-12-12 16:03:21,988 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:03:21,988 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:03:22,024 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:03:22,024 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:33480 - "GET /api/v1/users/me/stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:33488 - "GET /api/v1/documents/?page=1&page_size=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33480 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:33480 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:03:23,135 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:03:23,135 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:03:23,136 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:03:23,136 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:03:23,137 INFO sqlalchemy.engine.Engine [cached since 1747s ago] (3,)
2025-12-12 16:03:23,137 - sqlalchemy.engine.Engine - INFO - [cached since 1747s ago] (3,)
2025-12-12 16:03:23,173 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:03:23,173 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:03:23,174 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:03:23,174 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:03:23,174 INFO sqlalchemy.engine.Engine [cached since 1749s ago] (3,)
2025-12-12 16:03:23,174 - sqlalchemy.engine.Engine - INFO - [cached since 1749s ago] (3,)
2025-12-12 16:03:23,259 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:03:23,259 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:03:23,260 INFO sqlalchemy.engine.Engine [cached since 1747s ago] (3, 100, 0)
2025-12-12 16:03:23,260 - sqlalchemy.engine.Engine - INFO - [cached since 1747s ago] (3, 100, 0)
2025-12-12 16:03:23,321 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:03:23,321 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:03:23,345 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:03:23,345 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:33480 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:03:23,569 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:03:23,569 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:03:23,570 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:03:23,570 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:03:23,570 INFO sqlalchemy.engine.Engine [cached since 1748s ago] (3,)
2025-12-12 16:03:23,570 - sqlalchemy.engine.Engine - INFO - [cached since 1748s ago] (3,)
2025-12-12 16:03:23,602 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:03:23,602 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:03:23,603 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:03:23,603 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:03:23,603 INFO sqlalchemy.engine.Engine [cached since 1745s ago] (3,)
2025-12-12 16:03:23,603 - sqlalchemy.engine.Engine - INFO - [cached since 1745s ago] (3,)
2025-12-12 16:03:23,693 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:03:23,693 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:03:23,694 INFO sqlalchemy.engine.Engine [cached since 1748s ago] (3, 100, 0)
2025-12-12 16:03:23,694 - sqlalchemy.engine.Engine - INFO - [cached since 1748s ago] (3, 100, 0)
2025-12-12 16:03:23,728 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:03:23,728 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:03:23,728 INFO sqlalchemy.engine.Engine [cached since 1744s ago] (3, 20, 0)
2025-12-12 16:03:23,728 - sqlalchemy.engine.Engine - INFO - [cached since 1744s ago] (3, 20, 0)
2025-12-12 16:03:23,756 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:03:23,756 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:03:23,796 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:03:23,796 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:33480 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33488 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:03:24,046 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:03:24,046 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:03:24,047 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:03:24,047 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:03:24,047 INFO sqlalchemy.engine.Engine [cached since 1749s ago] (3,)
2025-12-12 16:03:24,047 - sqlalchemy.engine.Engine - INFO - [cached since 1749s ago] (3,)
2025-12-12 16:03:24,169 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:03:24,169 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:03:24,458 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:03:24,458 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:03:24,459 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:03:24,459 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:03:24,459 INFO sqlalchemy.engine.Engine [cached since 1746s ago] (3,)
2025-12-12 16:03:24,459 - sqlalchemy.engine.Engine - INFO - [cached since 1746s ago] (3,)
2025-12-12 16:03:24,683 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:03:24,683 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:03:24,683 INFO sqlalchemy.engine.Engine [cached since 1745s ago] (3, 20, 0)
2025-12-12 16:03:24,683 - sqlalchemy.engine.Engine - INFO - [cached since 1745s ago] (3, 20, 0)
2025-12-12 16:03:24,834 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:03:24,834 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:33488 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:07:11,978 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:07:11,978 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:07:11,978 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:07:11,978 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:07:11,979 INFO sqlalchemy.engine.Engine [cached since 1977s ago] (3,)
2025-12-12 16:07:11,979 - sqlalchemy.engine.Engine - INFO - [cached since 1977s ago] (3,)
2025-12-12 16:07:12,129 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:07:12,129 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56340 - "GET /api/v1/users/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:56368 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:56368 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:07:12,391 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:07:12,391 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:07:12,392 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:07:12,392 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:07:12,392 INFO sqlalchemy.engine.Engine [cached since 1978s ago] (3,)
2025-12-12 16:07:12,392 - sqlalchemy.engine.Engine - INFO - [cached since 1978s ago] (3,)
2025-12-12 16:07:12,439 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:07:12,439 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:07:12,439 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:07:12,439 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:07:12,439 INFO sqlalchemy.engine.Engine [cached since 1978s ago] (3,)
2025-12-12 16:07:12,439 - sqlalchemy.engine.Engine - INFO - [cached since 1978s ago] (3,)
2025-12-12 16:07:12,493 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:07:12,493 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:07:12,493 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:07:12,493 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:07:12,493 INFO sqlalchemy.engine.Engine [cached since 1977s ago] (3,)
2025-12-12 16:07:12,493 - sqlalchemy.engine.Engine - INFO - [cached since 1977s ago] (3,)
2025-12-12 16:07:12,513 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:07:12,513 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:07:12,560 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:07:12,560 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:56340 - "GET /api/v1/users/me HTTP/1.1" 200 OK
2025-12-12 16:07:12,642 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:07:12,642 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:07:12,643 INFO sqlalchemy.engine.Engine [cached since 1977s ago] (3, 100, 0)
2025-12-12 16:07:12,643 - sqlalchemy.engine.Engine - INFO - [cached since 1977s ago] (3, 100, 0)
2025-12-12 16:07:12,718 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:07:12,718 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56368 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:07:12,846 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:07:12,846 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:07:12,846 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:07:12,846 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:07:12,846 INFO sqlalchemy.engine.Engine [cached since 1975s ago] (3,)
2025-12-12 16:07:12,846 - sqlalchemy.engine.Engine - INFO - [cached since 1975s ago] (3,)
2025-12-12 16:07:12,978 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:07:12,978 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:07:12,978 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:07:12,978 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:07:12,979 INFO sqlalchemy.engine.Engine [cached since 1977s ago] (3,)
2025-12-12 16:07:12,979 - sqlalchemy.engine.Engine - INFO - [cached since 1977s ago] (3,)
2025-12-12 16:07:12,998 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:07:12,998 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:07:12,999 INFO sqlalchemy.engine.Engine [cached since 1974s ago] (3, 20, 0)
2025-12-12 16:07:12,999 - sqlalchemy.engine.Engine - INFO - [cached since 1974s ago] (3, 20, 0)
2025-12-12 16:07:13,077 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:07:13,077 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:07:13,102 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:07:13,102 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:07:13,102 INFO sqlalchemy.engine.Engine [cached since 1977s ago] (3, 100, 0)
2025-12-12 16:07:13,102 - sqlalchemy.engine.Engine - INFO - [cached since 1977s ago] (3, 100, 0)
INFO:     127.0.0.1:56356 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:07:13,166 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:07:13,166 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56368 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:07:13,343 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:07:13,343 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:07:13,343 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:07:13,343 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:07:13,344 INFO sqlalchemy.engine.Engine [cached since 1979s ago] (3,)
2025-12-12 16:07:13,344 - sqlalchemy.engine.Engine - INFO - [cached since 1979s ago] (3,)
2025-12-12 16:07:13,466 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:07:13,466 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:07:13,764 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:07:13,764 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:07:13,765 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:07:13,765 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:07:13,765 INFO sqlalchemy.engine.Engine [cached since 1976s ago] (3,)
2025-12-12 16:07:13,765 - sqlalchemy.engine.Engine - INFO - [cached since 1976s ago] (3,)
2025-12-12 16:07:13,915 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:07:13,915 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:07:13,915 INFO sqlalchemy.engine.Engine [cached since 1975s ago] (3, 20, 0)
2025-12-12 16:07:13,915 - sqlalchemy.engine.Engine - INFO - [cached since 1975s ago] (3, 20, 0)
2025-12-12 16:07:13,990 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:07:13,990 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56356 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50278 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:50278 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:09:02,019 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:09:02,019 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:09:02,019 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:09:02,019 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:09:02,019 INFO sqlalchemy.engine.Engine [cached since 2086s ago] (3,)
2025-12-12 16:09:02,019 - sqlalchemy.engine.Engine - INFO - [cached since 2086s ago] (3,)
2025-12-12 16:09:02,081 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:09:02,081 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:09:02,081 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:09:02,081 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:09:02,081 INFO sqlalchemy.engine.Engine [cached since 2087s ago] (3,)
2025-12-12 16:09:02,081 - sqlalchemy.engine.Engine - INFO - [cached since 2087s ago] (3,)
2025-12-12 16:09:02,141 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:02,141 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:02,141 INFO sqlalchemy.engine.Engine [cached since 2086s ago] (3, 100, 0)
2025-12-12 16:09:02,141 - sqlalchemy.engine.Engine - INFO - [cached since 2086s ago] (3, 100, 0)
2025-12-12 16:09:02,202 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:09:02,202 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:09:02,232 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:09:02,232 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:50278 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:09:02,587 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:09:02,587 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:09:02,588 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:09:02,588 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:09:02,589 INFO sqlalchemy.engine.Engine [cached since 2087s ago] (3,)
2025-12-12 16:09:02,589 - sqlalchemy.engine.Engine - INFO - [cached since 2087s ago] (3,)
2025-12-12 16:09:02,711 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:02,711 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:02,712 INFO sqlalchemy.engine.Engine [cached since 2087s ago] (3, 100, 0)
2025-12-12 16:09:02,712 - sqlalchemy.engine.Engine - INFO - [cached since 2087s ago] (3, 100, 0)
2025-12-12 16:09:02,774 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:09:02,774 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:50278 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:09:02,911 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:09:02,911 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:09:02,912 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:09:02,912 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:09:02,913 INFO sqlalchemy.engine.Engine [cached since 2085s ago] (3,)
2025-12-12 16:09:02,913 - sqlalchemy.engine.Engine - INFO - [cached since 2085s ago] (3,)
2025-12-12 16:09:03,062 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:03,062 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:03,062 INFO sqlalchemy.engine.Engine [cached since 2084s ago] (3, 20, 0)
2025-12-12 16:09:03,062 - sqlalchemy.engine.Engine - INFO - [cached since 2084s ago] (3, 20, 0)
2025-12-12 16:09:03,137 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:09:03,137 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:50264 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:09:03,427 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:09:03,427 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:09:03,428 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:09:03,428 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:09:03,428 INFO sqlalchemy.engine.Engine [cached since 2089s ago] (3,)
2025-12-12 16:09:03,428 - sqlalchemy.engine.Engine - INFO - [cached since 2089s ago] (3,)
2025-12-12 16:09:03,550 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:09:03,550 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:09:03,839 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:09:03,839 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:09:03,840 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:09:03,840 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:09:03,840 INFO sqlalchemy.engine.Engine [cached since 2086s ago] (3,)
2025-12-12 16:09:03,840 - sqlalchemy.engine.Engine - INFO - [cached since 2086s ago] (3,)
2025-12-12 16:09:03,992 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:03,992 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:03,992 INFO sqlalchemy.engine.Engine [cached since 2085s ago] (3, 20, 0)
2025-12-12 16:09:03,992 - sqlalchemy.engine.Engine - INFO - [cached since 2085s ago] (3, 20, 0)
2025-12-12 16:09:04,069 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:09:04,069 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:50264 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50264 - "OPTIONS /api/v1/documents?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50278 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:50278 - "GET /api/v1/documents?page=1&page_size=10 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:50264 - "OPTIONS /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 16:09:06,722 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:09:06,722 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:09:06,722 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:09:06,722 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:09:06,723 INFO sqlalchemy.engine.Engine [cached since 2091s ago] (3,)
2025-12-12 16:09:06,723 - sqlalchemy.engine.Engine - INFO - [cached since 2091s ago] (3,)
2025-12-12 16:09:06,845 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:06,845 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:06,845 INFO sqlalchemy.engine.Engine [cached since 2091s ago] (3, 10, 0)
2025-12-12 16:09:06,845 - sqlalchemy.engine.Engine - INFO - [cached since 2091s ago] (3, 10, 0)
2025-12-12 16:09:06,907 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:09:06,907 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:50278 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
2025-12-12 16:09:07,196 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:09:07,196 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:09:07,196 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:09:07,196 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:09:07,196 INFO sqlalchemy.engine.Engine [cached since 2091s ago] (3,)
2025-12-12 16:09:07,196 - sqlalchemy.engine.Engine - INFO - [cached since 2091s ago] (3,)
2025-12-12 16:09:07,346 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:07,346 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:07,346 INFO sqlalchemy.engine.Engine [cached since 2091s ago] (3, 10, 0)
2025-12-12 16:09:07,346 - sqlalchemy.engine.Engine - INFO - [cached since 2091s ago] (3, 10, 0)
2025-12-12 16:09:07,421 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:09:07,421 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:50278 - "GET /api/v1/documents/?page=1&page_size=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52688 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:52688 - "GET /api/v1/documents?page=1&page_size=100 HTTP/1.1" 307 Temporary Redirect
2025-12-12 16:09:58,187 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:09:58,187 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:09:58,188 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:09:58,188 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:09:58,188 INFO sqlalchemy.engine.Engine [cached since 2144s ago] (3,)
2025-12-12 16:09:58,188 - sqlalchemy.engine.Engine - INFO - [cached since 2144s ago] (3,)
2025-12-12 16:09:58,234 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:09:58,234 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:09:58,235 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:09:58,235 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:09:58,235 INFO sqlalchemy.engine.Engine [cached since 2143s ago] (3,)
2025-12-12 16:09:58,235 - sqlalchemy.engine.Engine - INFO - [cached since 2143s ago] (3,)
2025-12-12 16:09:58,310 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:09:58,310 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:09:58,387 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:58,387 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:58,388 INFO sqlalchemy.engine.Engine [cached since 2142s ago] (3, 100, 0)
2025-12-12 16:09:58,388 - sqlalchemy.engine.Engine - INFO - [cached since 2142s ago] (3, 100, 0)
2025-12-12 16:09:58,465 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:09:58,465 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:52688 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:09:58,553 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:09:58,553 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:09:58,554 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:09:58,554 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:09:58,555 INFO sqlalchemy.engine.Engine [cached since 2140s ago] (3,)
2025-12-12 16:09:58,555 - sqlalchemy.engine.Engine - INFO - [cached since 2140s ago] (3,)
2025-12-12 16:09:58,677 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:58,677 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:58,678 INFO sqlalchemy.engine.Engine [cached since 2139s ago] (3, 20, 0)
2025-12-12 16:09:58,678 - sqlalchemy.engine.Engine - INFO - [cached since 2139s ago] (3, 20, 0)
2025-12-12 16:09:58,741 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:09:58,741 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-12 16:09:58,773 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:09:58,773 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:09:58,774 INFO sqlalchemy.engine.Engine SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:09:58,774 - sqlalchemy.engine.Engine - INFO - SELECT count(documents.id) AS count_1 
FROM documents 
WHERE documents.user_id = $1::INTEGER
2025-12-12 16:09:58,774 INFO sqlalchemy.engine.Engine [cached since 2143s ago] (3,)
2025-12-12 16:09:58,774 - sqlalchemy.engine.Engine - INFO - [cached since 2143s ago] (3,)
INFO:     127.0.0.1:52686 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
2025-12-12 16:09:58,924 INFO sqlalchemy.engine.Engine SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:58,924 - sqlalchemy.engine.Engine - INFO - SELECT documents.id, documents.user_id, documents.filename, documents.original_filename, documents.file_path, documents.file_type, documents.file_size, documents.title, documents.description, documents.content_hash, documents.word_count, documents.reading_time_minutes, documents.complexity_score, documents.extracted_topics, documents.extracted_entities, documents.summary_brief, documents.summary_detailed, documents.key_points, documents.status, documents.error_message, documents.chunk_count, documents.weaviate_collection, documents.created_at, documents.updated_at, documents.processed_at 
FROM documents 
WHERE documents.user_id = $1::INTEGER ORDER BY documents.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:58,924 INFO sqlalchemy.engine.Engine [cached since 2143s ago] (3, 100, 0)
2025-12-12 16:09:58,924 - sqlalchemy.engine.Engine - INFO - [cached since 2143s ago] (3, 100, 0)
2025-12-12 16:09:58,992 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:09:58,992 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:09:58,993 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:09:58,993 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.hashed_password, users.full_name, users.is_active, users.is_verified, users.avatar_url, users.preferred_llm, users.theme, users.totp_secret, users.totp_enabled, users.backup_codes, users.daily_query_limit, users.queries_today, users.last_query_reset, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-12-12 16:09:58,993 INFO sqlalchemy.engine.Engine [cached since 2144s ago] (3,)
2025-12-12 16:09:58,993 - sqlalchemy.engine.Engine - INFO - [cached since 2144s ago] (3,)
2025-12-12 16:09:59,000 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:09:59,000 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:52688 - "GET /api/v1/documents/?page=1&page_size=100 HTTP/1.1" 200 OK
2025-12-12 16:09:59,117 INFO sqlalchemy.engine.Engine ROLLBACK
2025-12-12 16:09:59,117 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-12-12 16:09:59,405 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-12 16:09:59,405 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-12 16:09:59,406 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:09:59,406 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT chat_sessions.id AS id, chat_sessions.user_id AS user_id, chat_sessions.title AS title, chat_sessions.description AS description, chat_sessions.document_ids AS document_ids, chat_sessions.collection_id AS collection_id, chat_sessions.is_active AS is_active, chat_sessions.is_pinned AS is_pinned, chat_sessions.message_count AS message_count, chat_sessions.created_at AS created_at, chat_sessions.updated_at AS updated_at, chat_sessions.last_message_at AS last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true) AS anon_1
2025-12-12 16:09:59,407 INFO sqlalchemy.engine.Engine [cached since 2141s ago] (3,)
2025-12-12 16:09:59,407 - sqlalchemy.engine.Engine - INFO - [cached since 2141s ago] (3,)
2025-12-12 16:09:59,558 INFO sqlalchemy.engine.Engine SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:59,558 - sqlalchemy.engine.Engine - INFO - SELECT chat_sessions.id, chat_sessions.user_id, chat_sessions.title, chat_sessions.description, chat_sessions.document_ids, chat_sessions.collection_id, chat_sessions.is_active, chat_sessions.is_pinned, chat_sessions.message_count, chat_sessions.created_at, chat_sessions.updated_at, chat_sessions.last_message_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = $1::INTEGER AND chat_sessions.is_active = true ORDER BY chat_sessions.last_message_at DESC, chat_sessions.created_at DESC 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-12-12 16:09:59,558 INFO sqlalchemy.engine.Engine [cached since 2140s ago] (3, 20, 0)
2025-12-12 16:09:59,558 - sqlalchemy.engine.Engine - INFO - [cached since 2140s ago] (3, 20, 0)
2025-12-12 16:09:59,636 INFO sqlalchemy.engine.Engine COMMIT
2025-12-12 16:09:59,636 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:52686 - "GET /api/v1/chat/sessions?page=1&per_page=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:35824 - "OPTIONS /api/v1/auth/login HTTP/1.1" 400 Bad Request
